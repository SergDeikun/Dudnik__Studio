{"mappings":"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","sources":["node_modules/@fancyapps/ui/src/shared/utils/isPlainObject.js","node_modules/@fancyapps/ui/src/shared/utils/extend.js","node_modules/@fancyapps/ui/src/shared/utils/canUseDOM.js","node_modules/@fancyapps/ui/src/shared/utils/setFocusOn.js","node_modules/@fancyapps/ui/src/shared/Base/Base.js","node_modules/@fancyapps/ui/src/shared/utils/resolve.js","node_modules/@fancyapps/ui/src/shared/utils/round.js","node_modules/@fancyapps/ui/src/shared/utils/isScrollable.js","node_modules/@fancyapps/ui/src/shared/utils/ResizeObserver.js","node_modules/@fancyapps/ui/src/shared/utils/PointerTracker.js","node_modules/@fancyapps/ui/src/shared/utils/getTextNodeFromPoint.js","node_modules/@fancyapps/ui/src/shared/utils/getDimensions.js","node_modules/@fancyapps/ui/src/Panzoom/Panzoom.js","node_modules/@fancyapps/ui/src/Panzoom/plugins/index.js","node_modules/@fancyapps/ui/src/shared/utils/throttle.js","node_modules/@fancyapps/ui/src/Carousel/plugins/Navigation/Navigation.js","node_modules/@fancyapps/ui/src/Carousel/plugins/Sync/Sync.js","node_modules/@fancyapps/ui/src/Carousel/plugins/index.js","node_modules/@fancyapps/ui/src/Carousel/plugins/Dots/Dots.js","node_modules/@fancyapps/ui/src/Carousel/Carousel.js","node_modules/@fancyapps/ui/src/Carousel/l10n/en.js","node_modules/@fancyapps/ui/src/Fancybox/plugins/Thumbs/Thumbs.js","node_modules/@fancyapps/ui/src/Fancybox/plugins/Html/Html.js","node_modules/@fancyapps/ui/src/Fancybox/plugins/Image/Image.js","node_modules/@fancyapps/ui/src/Fancybox/plugins/Hash/Hash.js","node_modules/@fancyapps/ui/src/shared/utils/Fullscreen.js","node_modules/@fancyapps/ui/src/shared/utils/Slideshow.js","node_modules/@fancyapps/ui/src/Fancybox/plugins/Toolbar/Toolbar.js","node_modules/@fancyapps/ui/src/Fancybox/plugins/index.js","node_modules/@fancyapps/ui/src/Fancybox/plugins/ScrollLock/ScrollLock.js","node_modules/@fancyapps/ui/src/Fancybox/Fancybox.js","node_modules/@fancyapps/ui/src/Fancybox/l10n/en.js","src/js/fancybox.js"],"sourcesContent":["/**\n * Check to see if an object is a plain object (created using \"{}\" or \"new Object\").\n * @param {*} obj Variable of any type\n * @returns {Boolean}\n */\nexport const isPlainObject = (obj) => {\n  return (\n    // separate from primitives\n    typeof obj === \"object\" &&\n    // is obvious\n    obj !== null &&\n    // separate instances (Array, DOM, ...)\n    obj.constructor === Object &&\n    // separate build-in like Math\n    Object.prototype.toString.call(obj) === \"[object Object]\"\n  );\n};\n","import { isPlainObject } from \"./isPlainObject.js\";\n\n/**\n * Merge the contents of two or more objects together into the first object.\n * If passing \"true\" for first argument, the merge becomes recursive (aka. deep copy).\n * @param  {...any} args\n * @returns {Object}\n */\nexport const extend = (...args) => {\n  let deep = false;\n\n  if (typeof args[0] == \"boolean\") {\n    deep = args.shift();\n  }\n\n  let result = args[0];\n\n  if (!result || typeof result !== \"object\") {\n    throw new Error(\"extendee must be an object\");\n  }\n\n  const extenders = args.slice(1);\n  const len = extenders.length;\n\n  for (let i = 0; i < len; i++) {\n    const extender = extenders[i];\n\n    for (let key in extender) {\n      if (extender.hasOwnProperty(key)) {\n        const value = extender[key];\n\n        if (deep && (Array.isArray(value) || isPlainObject(value))) {\n          const base = Array.isArray(value) ? [] : {};\n\n          result[key] = extend(true, result.hasOwnProperty(key) ? result[key] : base, value);\n        } else {\n          result[key] = value;\n        }\n      }\n    }\n  }\n\n  return result;\n};\n","/**\r\n * Detect if rendering from the client or the server\r\n */\r\nexport const canUseDOM = !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\r\n","import { canUseDOM } from \"./canUseDOM.js\";\r\n\r\nlet preventScrollSupported = null;\r\n\r\nexport const FOCUSABLE_ELEMENTS = [\r\n  \"a[href]\",\r\n  \"area[href]\",\r\n  'input:not([disabled]):not([type=\"hidden\"]):not([aria-hidden])',\r\n  \"select:not([disabled]):not([aria-hidden])\",\r\n  \"textarea:not([disabled]):not([aria-hidden])\",\r\n  \"button:not([disabled]):not([aria-hidden])\",\r\n  \"iframe\",\r\n  \"object\",\r\n  \"embed\",\r\n  \"video\",\r\n  \"audio\",\r\n  \"[contenteditable]\",\r\n  '[tabindex]:not([tabindex^=\"-\"]):not([disabled]):not([aria-hidden])',\r\n];\r\n\r\nexport const setFocusOn = (node) => {\r\n  if (!node || !canUseDOM) {\r\n    return;\r\n  }\r\n\r\n  if (preventScrollSupported === null) {\r\n    document.createElement(\"div\").focus({\r\n      get preventScroll() {\r\n        preventScrollSupported = true;\r\n\r\n        return false;\r\n      },\r\n    });\r\n  }\r\n\r\n  try {\r\n    if (node.setActive) {\r\n      // IE/Edge\r\n      node.setActive();\r\n    } else if (preventScrollSupported) {\r\n      // Modern browsers\r\n      node.focus({ preventScroll: true });\r\n    } else {\r\n      // Safari does not support `preventScroll` option\r\n      // https://bugs.webkit.org/show_bug.cgi?id=178583\r\n\r\n      // Save position\r\n      const scrollTop = window.pageXOffset || document.body.scrollTop;\r\n      const scrollLeft = window.pageYOffset || document.body.scrollLeft;\r\n\r\n      node.focus();\r\n\r\n      document.body.scrollTo({\r\n        top: scrollTop,\r\n        left: scrollLeft,\r\n        behavior: \"auto\",\r\n      });\r\n    }\r\n  } catch (e) {}\r\n};\r\n","import { extend } from \"../utils/extend.js\";\nimport { resolve } from \"../utils/resolve.js\";\nimport { isPlainObject } from \"../utils/isPlainObject.js\";\n\n/**\n * Base class, all components inherit from this class\n */\nexport class Base {\n  /**\n   * Base constructor\n   * @param {Object} [options] - Options as `key: value` pairs\n   */\n  constructor(options = {}) {\n    this.options = extend(true, {}, options);\n\n    this.plugins = [];\n    this.events = {};\n\n    // * Prefill with initial events\n    for (const type of [\"on\", \"once\"]) {\n      for (const args of Object.entries(this.options[type] || {})) {\n        this[type](...args);\n      }\n    }\n  }\n\n  /**\n   * Retrieve option value by key, supports subkeys\n   * @param {String} key Option name\n   * @param {*} [fallback] Fallback value for non-existing key\n   * @returns {*}\n   */\n  option(key, fallback, ...rest) {\n    // Make sure it is string\n    key = String(key);\n\n    let value = resolve(key, this.options);\n\n    // Allow to have functions as options\n    if (typeof value === \"function\") {\n      value = value.call(this, this, ...rest);\n    }\n\n    return value === undefined ? fallback : value;\n  }\n\n  /**\n   * Simple l10n support - replaces object keys\n   * found in template with corresponding values\n   * @param {String} str String containing values to localize\n   * @param {Array} params Substitute parameters\n   * @returns {String}\n   */\n  localize(str, params = []) {\n    str = String(str).replace(/\\{\\{(\\w+).?(\\w+)?\\}\\}/g, (match, key, subkey) => {\n      let rez = \"\";\n\n      // Plugins have `Plugin.l10n.KEY`\n      if (subkey) {\n        rez = this.option(`${key[0] + key.toLowerCase().substring(1)}.l10n.${subkey}`);\n      } else if (key) {\n        rez = this.option(`l10n.${key}`);\n      }\n\n      if (!rez) {\n        rez = match;\n      }\n\n      for (let index = 0; index < params.length; index++) {\n        rez = rez.split(params[index][0]).join(params[index][1]);\n      }\n\n      return rez;\n    });\n\n    str = str.replace(/\\{\\{(.*)\\}\\}/, (match, key) => {\n      return key;\n    });\n\n    return str;\n  }\n\n  /**\n   * Subscribe to an event\n   * @param {String} name\n   * @param {Function} callback\n   * @returns {Object}\n   */\n  on(name, callback) {\n    if (isPlainObject(name)) {\n      for (const args of Object.entries(name)) {\n        this.on(...args);\n      }\n\n      return this;\n    }\n\n    String(name)\n      .split(\" \")\n      .forEach((item) => {\n        const listeners = (this.events[item] = this.events[item] || []);\n\n        if (listeners.indexOf(callback) == -1) {\n          listeners.push(callback);\n        }\n      });\n\n    return this;\n  }\n\n  /**\n   * Subscribe to an event only once\n   * @param {String} name\n   * @param {Function} callback\n   * @returns {Object}\n   */\n  once(name, callback) {\n    if (isPlainObject(name)) {\n      for (const args of Object.entries(name)) {\n        this.once(...args);\n      }\n\n      return this;\n    }\n\n    String(name)\n      .split(\" \")\n      .forEach((item) => {\n        const listener = (...details) => {\n          this.off(item, listener);\n          callback.call(this, this, ...details);\n        };\n\n        listener._ = callback;\n\n        this.on(item, listener);\n      });\n\n    return this;\n  }\n\n  /**\n   * Unsubscribe event with name and callback\n   * @param {String} name\n   * @param {Function} callback\n   * @returns {Object}\n   */\n  off(name, callback) {\n    if (isPlainObject(name)) {\n      for (const args of Object.entries(name)) {\n        this.off(...args);\n      }\n\n      return;\n    }\n\n    name.split(\" \").forEach((item) => {\n      const listeners = this.events[item];\n\n      if (!listeners || !listeners.length) {\n        return this;\n      }\n\n      let index = -1;\n\n      for (let i = 0, len = listeners.length; i < len; i++) {\n        const listener = listeners[i];\n\n        if (listener && (listener === callback || listener._ === callback)) {\n          index = i;\n          break;\n        }\n      }\n\n      if (index != -1) {\n        listeners.splice(index, 1);\n      }\n    });\n\n    return this;\n  }\n\n  /**\n   * Emit an event.\n   * If present, `\"*\"` handlers are invoked after name-matched handlers.\n   * @param {String} name\n   * @param  {...any} details\n   * @returns {Boolean}\n   */\n  trigger(name, ...details) {\n    for (const listener of [...(this.events[name] || [])].slice()) {\n      if (listener && listener.call(this, this, ...details) === false) {\n        return false;\n      }\n    }\n\n    // A wildcard \"*\" event type\n    for (const listener of [...(this.events[\"*\"] || [])].slice()) {\n      if (listener && listener.call(this, name, this, ...details) === false) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Add given plugins to this instance,\n   * this will end up calling `attach` method of each plugin\n   * @param {Object} Plugins\n   * @returns {Object}\n   */\n  attachPlugins(plugins) {\n    const newPlugins = {};\n\n    for (const [key, Plugin] of Object.entries(plugins || {})) {\n      // Check if this plugin is not disabled by option\n      if (this.options[key] !== false && !this.plugins[key]) {\n        // Populate options with defaults from the plugin\n        this.options[key] = extend({}, Plugin.defaults || {}, this.options[key]);\n\n        // Initialise plugin\n        newPlugins[key] = new Plugin(this);\n      }\n    }\n\n    for (const [key, plugin] of Object.entries(newPlugins)) {\n      plugin.attach(this);\n    }\n\n    this.plugins = Object.assign({}, this.plugins, newPlugins);\n\n    return this;\n  }\n\n  /**\n   * Remove all plugin instances from this instance,\n   * this will end up calling `detach` method of each plugin\n   * @returns {Object}\n   */\n  detachPlugins() {\n    for (const key in this.plugins) {\n      let plugin;\n\n      if ((plugin = this.plugins[key]) && typeof plugin.detach === \"function\") {\n        plugin.detach(this);\n      }\n    }\n\n    this.plugins = {};\n\n    return this;\n  }\n}\n","/**\n * Access nested JavaScript objects by string path.\n * Example: `resolve(\"a.b.c\", {a:{b:{c:\"d\"}})` would return `d`\n * @param {String} path\n * @param {Object} obj\n * @returns {*}\n */\nexport const resolve = function (path, obj) {\n  return path.split(\".\").reduce(function (prev, curr) {\n    return prev && prev[curr];\n  }, obj);\n};\n","/**\n * Round half up; to be more specific and to ensure things like 1.005 round correctly\n * @param {Float} value\n * @param {Integer} precision\n * @returns {Float}\n */\nexport const round = (value, precision = 10000) => {\n  value = parseFloat(value) || 0;\n\n  return Math.round((value + Number.EPSILON) * precision) / precision;\n};\n","/**\n * Check if  element has scrollable content\n * @param {Node} node\n * @returns {Boolean}\n */\nexport const hasScrollbars = function (node) {\n  const overflowY = getComputedStyle(node)[\"overflow-y\"],\n    overflowX = getComputedStyle(node)[\"overflow-x\"],\n    vertical = (overflowY === \"scroll\" || overflowY === \"auto\") && Math.abs(node.scrollHeight - node.clientHeight) > 1,\n    horizontal = (overflowX === \"scroll\" || overflowX === \"auto\") && Math.abs(node.scrollWidth - node.clientWidth) > 1;\n\n  return vertical || horizontal;\n};\n\n/**\n * Check if element or one of the parents is scrollable\n * @param {Node} node  DOM Node element\n * @returns {Boolean}\n */\nexport const isScrollable = function (node) {\n  if (!node || !(typeof node === \"object\" && node instanceof Element) || node === document.body) {\n    return false;\n  }\n\n  if (node.__Panzoom) {\n    return false;\n  }\n\n  if (hasScrollbars(node)) {\n    return node;\n  }\n\n  return isScrollable(node.parentNode);\n};\n","/**\n * ResizeObserver Polyfill\n */\nexport const ResizeObserver =\n  (typeof window !== \"undefined\" && window.ResizeObserver) ||\n  class {\n    constructor(callback) {\n      this.observables = [];\n      // Array of observed elements that looks like this:\n      // [{\n      //   el: domNode,\n      //   size: {height: x, width: y}\n      // }]\n      this.boundCheck = this.check.bind(this);\n      this.boundCheck();\n      this.callback = callback;\n    }\n\n    observe(el) {\n      if (this.observables.some((observable) => observable.el === el)) {\n        return;\n      }\n\n      const newObservable = {\n        el: el,\n        size: {\n          height: el.clientHeight,\n          width: el.clientWidth,\n        },\n      };\n\n      this.observables.push(newObservable);\n    }\n\n    unobserve(el) {\n      this.observables = this.observables.filter((obj) => obj.el !== el);\n    }\n\n    disconnect() {\n      this.observables = [];\n    }\n\n    check() {\n      const changedEntries = this.observables\n        .filter((obj) => {\n          const currentHeight = obj.el.clientHeight;\n          const currentWidth = obj.el.clientWidth;\n          if (obj.size.height !== currentHeight || obj.size.width !== currentWidth) {\n            obj.size.height = currentHeight;\n            obj.size.width = currentWidth;\n            return true;\n          }\n        })\n        .map((obj) => obj.el);\n\n      if (changedEntries.length > 0) {\n        this.callback(changedEntries);\n      }\n\n      window.requestAnimationFrame(this.boundCheck);\n    }\n  };\n","class Pointer {\r\n  constructor(nativePointer) {\r\n    this.id = self.Touch && nativePointer instanceof Touch ? nativePointer.identifier : -1;\r\n\r\n    this.pageX = nativePointer.pageX;\r\n    this.pageY = nativePointer.pageY;\r\n\r\n    this.clientX = nativePointer.clientX;\r\n    this.clientY = nativePointer.clientY;\r\n  }\r\n}\r\n\r\nconst getDistance = (a, b) => {\r\n  if (!b) {\r\n    return 0;\r\n  }\r\n\r\n  return Math.sqrt((b.clientX - a.clientX) ** 2 + (b.clientY - a.clientY) ** 2);\r\n};\r\n\r\nconst getMidpoint = (a, b) => {\r\n  if (!b) {\r\n    return a;\r\n  }\r\n\r\n  return {\r\n    clientX: (a.clientX + b.clientX) / 2,\r\n    clientY: (a.clientY + b.clientY) / 2,\r\n  };\r\n};\r\n\r\nconst isTouchEvent = (event) => \"changedTouches\" in event;\r\n\r\nclass PointerTracker {\r\n  constructor(_element, { start = () => true, move = () => {}, end = () => {} } = {}) {\r\n    this._element = _element;\r\n\r\n    this.startPointers = [];\r\n    this.currentPointers = [];\r\n\r\n    this._pointerStart = (event) => {\r\n      if (event.buttons > 0 && event.button !== 0) {\r\n        return;\r\n      }\r\n\r\n      const pointer = new Pointer(event);\r\n\r\n      if (this.currentPointers.some((p) => p.id === pointer.id)) {\r\n        return;\r\n      }\r\n\r\n      if (!this._triggerPointerStart(pointer, event)) {\r\n        return;\r\n      }\r\n\r\n      window.addEventListener(\"mousemove\", this._move);\r\n      window.addEventListener(\"mouseup\", this._pointerEnd);\r\n    };\r\n\r\n    this._touchStart = (event) => {\r\n      for (const touch of Array.from(event.changedTouches || [])) {\r\n        this._triggerPointerStart(new Pointer(touch), event);\r\n      }\r\n    };\r\n\r\n    this._move = (event) => {\r\n      const previousPointers = this.currentPointers.slice();\r\n      const changedPointers = isTouchEvent(event)\r\n        ? Array.from(event.changedTouches).map((t) => new Pointer(t))\r\n        : [new Pointer(event)];\r\n\r\n      const trackedChangedPointers = [];\r\n\r\n      for (const pointer of changedPointers) {\r\n        const index = this.currentPointers.findIndex((p) => p.id === pointer.id);\r\n\r\n        if (index < 0) {\r\n          continue;\r\n        }\r\n\r\n        trackedChangedPointers.push(pointer);\r\n\r\n        this.currentPointers[index] = pointer;\r\n      }\r\n\r\n      this._moveCallback(previousPointers, this.currentPointers.slice(), event);\r\n    };\r\n\r\n    this._triggerPointerEnd = (pointer, event) => {\r\n      const index = this.currentPointers.findIndex((p) => p.id === pointer.id);\r\n\r\n      if (index < 0) {\r\n        return false;\r\n      }\r\n\r\n      this.currentPointers.splice(index, 1);\r\n      this.startPointers.splice(index, 1);\r\n\r\n      this._endCallback(pointer, event);\r\n\r\n      return true;\r\n    };\r\n\r\n    this._pointerEnd = (event) => {\r\n      if (event.buttons > 0 && event.button !== 0) {\r\n        return;\r\n      }\r\n\r\n      if (!this._triggerPointerEnd(new Pointer(event), event)) {\r\n        return;\r\n      }\r\n\r\n      window.removeEventListener(\"mousemove\", this._move, { passive: false });\r\n      window.removeEventListener(\"mouseup\", this._pointerEnd, { passive: false });\r\n    };\r\n\r\n    this._touchEnd = (event) => {\r\n      for (const touch of Array.from(event.changedTouches || [])) {\r\n        this._triggerPointerEnd(new Pointer(touch), event);\r\n      }\r\n    };\r\n\r\n    this._startCallback = start;\r\n    this._moveCallback = move;\r\n    this._endCallback = end;\r\n\r\n    this._element.addEventListener(\"mousedown\", this._pointerStart, { passive: false });\r\n    this._element.addEventListener(\"touchstart\", this._touchStart, { passive: false });\r\n    this._element.addEventListener(\"touchmove\", this._move, { passive: false });\r\n    this._element.addEventListener(\"touchend\", this._touchEnd);\r\n    this._element.addEventListener(\"touchcancel\", this._touchEnd);\r\n  }\r\n\r\n  stop() {\r\n    this._element.removeEventListener(\"mousedown\", this._pointerStart, { passive: false });\r\n    this._element.removeEventListener(\"touchstart\", this._touchStart, { passive: false });\r\n    this._element.removeEventListener(\"touchmove\", this._move, { passive: false });\r\n    this._element.removeEventListener(\"touchend\", this._touchEnd);\r\n    this._element.removeEventListener(\"touchcancel\", this._touchEnd);\r\n\r\n    window.removeEventListener(\"mousemove\", this._move);\r\n    window.removeEventListener(\"mouseup\", this._pointerEnd);\r\n  }\r\n\r\n  _triggerPointerStart(pointer, event) {\r\n    if (!this._startCallback(pointer, event)) {\r\n      return false;\r\n    }\r\n\r\n    this.currentPointers.push(pointer);\r\n    this.startPointers.push(pointer);\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nexport { PointerTracker, getDistance, getMidpoint };\r\n","/**\n * Get element child node at the given coordinates\n * @param {Element} HTML element\n * @param {Float|Integer} x\n * @param {Float|Integer} y\n * @returns {Node|Boolean}}\n */\nexport const getTextNodeFromPoint = (element, x, y) => {\n  const nodes = element.childNodes;\n  const range = document.createRange();\n\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n\n    if (node.nodeType !== Node.TEXT_NODE) {\n      continue;\n    }\n\n    range.selectNodeContents(node);\n\n    const rect = range.getBoundingClientRect();\n\n    if (x >= rect.left && y >= rect.top && x <= rect.right && y <= rect.bottom) {\n      return node;\n    }\n  }\n\n  return false;\n};\n","/**\n * Get actual width of the element, regardless of how much of content is currently visible\n * @param {Element} elem\n * @returns {Integer}\n */\nexport const getFullWidth = (elem) => {\n  return Math.max(\n    parseFloat(elem.naturalWidth || 0),\n    parseFloat((elem.width && elem.width.baseVal && elem.width.baseVal.value) || 0),\n    parseFloat(elem.offsetWidth || 0),\n    parseFloat(elem.scrollWidth || 0)\n  );\n};\n\n/**\n * Get actual height of the element, regardless of how much of content is currently visible\n * @param {Element} elem\n * @returns {Integer}\n */\nexport const getFullHeight = (elem) => {\n  return Math.max(\n    parseFloat(elem.naturalHeight || 0),\n    parseFloat((elem.height && elem.height.baseVal && elem.height.baseVal.value) || 0),\n    parseFloat(elem.offsetHeight || 0),\n    parseFloat(elem.scrollHeight || 0)\n  );\n};\n\n/**\n * Calculate bounding size to fit dimensions while preserving aspect ratio\n * @param {Number} srcWidth\n * @param {Number} srcHeight\n * @param {Number} maxWidth\n * @param {Number} maxHeight\n * @returns {Object}\n */\nexport const calculateAspectRatioFit = (srcWidth, srcHeight, maxWidth, maxHeight) => {\n  const ratio = Math.min(maxWidth / srcWidth || 0, maxHeight / srcHeight);\n\n  return { width: srcWidth * ratio || 0, height: srcHeight * ratio || 0 };\n};\n","import { extend } from \"../shared/utils/extend.js\";\nimport { round } from \"../shared/utils/round.js\";\nimport { isScrollable } from \"../shared/utils/isScrollable.js\";\n\nimport { ResizeObserver } from \"../shared/utils/ResizeObserver.js\";\nimport { PointerTracker, getMidpoint, getDistance } from \"../shared/utils/PointerTracker.js\";\n\nimport { getTextNodeFromPoint } from \"../shared/utils/getTextNodeFromPoint.js\";\n\nimport { getFullWidth, getFullHeight, calculateAspectRatioFit } from \"../shared/utils/getDimensions.js\";\n\nimport { Base } from \"../shared/Base/Base.js\";\n\nimport { Plugins } from \"./plugins/index.js\";\n\nconst defaults = {\n  // Enable touch guestures\n  touch: true,\n\n  // Enable zooming\n  zoom: true,\n\n  // Enable pinch gesture to zoom in/out using two fingers\n  pinchToZoom: true,\n\n  // Disable dragging if scale level is equal to value of `baseScale` option\n  panOnlyZoomed: false,\n\n  // Lock axis while dragging,\n  // possible values: false | \"x\" | \"y\" | \"xy\"\n  lockAxis: false,\n\n  // * All friction values are inside [0, 1) interval,\n  // * where 0 would change instantly, but 0.99 would update extremely slowly\n\n  // Friction while panning/dragging\n  friction: 0.64,\n\n  // Friction while decelerating after drag end\n  decelFriction: 0.88,\n\n  // Friction while scaling\n  zoomFriction: 0.74,\n\n  // Bounciness after hitting the edge\n  bounceForce: 0.2,\n\n  // Initial scale level\n  baseScale: 1,\n\n  // Minimum scale level\n  minScale: 1,\n\n  // Maximum scale level\n  maxScale: 2,\n\n  // Default scale step while zooming\n  step: 0.5,\n\n  // Allow to select text,\n  // if enabled, dragging will be disabled when text selection is detected\n  textSelection: false,\n\n  // Add `click` event listener,\n  // possible values: true | false | function | \"toggleZoom\"\n  click: \"toggleZoom\",\n\n  // Add `wheel` event listener,\n  // possible values: true | false | function |  \"zoom\"\n  wheel: \"zoom\",\n\n  // Value for zoom on mouse wheel\n  wheelFactor: 42,\n\n  // Number of wheel events after which it should stop preventing default behaviour of mouse wheel\n  wheelLimit: 5,\n\n  // Class name added to `$viewport` element to indicate if content is draggable\n  draggableClass: \"is-draggable\",\n\n  // Class name added to `$viewport` element to indicate that user is currently dragging\n  draggingClass: \"is-dragging\",\n\n  // Content will be scaled by this number,\n  // this can also be a function which should return a number, for example:\n  // ratio: function() { return 1 / (window.devicePixelRatio || 1) }\n  ratio: 1,\n};\n\nexport class Panzoom extends Base {\n  /**\n   * Panzoom constructor\n   * @constructs Panzoom\n   * @param {HTMLElement} $viewport Panzoom container\n   * @param {Object} [options] Options for Panzoom\n   */\n  constructor($container, options = {}) {\n    super(extend(true, {}, defaults, options));\n\n    this.state = \"init\";\n\n    this.$container = $container;\n\n    // Bind event handlers for referencability\n    for (const methodName of [\"onLoad\", \"onWheel\", \"onClick\"]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n\n    this.initLayout();\n\n    this.resetValues();\n\n    this.attachPlugins(Panzoom.Plugins);\n\n    this.trigger(\"init\");\n\n    this.updateMetrics();\n\n    this.attachEvents();\n\n    this.trigger(\"ready\");\n\n    if (this.option(\"centerOnStart\") === false) {\n      this.state = \"ready\";\n    } else {\n      this.panTo({\n        friction: 0,\n      });\n    }\n\n    $container.__Panzoom = this;\n  }\n\n  /**\n   * Create references to container, viewport and content elements\n   */\n  initLayout() {\n    const $container = this.$container;\n\n    // Make sure content element exists\n    if (!($container instanceof HTMLElement)) {\n      throw new Error(\"Panzoom: Container not found\");\n    }\n\n    const $content = this.option(\"content\") || $container.querySelector(\".panzoom__content\");\n\n    // Make sure content element exists\n    if (!$content) {\n      throw new Error(\"Panzoom: Content not found\");\n    }\n\n    this.$content = $content;\n\n    let $viewport = this.option(\"viewport\") || $container.querySelector(\".panzoom__viewport\");\n\n    if (!$viewport && this.option(\"wrapInner\") !== false) {\n      $viewport = document.createElement(\"div\");\n      $viewport.classList.add(\"panzoom__viewport\");\n\n      $viewport.append(...$container.childNodes);\n\n      $container.appendChild($viewport);\n    }\n\n    this.$viewport = $viewport || $content.parentNode;\n  }\n\n  /**\n   * Restore instance variables to default values\n   */\n  resetValues() {\n    this.updateRate = this.option(\"updateRate\", /iPhone|iPad|iPod|Android/i.test(navigator.userAgent) ? 250 : 24);\n\n    this.container = {\n      width: 0,\n      height: 0,\n    };\n\n    this.viewport = {\n      width: 0,\n      height: 0,\n    };\n\n    this.content = {\n      // Full content dimensions (naturalWidth/naturalHeight for images)\n      origWidth: 0,\n      origHeight: 0,\n\n      // Current dimensions of the content\n      width: 0,\n      height: 0,\n\n      // Current position; these values reflect CSS `transform` value\n      x: this.option(\"x\", 0),\n      y: this.option(\"y\", 0),\n\n      // Current scale; does not reflect CSS `transform` value\n      scale: this.option(\"baseScale\"),\n    };\n\n    // End values of current pan / zoom animation\n    this.transform = {\n      x: 0,\n      y: 0,\n      scale: 1,\n    };\n\n    this.resetDragPosition();\n  }\n\n  /**\n   * Handle `load` event\n   * @param {Event} event\n   */\n  onLoad(event) {\n    this.updateMetrics();\n\n    this.panTo({ scale: this.option(\"baseScale\"), friction: 0 });\n\n    this.trigger(\"load\", event);\n  }\n\n  /**\n   * Handle `click` event\n   * @param {Event} event\n   */\n  onClick(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    if (document.activeElement && document.activeElement.closest(\"[contenteditable]\")) {\n      return;\n    }\n\n    // Skip if text is selected\n    if (\n      this.option(\"textSelection\") &&\n      window.getSelection().toString().length &&\n      !(event.target && event.target.hasAttribute(\"data-fancybox-close\"))\n    ) {\n      event.stopPropagation();\n      return;\n    }\n\n    const rect = this.$content.getClientRects()[0];\n\n    // Check if container has changed position (for example, when current instance is inside another one)\n    if (this.state !== \"ready\") {\n      if (\n        this.dragPosition.midPoint ||\n        Math.abs(rect.top - this.dragStart.rect.top) > 1 ||\n        Math.abs(rect.left - this.dragStart.rect.left) > 1\n      ) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        return;\n      }\n    }\n\n    if (this.trigger(\"click\", event) === false) {\n      return;\n    }\n\n    if (this.option(\"zoom\") && this.option(\"click\") === \"toggleZoom\") {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.zoomWithClick(event);\n    }\n  }\n\n  /**\n   * Handle `wheel` event\n   * @param {Event} event\n   */\n  onWheel(event) {\n    if (this.trigger(\"wheel\", event) === false) {\n      return;\n    }\n\n    if (this.option(\"zoom\") && this.option(\"wheel\")) {\n      this.zoomWithWheel(event);\n    }\n  }\n\n  /**\n   * Change zoom level depending on scroll direction\n   * @param {Event} event `wheel` event\n   */\n  zoomWithWheel(event) {\n    if (this.changedDelta === undefined) {\n      this.changedDelta = 0;\n    }\n\n    const delta = Math.max(-1, Math.min(1, -event.deltaY || -event.deltaX || event.wheelDelta || -event.detail));\n    const scale = this.content.scale;\n\n    let newScale = (scale * (100 + delta * this.option(\"wheelFactor\"))) / 100;\n\n    if (\n      (delta < 0 && Math.abs(scale - this.option(\"minScale\")) < 0.01) ||\n      (delta > 0 && Math.abs(scale - this.option(\"maxScale\")) < 0.01)\n    ) {\n      this.changedDelta += Math.abs(delta);\n      newScale = scale;\n    } else {\n      this.changedDelta = 0;\n      newScale = Math.max(Math.min(newScale, this.option(\"maxScale\")), this.option(\"minScale\"));\n    }\n\n    if (this.changedDelta > this.option(\"wheelLimit\")) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (newScale === scale) {\n      return;\n    }\n\n    const rect = this.$content.getBoundingClientRect();\n\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n\n    this.zoomTo(newScale, { x, y });\n  }\n\n  /**\n   * Change zoom level depending on click coordinates\n   * @param {Event} event `click` event\n   */\n  zoomWithClick(event) {\n    const rect = this.$content.getClientRects()[0];\n\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n\n    this.toggleZoom({ x, y });\n  }\n\n  /**\n   * Attach load, wheel and click event listeners, initialize `resizeObserver` and `PointerTracker`\n   */\n  attachEvents() {\n    this.$content.addEventListener(\"load\", this.onLoad);\n\n    this.$container.addEventListener(\"wheel\", this.onWheel, { passive: false });\n    this.$container.addEventListener(\"click\", this.onClick, { passive: false });\n\n    this.initObserver();\n\n    const pointerTracker = new PointerTracker(this.$container, {\n      start: (pointer, event) => {\n        if (!this.option(\"touch\")) {\n          return false;\n        }\n\n        if (this.velocity.scale < 0) {\n          return false;\n        }\n\n        const target = event.composedPath()[0];\n\n        if (!pointerTracker.currentPointers.length) {\n          const ignoreClickedElement =\n            [\"BUTTON\", \"TEXTAREA\", \"OPTION\", \"INPUT\", \"SELECT\", \"VIDEO\"].indexOf(target.nodeName) !== -1;\n\n          if (ignoreClickedElement) {\n            return false;\n          }\n\n          // Allow text selection\n          if (this.option(\"textSelection\") && getTextNodeFromPoint(target, pointer.clientX, pointer.clientY)) {\n            return false;\n          }\n        }\n\n        if (isScrollable(target)) {\n          return false;\n        }\n\n        if (this.trigger(\"touchStart\", event) === false) {\n          return false;\n        }\n\n        if (event.type === \"mousedown\") {\n          event.preventDefault();\n        }\n\n        this.state = \"pointerdown\";\n\n        this.resetDragPosition();\n\n        this.dragPosition.midPoint = null;\n        this.dragPosition.time = Date.now();\n\n        return true;\n      },\n      move: (previousPointers, currentPointers, event) => {\n        if (this.state !== \"pointerdown\") {\n          return;\n        }\n\n        if (this.trigger(\"touchMove\", event) === false) {\n          event.preventDefault();\n          return;\n        }\n\n        // Disable touch action if current zoom level is below base level\n        if (\n          currentPointers.length < 2 &&\n          this.option(\"panOnlyZoomed\") === true &&\n          this.content.width <= this.viewport.width &&\n          this.content.height <= this.viewport.height &&\n          this.transform.scale <= this.option(\"baseScale\")\n        ) {\n          return;\n        }\n\n        if (currentPointers.length > 1 && (!this.option(\"zoom\") || this.option(\"pinchToZoom\") === false)) {\n          return;\n        }\n\n        const prevMidpoint = getMidpoint(previousPointers[0], previousPointers[1]);\n        const newMidpoint = getMidpoint(currentPointers[0], currentPointers[1]);\n\n        const panX = newMidpoint.clientX - prevMidpoint.clientX;\n        const panY = newMidpoint.clientY - prevMidpoint.clientY;\n\n        const prevDistance = getDistance(previousPointers[0], previousPointers[1]);\n        const newDistance = getDistance(currentPointers[0], currentPointers[1]);\n\n        const scaleDiff = prevDistance && newDistance ? newDistance / prevDistance : 1;\n\n        this.dragOffset.x += panX;\n        this.dragOffset.y += panY;\n\n        this.dragOffset.scale *= scaleDiff;\n\n        this.dragOffset.time = Date.now() - this.dragPosition.time;\n\n        const axisToLock = this.dragStart.scale === 1 && this.option(\"lockAxis\");\n\n        if (axisToLock && !this.lockAxis) {\n          if (Math.abs(this.dragOffset.x) < 6 && Math.abs(this.dragOffset.y) < 6) {\n            event.preventDefault();\n            return;\n          }\n\n          const angle = Math.abs((Math.atan2(this.dragOffset.y, this.dragOffset.x) * 180) / Math.PI);\n\n          this.lockAxis = angle > 45 && angle < 135 ? \"y\" : \"x\";\n        }\n\n        if (axisToLock !== \"xy\" && this.lockAxis === \"y\") {\n          return;\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        event.stopImmediatePropagation();\n\n        if (this.lockAxis) {\n          this.dragOffset[this.lockAxis === \"x\" ? \"y\" : \"x\"] = 0;\n        }\n\n        this.$container.classList.add(this.option(\"draggingClass\"));\n\n        if (!(this.transform.scale === this.option(\"baseScale\") && this.lockAxis === \"y\")) {\n          this.dragPosition.x = this.dragStart.x + this.dragOffset.x;\n        }\n\n        if (!(this.transform.scale === this.option(\"baseScale\") && this.lockAxis === \"x\")) {\n          this.dragPosition.y = this.dragStart.y + this.dragOffset.y;\n        }\n\n        this.dragPosition.scale = this.dragStart.scale * this.dragOffset.scale;\n\n        if (currentPointers.length > 1) {\n          const startPoint = getMidpoint(pointerTracker.startPointers[0], pointerTracker.startPointers[1]);\n\n          const xPos = startPoint.clientX - this.dragStart.rect.x;\n          const yPos = startPoint.clientY - this.dragStart.rect.y;\n\n          const { deltaX, deltaY } = this.getZoomDelta(this.content.scale * this.dragOffset.scale, xPos, yPos);\n\n          this.dragPosition.x -= deltaX;\n          this.dragPosition.y -= deltaY;\n\n          this.dragPosition.midPoint = newMidpoint;\n        } else {\n          this.setDragResistance();\n        }\n\n        // Update final position\n        this.transform = {\n          x: this.dragPosition.x,\n          y: this.dragPosition.y,\n          scale: this.dragPosition.scale,\n        };\n\n        this.startAnimation();\n      },\n      end: (pointer, event) => {\n        if (this.state !== \"pointerdown\") {\n          return;\n        }\n\n        this._dragOffset = { ...this.dragOffset };\n\n        if (pointerTracker.currentPointers.length) {\n          this.resetDragPosition();\n\n          return;\n        }\n\n        this.state = \"decel\";\n        this.friction = this.option(\"decelFriction\");\n\n        this.recalculateTransform();\n\n        this.$container.classList.remove(this.option(\"draggingClass\"));\n\n        if (this.trigger(\"touchEnd\", event) === false) {\n          return;\n        }\n\n        if (this.state !== \"decel\") {\n          return;\n        }\n\n        // * Check if scaled content past limits\n\n        // Below minimum\n        const minScale = this.option(\"minScale\");\n\n        if (this.transform.scale < minScale) {\n          this.zoomTo(minScale, { friction: 0.64 });\n\n          return;\n        }\n\n        // Exceed maximum\n        const maxScale = this.option(\"maxScale\");\n\n        if (this.transform.scale - maxScale > 0.01) {\n          const last = this.dragPosition.midPoint || pointer;\n          const rect = this.$content.getClientRects()[0];\n\n          this.zoomTo(maxScale, {\n            friction: 0.64,\n            x: last.clientX - rect.left,\n            y: last.clientY - rect.top,\n          });\n\n          return;\n        }\n      },\n    });\n\n    this.pointerTracker = pointerTracker;\n  }\n\n  initObserver() {\n    if (this.resizeObserver) {\n      return;\n    }\n\n    this.resizeObserver = new ResizeObserver(() => {\n      if (this.updateTimer) {\n        return;\n      }\n\n      this.updateTimer = setTimeout(() => {\n        const rect = this.$container.getBoundingClientRect();\n\n        if (!(rect.width && rect.height)) {\n          this.updateTimer = null;\n          return;\n        }\n\n        // Check to see if there are any changes\n        if (Math.abs(rect.width - this.container.width) > 1 || Math.abs(rect.height - this.container.height) > 1) {\n          if (this.isAnimating()) {\n            this.endAnimation(true);\n          }\n\n          this.updateMetrics();\n\n          this.panTo({\n            x: this.content.x,\n            y: this.content.y,\n            scale: this.option(\"baseScale\"),\n            friction: 0,\n          });\n        }\n\n        this.updateTimer = null;\n      }, this.updateRate);\n    });\n\n    this.resizeObserver.observe(this.$container);\n  }\n\n  /**\n   * Restore drag related variables to default values\n   */\n  resetDragPosition() {\n    this.lockAxis = null;\n    this.friction = this.option(\"friction\");\n\n    this.velocity = {\n      x: 0,\n      y: 0,\n      scale: 0,\n    };\n\n    const { x, y, scale } = this.content;\n\n    this.dragStart = {\n      rect: this.$content.getBoundingClientRect(),\n      x,\n      y,\n      scale,\n    };\n\n    this.dragPosition = {\n      ...this.dragPosition,\n      x,\n      y,\n      scale,\n    };\n\n    this.dragOffset = {\n      x: 0,\n      y: 0,\n      scale: 1,\n      time: 0,\n    };\n  }\n\n  /**\n   * Trigger update events before/after resizing content and viewport\n   * @param {Boolean} silently Should trigger `afterUpdate` event at the end\n   */\n  updateMetrics(silently) {\n    if (silently !== true) {\n      this.trigger(\"beforeUpdate\");\n    }\n\n    const $container = this.$container;\n    const $content = this.$content;\n    const $viewport = this.$viewport;\n\n    const contentIsImage = $content instanceof HTMLImageElement;\n    const contentIsZoomable = this.option(\"zoom\");\n    const shouldResizeParent = this.option(\"resizeParent\", contentIsZoomable);\n\n    let width = this.option(\"width\");\n    let height = this.option(\"height\");\n\n    let origWidth = width || getFullWidth($content);\n    let origHeight = height || getFullHeight($content);\n\n    Object.assign($content.style, {\n      width: width ? `${width}px` : \"\",\n      height: height ? `${height}px` : \"\",\n      maxWidth: \"\",\n      maxHeight: \"\",\n    });\n\n    if (shouldResizeParent) {\n      Object.assign($viewport.style, { width: \"\", height: \"\" });\n    }\n\n    const ratio = this.option(\"ratio\");\n\n    origWidth = round(origWidth * ratio);\n    origHeight = round(origHeight * ratio);\n\n    width = origWidth;\n    height = origHeight;\n\n    const contentRect = $content.getBoundingClientRect();\n    const viewportRect = $viewport.getBoundingClientRect();\n\n    const containerRect = $viewport == $container ? viewportRect : $container.getBoundingClientRect();\n\n    let viewportWidth = Math.max($viewport.offsetWidth, round(viewportRect.width));\n    let viewportHeight = Math.max($viewport.offsetHeight, round(viewportRect.height));\n\n    let viewportStyles = window.getComputedStyle($viewport);\n    viewportWidth -= parseFloat(viewportStyles.paddingLeft) + parseFloat(viewportStyles.paddingRight);\n    viewportHeight -= parseFloat(viewportStyles.paddingTop) + parseFloat(viewportStyles.paddingBottom);\n\n    this.viewport.width = viewportWidth;\n    this.viewport.height = viewportHeight;\n\n    if (contentIsZoomable) {\n      if (Math.abs(origWidth - contentRect.width) > 0.1 || Math.abs(origHeight - contentRect.height) > 0.1) {\n        const rez = calculateAspectRatioFit(\n          origWidth,\n          origHeight,\n          Math.min(origWidth, contentRect.width),\n          Math.min(origHeight, contentRect.height)\n        );\n\n        width = round(rez.width);\n        height = round(rez.height);\n      }\n\n      Object.assign($content.style, {\n        width: `${width}px`,\n        height: `${height}px`,\n        transform: \"\",\n      });\n    }\n\n    if (shouldResizeParent) {\n      Object.assign($viewport.style, { width: `${width}px`, height: `${height}px` });\n\n      this.viewport = { ...this.viewport, width, height };\n    }\n\n    if (contentIsImage && contentIsZoomable && typeof this.options.maxScale !== \"function\") {\n      const maxScale = this.option(\"maxScale\");\n\n      this.options.maxScale = function () {\n        return this.content.origWidth > 0 && this.content.fitWidth > 0\n          ? this.content.origWidth / this.content.fitWidth\n          : maxScale;\n      };\n    }\n\n    this.content = {\n      ...this.content,\n      origWidth,\n      origHeight,\n      fitWidth: width,\n      fitHeight: height,\n      width,\n      height,\n      scale: 1,\n      isZoomable: contentIsZoomable,\n    };\n\n    this.container = { width: containerRect.width, height: containerRect.height };\n\n    if (silently !== true) {\n      this.trigger(\"afterUpdate\");\n    }\n  }\n\n  /**\n   * Increase zoom level\n   * @param {Number} [step] Zoom ratio; `0.5` would increase scale from 1 to 1.5\n   */\n  zoomIn(step) {\n    this.zoomTo(this.content.scale + (step || this.option(\"step\")));\n  }\n\n  /**\n   * Decrease zoom level\n   * @param {Number} [step] Zoom ratio; `0.5` would decrease scale from 1.5 to 1\n   */\n  zoomOut(step) {\n    this.zoomTo(this.content.scale - (step || this.option(\"step\")));\n  }\n\n  /**\n   * Toggles zoom level between max and base levels\n   * @param {Object} [options] Additional options\n   */\n  toggleZoom(props = {}) {\n    const maxScale = this.option(\"maxScale\");\n    const baseScale = this.option(\"baseScale\");\n\n    const scale = this.content.scale > baseScale + (maxScale - baseScale) * 0.5 ? baseScale : maxScale;\n\n    this.zoomTo(scale, props);\n  }\n\n  /**\n   * Animate to given zoom level\n   * @param {Number} scale New zoom level\n   * @param {Object} [options] Additional options\n   */\n  zoomTo(scale = this.option(\"baseScale\"), { x = null, y = null } = {}) {\n    scale = Math.max(Math.min(scale, this.option(\"maxScale\")), this.option(\"minScale\"));\n\n    // Adjust zoom position\n    const currentScale = round(this.content.scale / (this.content.width / this.content.fitWidth), 10000000);\n\n    if (x === null) {\n      x = this.content.width * currentScale * 0.5;\n    }\n\n    if (y === null) {\n      y = this.content.height * currentScale * 0.5;\n    }\n\n    const { deltaX, deltaY } = this.getZoomDelta(scale, x, y);\n\n    x = this.content.x - deltaX;\n    y = this.content.y - deltaY;\n\n    this.panTo({ x, y, scale, friction: this.option(\"zoomFriction\") });\n  }\n\n  /**\n   * Calculate difference for top/left values if content would scale at given coordinates\n   * @param {Number} scale\n   * @param {Number} x\n   * @param {Number} y\n   * @returns {Object}\n   */\n  getZoomDelta(scale, x = 0, y = 0) {\n    const currentWidth = this.content.fitWidth * this.content.scale;\n    const currentHeight = this.content.fitHeight * this.content.scale;\n\n    const percentXInCurrentBox = x > 0 && currentWidth ? x / currentWidth : 0;\n    const percentYInCurrentBox = y > 0 && currentHeight ? y / currentHeight : 0;\n\n    const nextWidth = this.content.fitWidth * scale;\n    const nextHeight = this.content.fitHeight * scale;\n\n    const deltaX = (nextWidth - currentWidth) * percentXInCurrentBox;\n    const deltaY = (nextHeight - currentHeight) * percentYInCurrentBox;\n\n    return { deltaX, deltaY };\n  }\n\n  /**\n   * Animate to given positon and/or zoom level\n   * @param {Object} [options] Additional options\n   */\n  panTo({\n    x = this.content.x,\n    y = this.content.y,\n    scale,\n    friction = this.option(\"friction\"),\n    ignoreBounds = false,\n  } = {}) {\n    scale = scale || this.content.scale || 1;\n\n    if (!ignoreBounds) {\n      const { boundX, boundY } = this.getBounds(scale);\n\n      if (boundX) {\n        x = Math.max(Math.min(x, boundX.to), boundX.from);\n      }\n\n      if (boundY) {\n        y = Math.max(Math.min(y, boundY.to), boundY.from);\n      }\n    }\n\n    this.friction = friction;\n\n    this.transform = {\n      ...this.transform,\n      x,\n      y,\n      scale,\n    };\n\n    if (friction) {\n      this.state = \"panning\";\n\n      this.velocity = {\n        x: (1 / this.friction - 1) * (x - this.content.x),\n        y: (1 / this.friction - 1) * (y - this.content.y),\n        scale: (1 / this.friction - 1) * (scale - this.content.scale),\n      };\n\n      this.startAnimation();\n    } else {\n      this.endAnimation();\n    }\n  }\n\n  /**\n   * Start animation loop\n   */\n  startAnimation() {\n    if (!this.rAF) {\n      this.trigger(\"startAnimation\");\n    } else {\n      cancelAnimationFrame(this.rAF);\n    }\n\n    this.rAF = requestAnimationFrame(() => this.animate());\n  }\n\n  /**\n   * Process animation frame\n   */\n  animate() {\n    this.setEdgeForce();\n    this.setDragForce();\n\n    this.velocity.x *= this.friction;\n    this.velocity.y *= this.friction;\n\n    this.velocity.scale *= this.friction;\n\n    this.content.x += this.velocity.x;\n    this.content.y += this.velocity.y;\n\n    this.content.scale += this.velocity.scale;\n\n    if (this.isAnimating()) {\n      this.setTransform();\n    } else if (this.state !== \"pointerdown\") {\n      this.endAnimation();\n\n      return;\n    }\n\n    this.rAF = requestAnimationFrame(() => this.animate());\n  }\n\n  /**\n   * Calculate boundaries\n   */\n  getBounds(scale) {\n    let boundX = this.boundX;\n    let boundY = this.boundY;\n\n    if (boundX !== undefined && boundY !== undefined) {\n      return { boundX, boundY };\n    }\n\n    boundX = { from: 0, to: 0 };\n    boundY = { from: 0, to: 0 };\n\n    scale = scale || this.transform.scale;\n\n    const width = this.content.fitWidth * scale;\n    const height = this.content.fitHeight * scale;\n\n    const viewportWidth = this.viewport.width;\n    const viewportHeight = this.viewport.height;\n\n    if (width < viewportWidth) {\n      const deltaX = round((viewportWidth - width) * 0.5);\n\n      boundX.from = deltaX;\n      boundX.to = deltaX;\n    } else {\n      boundX.from = round(viewportWidth - width);\n    }\n\n    if (height < viewportHeight) {\n      const deltaY = (viewportHeight - height) * 0.5;\n\n      boundY.from = deltaY;\n      boundY.to = deltaY;\n    } else {\n      boundY.from = round(viewportHeight - height);\n    }\n\n    return { boundX, boundY };\n  }\n\n  /**\n   * Change animation velocity if boundary is reached\n   */\n  setEdgeForce() {\n    if (this.state !== \"decel\") {\n      return;\n    }\n\n    const bounceForce = this.option(\"bounceForce\");\n\n    const { boundX, boundY } = this.getBounds(Math.max(this.transform.scale, this.content.scale));\n\n    let pastLeft, pastRight, pastTop, pastBottom;\n\n    if (boundX) {\n      pastLeft = this.content.x < boundX.from;\n      pastRight = this.content.x > boundX.to;\n    }\n\n    if (boundY) {\n      pastTop = this.content.y < boundY.from;\n      pastBottom = this.content.y > boundY.to;\n    }\n\n    if (pastLeft || pastRight) {\n      const bound = pastLeft ? boundX.from : boundX.to;\n      const distance = bound - this.content.x;\n\n      let force = distance * bounceForce;\n\n      const restX = this.content.x + (this.velocity.x + force) / this.friction;\n\n      if (restX >= boundX.from && restX <= boundX.to) {\n        force += this.velocity.x;\n      }\n\n      this.velocity.x = force;\n\n      this.recalculateTransform();\n    }\n\n    if (pastTop || pastBottom) {\n      const bound = pastTop ? boundY.from : boundY.to;\n      const distance = bound - this.content.y;\n\n      let force = distance * bounceForce;\n\n      const restY = this.content.y + (force + this.velocity.y) / this.friction;\n\n      if (restY >= boundY.from && restY <= boundY.to) {\n        force += this.velocity.y;\n      }\n\n      this.velocity.y = force;\n\n      this.recalculateTransform();\n    }\n  }\n\n  /**\n   * Change dragging position if boundary is reached\n   */\n  setDragResistance() {\n    if (this.state !== \"pointerdown\") {\n      return;\n    }\n\n    const { boundX, boundY } = this.getBounds(this.dragPosition.scale);\n\n    let pastLeft, pastRight, pastTop, pastBottom;\n\n    if (boundX) {\n      pastLeft = this.dragPosition.x < boundX.from;\n      pastRight = this.dragPosition.x > boundX.to;\n    }\n\n    if (boundY) {\n      pastTop = this.dragPosition.y < boundY.from;\n      pastBottom = this.dragPosition.y > boundY.to;\n    }\n\n    if ((pastLeft || pastRight) && !(pastLeft && pastRight)) {\n      const bound = pastLeft ? boundX.from : boundX.to;\n      const distance = bound - this.dragPosition.x;\n\n      this.dragPosition.x = bound - distance * 0.3;\n    }\n\n    if ((pastTop || pastBottom) && !(pastTop && pastBottom)) {\n      const bound = pastTop ? boundY.from : boundY.to;\n      const distance = bound - this.dragPosition.y;\n\n      this.dragPosition.y = bound - distance * 0.3;\n    }\n  }\n\n  /**\n   * Set velocity to move content to drag position\n   */\n  setDragForce() {\n    if (this.state === \"pointerdown\") {\n      this.velocity.x = this.dragPosition.x - this.content.x;\n      this.velocity.y = this.dragPosition.y - this.content.y;\n      this.velocity.scale = this.dragPosition.scale - this.content.scale;\n    }\n  }\n\n  /**\n   * Update end values based on current velocity and friction;\n   */\n  recalculateTransform() {\n    this.transform.x = this.content.x + this.velocity.x / (1 / this.friction - 1);\n    this.transform.y = this.content.y + this.velocity.y / (1 / this.friction - 1);\n    this.transform.scale = this.content.scale + this.velocity.scale / (1 / this.friction - 1);\n  }\n\n  /**\n   * Check if content is currently animating\n   * @returns {Boolean}\n   */\n  isAnimating() {\n    return !!(\n      this.friction &&\n      (Math.abs(this.velocity.x) > 0.05 || Math.abs(this.velocity.y) > 0.05 || Math.abs(this.velocity.scale) > 0.05)\n    );\n  }\n\n  /**\n   * Set content `style.transform` value based on current animation frame\n   */\n  setTransform(final) {\n    let x, y, scale;\n\n    if (final) {\n      x = round(this.transform.x);\n      y = round(this.transform.y);\n\n      scale = this.transform.scale;\n\n      this.content = { ...this.content, x, y, scale };\n    } else {\n      x = round(this.content.x);\n      y = round(this.content.y);\n\n      scale = this.content.scale / (this.content.width / this.content.fitWidth);\n\n      this.content = { ...this.content, x, y };\n    }\n\n    this.trigger(\"beforeTransform\");\n\n    x = round(this.content.x);\n    y = round(this.content.y);\n\n    if (final && this.option(\"zoom\")) {\n      let width;\n      let height;\n\n      width = round(this.content.fitWidth * scale);\n      height = round(this.content.fitHeight * scale);\n\n      this.content.width = width;\n      this.content.height = height;\n\n      this.transform = { ...this.transform, width, height, scale };\n\n      Object.assign(this.$content.style, {\n        width: `${width}px`,\n        height: `${height}px`,\n        maxWidth: \"none\",\n        maxHeight: \"none\",\n        transform: `translate3d(${x}px, ${y}px, 0) scale(1)`,\n      });\n    } else {\n      this.$content.style.transform = `translate3d(${x}px, ${y}px, 0) scale(${scale})`;\n    }\n\n    this.trigger(\"afterTransform\");\n  }\n\n  /**\n   * Stop animation loop\n   */\n  endAnimation(silently) {\n    cancelAnimationFrame(this.rAF);\n    this.rAF = null;\n\n    this.velocity = {\n      x: 0,\n      y: 0,\n      scale: 0,\n    };\n\n    this.setTransform(true);\n\n    this.state = \"ready\";\n\n    this.handleCursor();\n\n    if (silently !== true) {\n      this.trigger(\"endAnimation\");\n    }\n  }\n\n  /**\n   * Update the class name depending on whether the content is scaled\n   */\n  handleCursor() {\n    const draggableClass = this.option(\"draggableClass\");\n\n    if (!draggableClass || !this.option(\"touch\")) {\n      return;\n    }\n\n    if (\n      this.option(\"panOnlyZoomed\") == true &&\n      this.content.width <= this.viewport.width &&\n      this.content.height <= this.viewport.height &&\n      this.transform.scale <= this.option(\"baseScale\")\n    ) {\n      this.$container.classList.remove(draggableClass);\n    } else {\n      this.$container.classList.add(draggableClass);\n    }\n  }\n\n  /**\n   * Remove observation and detach event listeners\n   */\n  detachEvents() {\n    this.$content.removeEventListener(\"load\", this.onLoad);\n\n    this.$container.removeEventListener(\"wheel\", this.onWheel, { passive: false });\n    this.$container.removeEventListener(\"click\", this.onClick, { passive: false });\n\n    if (this.pointerTracker) {\n      this.pointerTracker.stop();\n      this.pointerTracker = null;\n    }\n\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n      this.resizeObserver = null;\n    }\n  }\n\n  /**\n   * Clean up\n   */\n  destroy() {\n    if (this.state === \"destroy\") {\n      return;\n    }\n\n    this.state = \"destroy\";\n\n    clearTimeout(this.updateTimer);\n    this.updateTimer = null;\n\n    cancelAnimationFrame(this.rAF);\n    this.rAF = null;\n\n    this.detachEvents();\n\n    this.detachPlugins();\n\n    this.resetDragPosition();\n  }\n}\n\n// Expose version\nPanzoom.version = \"__VERSION__\";\n\n// Static properties are a recent addition that dont work in all browsers yet\nPanzoom.Plugins = Plugins;\n","export const Plugins = {};\n","/**\n * Throttling enforces a maximum number of times a function can be called over time\n * @param {Function} func Callback function\n * @param {Integer} limit Milliseconds\n * @returns {Function}\n */\nexport const throttle = (func, limit) => {\n  let lastCall = 0;\n\n  return function (...args) {\n    const now = new Date().getTime();\n\n    if (now - lastCall < limit) {\n      return;\n    }\n\n    lastCall = now;\n\n    return func(...args);\n  };\n};\n","const defaults = {\n  prevTpl: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" tabindex=\"-1\"><path d=\"M15 3l-9 9 9 9\"/></svg>',\n  nextTpl: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" tabindex=\"-1\"><path d=\"M9 3l9 9-9 9\"/></svg>',\n\n  classNames: {\n    main: \"carousel__nav\",\n    button: \"carousel__button\",\n\n    next: \"is-next\",\n    prev: \"is-prev\",\n  },\n};\n\nexport class Navigation {\n  constructor(carousel) {\n    this.$container = null;\n\n    this.$prev = null;\n    this.$next = null;\n\n    this.carousel = carousel;\n\n    this.onRefresh = this.onRefresh.bind(this);\n  }\n\n  /**\n   * Shortcut to get option for this plugin\n   * @param {String} name option name\n   * @returns option value\n   */\n  option(name) {\n    return this.carousel.option(`Navigation.${name}`);\n  }\n\n  /**\n   * Creates and returns new button element with default class names and click event\n   * @param {String} type\n   */\n  createButton(type) {\n    const $btn = document.createElement(\"button\");\n\n    $btn.setAttribute(\"title\", this.carousel.localize(`{{${type.toUpperCase()}}}`));\n\n    const classNames = this.option(\"classNames.button\") + \" \" + this.option(`classNames.${type}`);\n\n    $btn.classList.add(...classNames.split(\" \"));\n    $btn.setAttribute(\"tabindex\", \"0\");\n    $btn.innerHTML = this.carousel.localize(this.option(`${type}Tpl`));\n\n    $btn.addEventListener(\"click\", (event) => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.carousel[`slide${type === \"next\" ? \"Next\" : \"Prev\"}`]();\n    });\n\n    return $btn;\n  }\n\n  /**\n   * Build necessary DOM elements\n   */\n  build() {\n    if (!this.$container) {\n      this.$container = document.createElement(\"div\");\n      this.$container.classList.add(...this.option(\"classNames.main\").split(\" \"));\n\n      this.carousel.$container.appendChild(this.$container);\n    }\n\n    if (!this.$next) {\n      this.$next = this.createButton(\"next\");\n\n      this.$container.appendChild(this.$next);\n    }\n\n    if (!this.$prev) {\n      this.$prev = this.createButton(\"prev\");\n\n      this.$container.appendChild(this.$prev);\n    }\n  }\n\n  /**\n   *  Process carousel `refresh` and `change` events to enable/disable buttons if needed\n   */\n  onRefresh() {\n    const pageCount = this.carousel.pages.length;\n\n    if (\n      pageCount <= 1 ||\n      (pageCount > 1 &&\n        this.carousel.elemDimWidth < this.carousel.wrapDimWidth &&\n        !Number.isInteger(this.carousel.option(\"slidesPerPage\")))\n    ) {\n      this.cleanup();\n\n      return;\n    }\n\n    this.build();\n\n    this.$prev.removeAttribute(\"disabled\");\n    this.$next.removeAttribute(\"disabled\");\n\n    if (this.carousel.option(\"infiniteX\", this.carousel.option(\"infinite\"))) {\n      return;\n    }\n\n    if (this.carousel.page <= 0) {\n      this.$prev.setAttribute(\"disabled\", \"\");\n    }\n\n    if (this.carousel.page >= pageCount - 1) {\n      this.$next.setAttribute(\"disabled\", \"\");\n    }\n  }\n\n  cleanup() {\n    if (this.$prev) {\n      this.$prev.remove();\n    }\n\n    this.$prev = null;\n\n    if (this.$next) {\n      this.$next.remove();\n    }\n\n    this.$next = null;\n\n    if (this.$container) {\n      this.$container.remove();\n    }\n\n    this.$container = null;\n  }\n\n  attach() {\n    this.carousel.on(\"refresh change\", this.onRefresh);\n  }\n\n  detach() {\n    this.carousel.off(\"refresh change\", this.onRefresh);\n\n    this.cleanup();\n  }\n}\n\n// Expose defaults\nNavigation.defaults = defaults;\n","const defaults = {\n  friction: 0.92,\n};\n\nexport class Sync {\n  constructor(carousel) {\n    this.carousel = carousel;\n\n    this.selectedIndex = null;\n    this.friction = 0;\n\n    this.onNavReady = this.onNavReady.bind(this);\n    this.onNavClick = this.onNavClick.bind(this);\n    this.onNavCreateSlide = this.onNavCreateSlide.bind(this);\n\n    this.onTargetChange = this.onTargetChange.bind(this);\n  }\n\n  /**\n   * Make this one as main carousel and selected carousel as navigation\n   * @param {Object} nav Carousel\n   */\n  addAsTargetFor(nav) {\n    this.target = this.carousel;\n    this.nav = nav;\n\n    this.attachEvents();\n  }\n\n  /**\n   * Make this one as navigation carousel for selected carousel\n   * @param {Object} target\n   */\n  addAsNavFor(target) {\n    this.target = target;\n    this.nav = this.carousel;\n\n    this.attachEvents();\n  }\n\n  /**\n   * Attach event listeners on both carousels\n   */\n  attachEvents() {\n    this.nav.options.initialSlide = this.target.options.initialPage;\n\n    this.nav.on(\"ready\", this.onNavReady);\n    this.nav.on(\"createSlide\", this.onNavCreateSlide);\n    this.nav.on(\"Panzoom.click\", this.onNavClick);\n\n    this.target.on(\"change\", this.onTargetChange);\n    this.target.on(\"Panzoom.afterUpdate\", this.onTargetChange);\n  }\n\n  /**\n   * Process main carousel `ready` event; bind events and set initial page\n   */\n  onNavReady() {\n    this.onTargetChange(true);\n  }\n\n  /**\n   * Process main carousel `click` event\n   * @param {Object} panzoom\n   * @param {Object} event\n   */\n  onNavClick(carousel, panzoom, event) {\n    const clickedNavSlide = event.target.closest(\".carousel__slide\");\n\n    if (!clickedNavSlide) {\n      return;\n    }\n\n    event.stopPropagation();\n\n    const selectedNavIndex = parseInt(clickedNavSlide.dataset.index, 10);\n    const selectedSyncPage = this.target.findPageForSlide(selectedNavIndex);\n\n    if (this.target.page !== selectedSyncPage) {\n      this.target.slideTo(selectedSyncPage, { friction: this.friction });\n    }\n\n    this.markSelectedSlide(selectedNavIndex);\n  }\n\n  /**\n   * Process main carousel `createSlide` event\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onNavCreateSlide(carousel, slide) {\n    if (slide.index === this.selectedIndex) {\n      this.markSelectedSlide(slide.index);\n    }\n  }\n\n  /**\n   * Process target carousel `change` event\n   * @param {Object} target\n   */\n  onTargetChange() {\n    const targetIndex = this.target.pages[this.target.page].indexes[0];\n    const selectedNavPage = this.nav.findPageForSlide(targetIndex);\n\n    this.nav.slideTo(selectedNavPage);\n\n    this.markSelectedSlide(targetIndex);\n  }\n\n  /**\n   * Toggle classname for slides that marks currently selected slides\n   * @param {Number} selectedIndex\n   */\n  markSelectedSlide(selectedIndex) {\n    this.selectedIndex = selectedIndex;\n\n    [...this.nav.slides].filter((slide) => slide.$el && slide.$el.classList.remove(\"is-nav-selected\"));\n\n    const slide = this.nav.slides[selectedIndex];\n\n    if (slide && slide.$el) slide.$el.classList.add(\"is-nav-selected\");\n  }\n\n  attach(carousel) {\n    const sync = carousel.options.Sync;\n\n    if (!sync.target && !sync.nav) {\n      return;\n    }\n\n    if (sync.target) {\n      this.addAsNavFor(sync.target);\n    } else if (sync.nav) {\n      this.addAsTargetFor(sync.nav);\n    }\n\n    this.friction = sync.friction;\n  }\n\n  detach() {\n    if (this.nav) {\n      this.nav.off(\"ready\", this.onNavReady);\n      this.nav.off(\"Panzoom.click\", this.onNavClick);\n      this.nav.off(\"createSlide\", this.onNavCreateSlide);\n    }\n\n    if (this.target) {\n      this.target.off(\"Panzoom.afterUpdate\", this.onTargetChange);\n      this.target.off(\"change\", this.onTargetChange);\n    }\n  }\n}\n\n// Expose defaults\nSync.defaults = defaults;\n","import { Navigation } from \"./Navigation/Navigation.js\";\nimport { Dots } from \"./Dots/Dots.js\";\nimport { Sync } from \"./Sync/Sync.js\";\n\nexport const Plugins = { Navigation, Dots, Sync };\n","const defaults = {\n  // The minimum number of slides to display dots\n  minSlideCount: 2,\n};\n\nexport class Dots {\n  constructor(carousel) {\n    this.carousel = carousel;\n\n    this.$list = null;\n\n    this.events = {\n      change: this.onChange.bind(this),\n      refresh: this.onRefresh.bind(this),\n    };\n  }\n\n  /**\n   * Build wrapping DOM element containing all dots\n   */\n  buildList() {\n    if (this.carousel.pages.length < this.carousel.option(\"Dots.minSlideCount\")) {\n      return;\n    }\n\n    const $list = document.createElement(\"ol\");\n\n    $list.classList.add(\"carousel__dots\");\n\n    $list.addEventListener(\"click\", (e) => {\n      if (!(\"page\" in e.target.dataset)) {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      const page = parseInt(e.target.dataset.page, 10);\n      const carousel = this.carousel;\n\n      if (page === carousel.page) {\n        return;\n      }\n\n      if (carousel.pages.length < 3 && carousel.option(\"infinite\")) {\n        carousel[page == 0 ? \"slidePrev\" : \"slideNext\"]();\n      } else {\n        carousel.slideTo(page);\n      }\n    });\n\n    this.$list = $list;\n\n    this.carousel.$container.appendChild($list);\n    this.carousel.$container.classList.add(\"has-dots\");\n\n    return $list;\n  }\n\n  /**\n   * Remove wrapping DOM element\n   */\n  removeList() {\n    if (this.$list) {\n      this.$list.parentNode.removeChild(this.$list);\n      this.$list = null;\n    }\n\n    this.carousel.$container.classList.remove(\"has-dots\");\n  }\n\n  /**\n   * Remove existing dots and create fresh ones\n   */\n  rebuildDots() {\n    let $list = this.$list;\n\n    const listExists = !!$list;\n    const pagesCount = this.carousel.pages.length;\n\n    if (pagesCount < 2) {\n      if (listExists) {\n        this.removeList();\n      }\n\n      return;\n    }\n\n    if (!listExists) {\n      $list = this.buildList();\n    }\n\n    // Remove existing dots\n    const dotCount = this.$list.children.length;\n\n    if (dotCount > pagesCount) {\n      for (let i = pagesCount; i < dotCount; i++) {\n        this.$list.removeChild(this.$list.lastChild);\n      }\n\n      return;\n    }\n\n    // Create fresh DOM elements (dots) for each page\n    for (let index = dotCount; index < pagesCount; index++) {\n      const $dot = document.createElement(\"li\");\n\n      $dot.classList.add(\"carousel__dot\");\n      $dot.dataset.page = index;\n\n      $dot.setAttribute(\"role\", \"button\");\n      $dot.setAttribute(\"tabindex\", \"0\");\n      $dot.setAttribute(\"title\", this.carousel.localize(\"{{GOTO}}\", [[\"%d\", index + 1]]));\n\n      $dot.addEventListener(\"keydown\", (event) => {\n        const code = event.code;\n\n        let $el;\n\n        if (code === \"Enter\" || code === \"NumpadEnter\") {\n          $el = $dot;\n        } else if (code === \"ArrowRight\") {\n          $el = $dot.nextSibling;\n        } else if (code === \"ArrowLeft\") {\n          $el = $dot.previousSibling;\n        }\n\n        $el && $el.click();\n      });\n\n      this.$list.appendChild($dot);\n    }\n\n    this.setActiveDot();\n  }\n\n  /**\n   * Mark active dot by toggling class name\n   */\n  setActiveDot() {\n    if (!this.$list) {\n      return;\n    }\n\n    this.$list.childNodes.forEach(($dot) => {\n      $dot.classList.remove(\"is-selected\");\n    });\n\n    const $activeDot = this.$list.childNodes[this.carousel.page];\n\n    if ($activeDot) {\n      $activeDot.classList.add(\"is-selected\");\n    }\n  }\n\n  /**\n   * Process carousel `change` event\n   */\n  onChange() {\n    this.setActiveDot();\n  }\n\n  /**\n   * Process carousel `refresh` event\n   */\n  onRefresh() {\n    this.rebuildDots();\n  }\n\n  attach() {\n    this.carousel.on(this.events);\n  }\n\n  detach() {\n    this.removeList();\n\n    this.carousel.off(this.events);\n    this.carousel = null;\n  }\n}\n","import { Base } from \"../shared/Base/Base.js\";\r\nimport { Panzoom } from \"../Panzoom/Panzoom.js\";\r\n\r\nimport { extend } from \"../shared/utils/extend.js\";\r\nimport { round } from \"../shared/utils/round.js\";\r\nimport { throttle } from \"../shared/utils/throttle.js\";\r\n\r\nimport { Plugins } from \"./plugins/index.js\";\r\n\r\n// Default language\r\nimport en from \"./l10n/en.js\";\r\n\r\nconst defaults = {\r\n  // Virtual slides. Each object should have at least `html` property that will be used to set content,\r\n  // example: `slides: [{html: 'First slide'}, {html: 'Second slide'}]`\r\n  slides: [],\r\n\r\n  // Number of slides to preload before/after visible slides\r\n  preload: 0,\r\n\r\n  // Number of slides to group into the page,\r\n  // if `auto` - group all slides that fit into the viewport\r\n  slidesPerPage: \"auto\",\r\n\r\n  // Index of initial page\r\n  initialPage: null,\r\n\r\n  // Index of initial slide\r\n  initialSlide: null,\r\n\r\n  // Panzoom friction while changing page\r\n  friction: 0.92,\r\n\r\n  // Should center active page\r\n  center: true,\r\n\r\n  // Should carousel scroll infinitely\r\n  infinite: true,\r\n\r\n  // Should the gap be filled before first and after last slide if `infinite: false`\r\n  fill: true,\r\n\r\n  // Should Carousel settle at any position after a swipe.\r\n  dragFree: false,\r\n\r\n  // Prefix for CSS classes, must be the same as the  SCSS `$carousel-prefix` variable\r\n  prefix: \"\",\r\n\r\n  // Class names for DOM elements (without prefix)\r\n  classNames: {\r\n    viewport: \"carousel__viewport\",\r\n    track: \"carousel__track\",\r\n    slide: \"carousel__slide\",\r\n\r\n    // Classname toggled for slides inside current page\r\n    slideSelected: \"is-selected\",\r\n  },\r\n\r\n  // Localization of strings\r\n  l10n: en,\r\n};\r\n\r\nexport class Carousel extends Base {\r\n  /**\r\n   * Carousel constructor\r\n   * @constructs Carousel\r\n   * @param {HTMLElement} $container - Carousel container\r\n   * @param {Object} [options] - Options for Carousel\r\n   */\r\n  constructor($container, options = {}) {\r\n    options = extend(true, {}, defaults, options);\r\n\r\n    super(options);\r\n\r\n    this.state = \"init\";\r\n\r\n    this.$container = $container;\r\n\r\n    if (!(this.$container instanceof HTMLElement)) {\r\n      throw new Error(\"No root element provided\");\r\n    }\r\n\r\n    this.slideNext = throttle(this.slideNext.bind(this), 250, true);\r\n    this.slidePrev = throttle(this.slidePrev.bind(this), 250, true);\r\n\r\n    this.init();\r\n\r\n    $container.__Carousel = this;\r\n  }\r\n\r\n  /**\r\n   * Perform initialization\r\n   */\r\n  init() {\r\n    this.pages = [];\r\n    this.page = this.pageIndex = null;\r\n    this.prevPage = this.prevPageIndex = null;\r\n\r\n    this.attachPlugins(Carousel.Plugins);\r\n\r\n    this.trigger(\"init\");\r\n\r\n    this.initLayout();\r\n\r\n    this.initSlides();\r\n\r\n    this.updateMetrics();\r\n\r\n    if (this.$track && this.pages.length) {\r\n      this.$track.style.transform = `translate3d(${this.pages[this.page].left * -1}px, 0px, 0) scale(1)`;\r\n    }\r\n\r\n    this.manageSlideVisiblity();\r\n\r\n    this.initPanzoom();\r\n\r\n    this.state = \"ready\";\r\n\r\n    this.trigger(\"ready\");\r\n  }\r\n\r\n  /**\r\n   * Initialize layout; create necessary elements\r\n   */\r\n  initLayout() {\r\n    const prefix = this.option(\"prefix\");\r\n    const classNames = this.option(\"classNames\");\r\n\r\n    this.$viewport = this.option(\"viewport\") || this.$container.querySelector(`.${prefix}${classNames.viewport}`);\r\n\r\n    if (!this.$viewport) {\r\n      this.$viewport = document.createElement(\"div\");\r\n      this.$viewport.classList.add(...(prefix + classNames.viewport).split(\" \"));\r\n\r\n      this.$viewport.append(...this.$container.childNodes);\r\n\r\n      this.$container.appendChild(this.$viewport);\r\n    }\r\n\r\n    this.$track = this.option(\"track\") || this.$container.querySelector(`.${prefix}${classNames.track}`);\r\n\r\n    if (!this.$track) {\r\n      this.$track = document.createElement(\"div\");\r\n      this.$track.classList.add(...(prefix + classNames.track).split(\" \"));\r\n\r\n      this.$track.append(...this.$viewport.childNodes);\r\n\r\n      this.$viewport.appendChild(this.$track);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fill `slides` array with objects from existing nodes and/or `slides` option\r\n   */\r\n  initSlides() {\r\n    this.slides = [];\r\n\r\n    // Get existing slides from the DOM\r\n    const elems = this.$viewport.querySelectorAll(`.${this.option(\"prefix\")}${this.option(\"classNames.slide\")}`);\r\n\r\n    elems.forEach((el) => {\r\n      const slide = {\r\n        $el: el,\r\n        isDom: true,\r\n      };\r\n\r\n      this.slides.push(slide);\r\n\r\n      this.trigger(\"createSlide\", slide, this.slides.length);\r\n    });\r\n\r\n    // Add virtual slides, but do not create DOM elements yet,\r\n    // because they will be created dynamically based on current carousel position\r\n    if (Array.isArray(this.options.slides)) {\r\n      this.slides = extend(true, [...this.slides], this.options.slides);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do all calculations related to slide size and paging\r\n   */\r\n  updateMetrics() {\r\n    // Calculate content width, viewport width\r\n    // ===\r\n    let contentWidth = 0;\r\n    let indexes = [];\r\n    let lastSlideWidth;\r\n\r\n    this.slides.forEach((slide, index) => {\r\n      const $el = slide.$el;\r\n      const slideWidth = slide.isDom || !lastSlideWidth ? this.getSlideMetrics($el) : lastSlideWidth;\r\n\r\n      slide.index = index;\r\n      slide.width = slideWidth;\r\n      slide.left = contentWidth;\r\n\r\n      lastSlideWidth = slideWidth;\r\n      contentWidth += slideWidth;\r\n\r\n      indexes.push(index);\r\n    });\r\n\r\n    let viewportWidth = Math.max(this.$track.offsetWidth, round(this.$track.getBoundingClientRect().width));\r\n\r\n    let viewportStyles = getComputedStyle(this.$track);\r\n    viewportWidth = viewportWidth - (parseFloat(viewportStyles.paddingLeft) + parseFloat(viewportStyles.paddingRight));\r\n\r\n    this.contentWidth = contentWidth;\r\n    this.viewportWidth = viewportWidth;\r\n\r\n    // Split slides into pages\r\n    // ===\r\n    const pages = [];\r\n    const slidesPerPage = this.option(\"slidesPerPage\");\r\n\r\n    if (Number.isInteger(slidesPerPage) && contentWidth > viewportWidth) {\r\n      // Fixed number of slides in the page\r\n      for (let i = 0; i < this.slides.length; i += slidesPerPage) {\r\n        pages.push({\r\n          indexes: indexes.slice(i, i + slidesPerPage),\r\n          slides: this.slides.slice(i, i + slidesPerPage),\r\n        });\r\n      }\r\n    } else {\r\n      // Slides that fit inside viewport\r\n      let currentPage = 0;\r\n      let currentWidth = 0;\r\n\r\n      for (let i = 0; i < this.slides.length; i += 1) {\r\n        let slide = this.slides[i];\r\n\r\n        // Add next page\r\n        if (!pages.length || currentWidth + slide.width > viewportWidth) {\r\n          pages.push({\r\n            indexes: [],\r\n            slides: [],\r\n          });\r\n\r\n          currentPage = pages.length - 1;\r\n          currentWidth = 0;\r\n        }\r\n\r\n        currentWidth += slide.width;\r\n\r\n        pages[currentPage].indexes.push(i);\r\n        pages[currentPage].slides.push(slide);\r\n      }\r\n    }\r\n\r\n    const shouldCenter = this.option(\"center\");\r\n    const shouldFill = this.option(\"fill\");\r\n\r\n    // Calculate width and start position for each page\r\n    // ===\r\n    pages.forEach((page, index) => {\r\n      page.index = index;\r\n      page.width = page.slides.reduce((sum, slide) => sum + slide.width, 0);\r\n\r\n      page.left = page.slides[0].left;\r\n\r\n      if (shouldCenter) {\r\n        page.left += (viewportWidth - page.width) * 0.5 * -1;\r\n      }\r\n\r\n      if (shouldFill && !this.option(\"infiniteX\", this.option(\"infinite\")) && contentWidth > viewportWidth) {\r\n        page.left = Math.max(page.left, 0);\r\n        page.left = Math.min(page.left, contentWidth - viewportWidth);\r\n      }\r\n    });\r\n\r\n    // Merge pages\r\n    // ===\r\n    const rez = [];\r\n    let prevPage;\r\n\r\n    pages.forEach((page2) => {\r\n      const page = { ...page2 };\r\n\r\n      if (prevPage && page.left === prevPage.left) {\r\n        prevPage.width += page.width;\r\n\r\n        prevPage.slides = [...prevPage.slides, ...page.slides];\r\n        prevPage.indexes = [...prevPage.indexes, ...page.indexes];\r\n      } else {\r\n        page.index = rez.length;\r\n\r\n        prevPage = page;\r\n\r\n        rez.push(page);\r\n      }\r\n    });\r\n\r\n    this.pages = rez;\r\n\r\n    let page = this.page;\r\n\r\n    if (page === null) {\r\n      const initialSlide = this.option(\"initialSlide\");\r\n\r\n      if (initialSlide !== null) {\r\n        page = this.findPageForSlide(initialSlide);\r\n      } else {\r\n        page = parseInt(this.option(\"initialPage\", 0), 10) || 0;\r\n      }\r\n\r\n      if (!rez[page]) {\r\n        page = rez.length && page > rez.length ? rez[rez.length - 1].index : 0;\r\n      }\r\n\r\n      this.page = page;\r\n      this.pageIndex = page;\r\n    }\r\n\r\n    this.updatePanzoom();\r\n\r\n    this.trigger(\"refresh\");\r\n  }\r\n\r\n  /**\r\n   * Calculate slide element width (including left, right margins)\r\n   * @param {Object} node\r\n   * @returns {Number} Width in px\r\n   */\r\n  getSlideMetrics(node) {\r\n    if (!node) {\r\n      const firstSlide = this.slides[0];\r\n\r\n      node = document.createElement(\"div\");\r\n\r\n      node.dataset.isTestEl = 1;\r\n      node.style.visibility = \"hidden\";\r\n      node.classList.add(...(this.option(\"prefix\") + this.option(\"classNames.slide\")).split(\" \"));\r\n\r\n      // Assume all slides have the same custom class, if any\r\n      if (firstSlide.customClass) {\r\n        node.classList.add(...firstSlide.customClass.split(\" \"));\r\n      }\r\n\r\n      this.$track.prepend(node);\r\n    }\r\n\r\n    let width = Math.max(node.offsetWidth, round(node.getBoundingClientRect().width));\r\n\r\n    // Add left/right margin\r\n    const style = node.currentStyle || window.getComputedStyle(node);\r\n    width = width + (parseFloat(style.marginLeft) || 0) + (parseFloat(style.marginRight) || 0);\r\n\r\n    if (node.dataset.isTestEl) {\r\n      node.remove();\r\n    }\r\n\r\n    return width;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Integer} index Index of the slide\r\n   * @returns {Integer|null} Index of the page if found, or null\r\n   */\r\n  findPageForSlide(index) {\r\n    index = parseInt(index, 10) || 0;\r\n\r\n    const page = this.pages.find((page) => {\r\n      return page.indexes.indexOf(index) > -1;\r\n    });\r\n\r\n    return page ? page.index : null;\r\n  }\r\n\r\n  /**\r\n   * Slide to next page, if possible\r\n   */\r\n  slideNext() {\r\n    this.slideTo(this.pageIndex + 1);\r\n  }\r\n\r\n  /**\r\n   * Slide to previous page, if possible\r\n   */\r\n  slidePrev() {\r\n    this.slideTo(this.pageIndex - 1);\r\n  }\r\n\r\n  /**\r\n   * Slides carousel to given page\r\n   * @param {Number} page - New index of active page\r\n   * @param {Object} [params] - Additional options\r\n   */\r\n  slideTo(page, params = {}) {\r\n    const { x = this.setPage(page, true) * -1, y = 0, friction = this.option(\"friction\") } = params;\r\n\r\n    if (this.Panzoom.content.x === x && !this.Panzoom.velocity.x && friction) {\r\n      return;\r\n    }\r\n\r\n    this.Panzoom.panTo({\r\n      x,\r\n      y,\r\n      friction,\r\n      ignoreBounds: true,\r\n    });\r\n\r\n    if (this.state === \"ready\" && this.Panzoom.state === \"ready\") {\r\n      this.trigger(\"settle\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialise main Panzoom instance\r\n   */\r\n  initPanzoom() {\r\n    if (this.Panzoom) {\r\n      this.Panzoom.destroy();\r\n    }\r\n\r\n    // Create fresh object containing options for Pazoom instance\r\n    const options = extend(\r\n      true,\r\n      {},\r\n      {\r\n        // Track element will be set as Panzoom $content\r\n        content: this.$track,\r\n        wrapInner: false,\r\n        resizeParent: false,\r\n\r\n        // Disable any user interaction\r\n        zoom: false,\r\n        click: false,\r\n\r\n        // Right now, only horizontal navigation is supported\r\n        lockAxis: \"x\",\r\n\r\n        x: this.pages.length ? this.pages[this.page].left * -1 : 0,\r\n        centerOnStart: false,\r\n\r\n        // Make `textSelection` option more easy to customize\r\n        textSelection: () => this.option(\"textSelection\", false),\r\n\r\n        // Disable dragging if content (e.g. all slides) fits inside viewport\r\n        panOnlyZoomed: function () {\r\n          return this.content.width <= this.viewport.width;\r\n        },\r\n      },\r\n      this.option(\"Panzoom\")\r\n    );\r\n\r\n    // Create new Panzoom instance\r\n    this.Panzoom = new Panzoom(this.$container, options);\r\n\r\n    this.Panzoom.on({\r\n      // Bubble events\r\n      \"*\": (name, ...details) => this.trigger(`Panzoom.${name}`, ...details),\r\n      // The rest of events to be processed\r\n      afterUpdate: () => {\r\n        this.updatePage();\r\n      },\r\n      beforeTransform: this.onBeforeTransform.bind(this),\r\n      touchEnd: this.onTouchEnd.bind(this),\r\n      endAnimation: () => {\r\n        this.trigger(\"settle\");\r\n      },\r\n    });\r\n\r\n    // The contents of the slides may cause the page scroll bar to appear, so the carousel width may change\r\n    // and slides have to be repositioned\r\n    this.updateMetrics();\r\n    this.manageSlideVisiblity();\r\n  }\r\n\r\n  updatePanzoom() {\r\n    if (!this.Panzoom) {\r\n      return;\r\n    }\r\n\r\n    this.Panzoom.content = {\r\n      ...this.Panzoom.content,\r\n      fitWidth: this.contentWidth,\r\n      origWidth: this.contentWidth,\r\n      width: this.contentWidth,\r\n    };\r\n\r\n    if (this.pages.length > 1 && this.option(\"infiniteX\", this.option(\"infinite\"))) {\r\n      this.Panzoom.boundX = null;\r\n    } else if (this.pages.length) {\r\n      this.Panzoom.boundX = {\r\n        from: this.pages[this.pages.length - 1].left * -1,\r\n        to: this.pages[0].left * -1,\r\n      };\r\n    }\r\n\r\n    if (this.option(\"infiniteY\", this.option(\"infinite\"))) {\r\n      this.Panzoom.boundY = null;\r\n    } else {\r\n      this.Panzoom.boundY = {\r\n        from: 0,\r\n        to: 0,\r\n      };\r\n    }\r\n\r\n    this.Panzoom.handleCursor();\r\n  }\r\n\r\n  manageSlideVisiblity() {\r\n    const contentWidth = this.contentWidth;\r\n    const viewportWidth = this.viewportWidth;\r\n\r\n    let currentX = this.Panzoom ? this.Panzoom.content.x * -1 : this.pages.length ? this.pages[this.page].left : 0;\r\n\r\n    const preload = this.option(\"preload\");\r\n    const infinite = this.option(\"infiniteX\", this.option(\"infinite\"));\r\n\r\n    const paddingLeft = parseFloat(getComputedStyle(this.$viewport, null).getPropertyValue(\"padding-left\"));\r\n    const paddingRight = parseFloat(getComputedStyle(this.$viewport, null).getPropertyValue(\"padding-right\"));\r\n\r\n    // Check visibility of each slide\r\n    this.slides.forEach((slide) => {\r\n      let leftBoundary, rightBoundary;\r\n\r\n      let hasDiff = 0;\r\n\r\n      // #1 - slides in current viewport; this does not include infinite items\r\n      leftBoundary = currentX - paddingLeft;\r\n      rightBoundary = currentX + viewportWidth + paddingRight;\r\n\r\n      leftBoundary -= preload * (viewportWidth + paddingLeft + paddingRight);\r\n      rightBoundary += preload * (viewportWidth + paddingLeft + paddingRight);\r\n\r\n      const insideCurrentInterval = slide.left + slide.width > leftBoundary && slide.left < rightBoundary;\r\n\r\n      // #2 - infinite items inside current viewport; from previous interval\r\n      leftBoundary = currentX + contentWidth - paddingLeft;\r\n      rightBoundary = currentX + contentWidth + viewportWidth + paddingRight;\r\n\r\n      // Include slides that have to be preloaded\r\n      leftBoundary -= preload * (viewportWidth + paddingLeft + paddingRight);\r\n\r\n      const insidePrevInterval = infinite && slide.left + slide.width > leftBoundary && slide.left < rightBoundary;\r\n\r\n      // #2 - infinite items inside current viewport; from next interval\r\n      leftBoundary = currentX - contentWidth - paddingLeft;\r\n      rightBoundary = currentX - contentWidth + viewportWidth + paddingRight;\r\n\r\n      // Include slides that have to be preloaded\r\n      leftBoundary -= preload * (viewportWidth + paddingLeft + paddingRight);\r\n\r\n      const insideNextInterval = infinite && slide.left + slide.width > leftBoundary && slide.left < rightBoundary;\r\n\r\n      // Create virtual slides that should be visible or preloaded, remove others\r\n      if (insidePrevInterval || insideCurrentInterval || insideNextInterval) {\r\n        this.createSlideEl(slide);\r\n\r\n        if (insideCurrentInterval) {\r\n          hasDiff = 0;\r\n        }\r\n\r\n        if (insidePrevInterval) {\r\n          hasDiff = -1;\r\n        }\r\n\r\n        if (insideNextInterval) {\r\n          hasDiff = 1;\r\n        }\r\n\r\n        // Bring preloaded slides back to viewport, if needed\r\n        if (slide.left + slide.width > currentX && slide.left <= currentX + viewportWidth + paddingRight) {\r\n          hasDiff = 0;\r\n        }\r\n      } else {\r\n        this.removeSlideEl(slide);\r\n      }\r\n\r\n      slide.hasDiff = hasDiff;\r\n    });\r\n\r\n    // Reposition slides for continuity\r\n    let nextIndex = 0;\r\n    let nextPos = 0;\r\n\r\n    this.slides.forEach((slide, index) => {\r\n      let updatedX = 0;\r\n\r\n      if (slide.$el) {\r\n        if (index !== nextIndex || slide.hasDiff) {\r\n          updatedX = nextPos + slide.hasDiff * contentWidth;\r\n        } else {\r\n          nextPos = 0;\r\n        }\r\n\r\n        slide.$el.style.left = Math.abs(updatedX) > 0.1 ? `${nextPos + slide.hasDiff * contentWidth}px` : \"\";\r\n\r\n        nextIndex++;\r\n      } else {\r\n        nextPos += slide.width;\r\n      }\r\n    });\r\n\r\n    this.markSelectedSlides();\r\n  }\r\n\r\n  /**\r\n   * Creates main DOM element for virtual slides,\r\n   * lazy loads images inside regular slides\r\n   * @param {Object} slide\r\n   */\r\n  createSlideEl(slide) {\r\n    if (!slide) {\r\n      return;\r\n    }\r\n\r\n    if (slide.$el) {\r\n      let curentIndex = slide.$el.dataset.index;\r\n\r\n      if (!curentIndex || parseInt(curentIndex, 10) !== slide.index) {\r\n        slide.$el.dataset.index = slide.index;\r\n\r\n        // Lazy load images\r\n        // ===\r\n        slide.$el.querySelectorAll(\"[data-lazy-srcset]\").forEach((node) => {\r\n          node.srcset = node.dataset.lazySrcset;\r\n        });\r\n\r\n        slide.$el.querySelectorAll(\"[data-lazy-src]\").forEach((node) => {\r\n          let lazySrc = node.dataset.lazySrc;\r\n\r\n          if (node instanceof HTMLImageElement) {\r\n            node.src = lazySrc;\r\n          } else {\r\n            node.style.backgroundImage = `url('${lazySrc}')`;\r\n          }\r\n        });\r\n\r\n        // Lazy load slide background image\r\n        // ===\r\n        let lazySrc;\r\n\r\n        if ((lazySrc = slide.$el.dataset.lazySrc)) {\r\n          slide.$el.style.backgroundImage = `url('${lazySrc}')`;\r\n        }\r\n\r\n        slide.state = \"ready\";\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    const div = document.createElement(\"div\");\r\n\r\n    div.dataset.index = slide.index;\r\n    div.classList.add(...(this.option(\"prefix\") + this.option(\"classNames.slide\")).split(\" \"));\r\n\r\n    if (slide.customClass) {\r\n      div.classList.add(...slide.customClass.split(\" \"));\r\n    }\r\n\r\n    if (slide.html) {\r\n      div.innerHTML = slide.html;\r\n    }\r\n\r\n    const allElelements = [];\r\n\r\n    this.slides.forEach((slide, index) => {\r\n      if (slide.$el) {\r\n        allElelements.push(index);\r\n      }\r\n    });\r\n\r\n    // Find a place in DOM to insert an element\r\n    const goal = slide.index;\r\n    let refSlide = null;\r\n\r\n    if (allElelements.length) {\r\n      let refIndex = allElelements.reduce((prev, curr) =>\r\n        Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev\r\n      );\r\n      refSlide = this.slides[refIndex];\r\n    }\r\n\r\n    this.$track.insertBefore(\r\n      div,\r\n      refSlide && refSlide.$el ? (refSlide.index < slide.index ? refSlide.$el.nextSibling : refSlide.$el) : null\r\n    );\r\n\r\n    slide.$el = div;\r\n\r\n    this.trigger(\"createSlide\", slide, goal);\r\n\r\n    return slide;\r\n  }\r\n\r\n  /**\r\n   * Removes main DOM element of given slide\r\n   * @param {Object} slide\r\n   */\r\n  removeSlideEl(slide) {\r\n    if (slide.$el && !slide.isDom) {\r\n      this.trigger(\"removeSlide\", slide);\r\n\r\n      slide.$el.remove();\r\n      slide.$el = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggles selected class name and aria-hidden attribute for slides based on visibility\r\n   */\r\n  markSelectedSlides() {\r\n    const selectedClass = this.option(\"classNames.slideSelected\");\r\n    const attr = \"aria-hidden\";\r\n\r\n    this.slides.forEach((slide, index) => {\r\n      const $el = slide.$el;\r\n\r\n      if (!$el) {\r\n        return;\r\n      }\r\n\r\n      const page = this.pages[this.page];\r\n\r\n      if (page && page.indexes && page.indexes.indexOf(index) > -1) {\r\n        if (selectedClass && !$el.classList.contains(selectedClass)) {\r\n          $el.classList.add(selectedClass);\r\n          this.trigger(\"selectSlide\", slide);\r\n        }\r\n\r\n        $el.removeAttribute(attr);\r\n      } else {\r\n        if (selectedClass && $el.classList.contains(selectedClass)) {\r\n          $el.classList.remove(selectedClass);\r\n          this.trigger(\"unselectSlide\", slide);\r\n        }\r\n\r\n        $el.setAttribute(attr, true);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Perform all calculations and center current page\r\n   */\r\n  updatePage() {\r\n    this.updateMetrics();\r\n\r\n    this.slideTo(this.page, { friction: 0 });\r\n  }\r\n\r\n  /**\r\n   * Process `Panzoom.beforeTransform` event to remove slides moved out of viewport and\r\n   * to create necessary ones\r\n   */\r\n  onBeforeTransform() {\r\n    if (this.option(\"infiniteX\", this.option(\"infinite\"))) {\r\n      this.manageInfiniteTrack();\r\n    }\r\n\r\n    this.manageSlideVisiblity();\r\n  }\r\n\r\n  /**\r\n   * Seamlessly flip position of infinite carousel, if needed; this way x position stays low\r\n   */\r\n  manageInfiniteTrack() {\r\n    const contentWidth = this.contentWidth;\r\n    const viewportWidth = this.viewportWidth;\r\n\r\n    if (!this.option(\"infiniteX\", this.option(\"infinite\")) || this.pages.length < 2 || contentWidth < viewportWidth) {\r\n      return;\r\n    }\r\n\r\n    const panzoom = this.Panzoom;\r\n\r\n    let isFlipped = false;\r\n\r\n    if (panzoom.content.x < (contentWidth - viewportWidth) * -1) {\r\n      panzoom.content.x += contentWidth;\r\n\r\n      this.pageIndex = this.pageIndex - this.pages.length;\r\n\r\n      isFlipped = true;\r\n    }\r\n\r\n    if (panzoom.content.x > viewportWidth) {\r\n      panzoom.content.x -= contentWidth;\r\n\r\n      this.pageIndex = this.pageIndex + this.pages.length;\r\n\r\n      isFlipped = true;\r\n    }\r\n\r\n    if (isFlipped && panzoom.state === \"pointerdown\") {\r\n      panzoom.resetDragPosition();\r\n    }\r\n\r\n    return isFlipped;\r\n  }\r\n\r\n  /**\r\n   * Process `Panzoom.touchEnd` event; slide to next/prev page if needed\r\n   * @param {object} panzoom\r\n   */\r\n  onTouchEnd(panzoom, event) {\r\n    const dragFree = this.option(\"dragFree\");\r\n\r\n    // If this is a quick horizontal flick, slide to next/prev slide\r\n    if (\r\n      !dragFree &&\r\n      this.pages.length > 1 &&\r\n      panzoom.dragOffset.time < 350 &&\r\n      Math.abs(panzoom.dragOffset.y) < 1 &&\r\n      Math.abs(panzoom.dragOffset.x) > 5\r\n    ) {\r\n      this[panzoom.dragOffset.x < 0 ? \"slideNext\" : \"slidePrev\"]();\r\n      return;\r\n    }\r\n\r\n    // Set the slide at the end of the animation as the current one,\r\n    // or slide to closest page\r\n    if (dragFree) {\r\n      const [, nextPageIndex] = this.getPageFromPosition(panzoom.transform.x * -1);\r\n      this.setPage(nextPageIndex);\r\n    } else {\r\n      this.slideToClosest();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Slides to the closest page (useful, if carousel is changed manually)\r\n   * @param {Object} [params] - Object containing additional options\r\n   */\r\n  slideToClosest(params = {}) {\r\n    let [, nextPageIndex] = this.getPageFromPosition(this.Panzoom.content.x * -1);\r\n\r\n    this.slideTo(nextPageIndex, params);\r\n  }\r\n\r\n  /**\r\n   * Returns index of closest page to given x position\r\n   * @param {Number} xPos\r\n   */\r\n  getPageFromPosition(xPos) {\r\n    const pageCount = this.pages.length;\r\n    const center = this.option(\"center\");\r\n\r\n    if (center) {\r\n      xPos += this.viewportWidth * 0.5;\r\n    }\r\n\r\n    const interval = Math.floor(xPos / this.contentWidth);\r\n\r\n    xPos -= interval * this.contentWidth;\r\n\r\n    let slide = this.slides.find((slide) => slide.left <= xPos && slide.left + slide.width > xPos);\r\n\r\n    if (slide) {\r\n      let pageIndex = this.findPageForSlide(slide.index);\r\n\r\n      return [pageIndex, pageIndex + interval * pageCount];\r\n    }\r\n\r\n    return [0, 0];\r\n  }\r\n\r\n  /**\r\n   * Changes active page\r\n   * @param {Number} page - New index of active page\r\n   * @param {Boolean} toClosest - to closest page based on scroll distance (for infinite navigation)\r\n   */\r\n  setPage(page, toClosest) {\r\n    let nextPosition = 0;\r\n    let pageIndex = parseInt(page, 10) || 0;\r\n\r\n    const prevPage = this.page,\r\n      prevPageIndex = this.pageIndex,\r\n      pageCount = this.pages.length;\r\n\r\n    const contentWidth = this.contentWidth;\r\n    const viewportWidth = this.viewportWidth;\r\n\r\n    page = ((pageIndex % pageCount) + pageCount) % pageCount;\r\n\r\n    if (this.option(\"infiniteX\", this.option(\"infinite\")) && contentWidth > viewportWidth) {\r\n      const nextInterval = Math.floor(pageIndex / pageCount) || 0,\r\n        elemDimWidth = contentWidth;\r\n\r\n      nextPosition = this.pages[page].left + nextInterval * elemDimWidth;\r\n\r\n      if (toClosest === true && pageCount > 2) {\r\n        let currPosition = this.Panzoom.content.x * -1;\r\n\r\n        // * Find closest interval\r\n        const decreasedPosition = nextPosition - elemDimWidth,\r\n          increasedPosition = nextPosition + elemDimWidth,\r\n          diff1 = Math.abs(currPosition - nextPosition),\r\n          diff2 = Math.abs(currPosition - decreasedPosition),\r\n          diff3 = Math.abs(currPosition - increasedPosition);\r\n\r\n        if (diff3 < diff1 && diff3 <= diff2) {\r\n          nextPosition = increasedPosition;\r\n          pageIndex += pageCount;\r\n        } else if (diff2 < diff1 && diff2 < diff3) {\r\n          nextPosition = decreasedPosition;\r\n          pageIndex -= pageCount;\r\n        }\r\n      }\r\n    } else {\r\n      page = pageIndex = Math.max(0, Math.min(pageIndex, pageCount - 1));\r\n\r\n      nextPosition = this.pages.length ? this.pages[page].left : 0;\r\n    }\r\n\r\n    this.page = page;\r\n    this.pageIndex = pageIndex;\r\n\r\n    if (prevPage !== null && page !== prevPage) {\r\n      this.prevPage = prevPage;\r\n      this.prevPageIndex = prevPageIndex;\r\n\r\n      this.trigger(\"change\", page, prevPage);\r\n    }\r\n\r\n    return nextPosition;\r\n  }\r\n\r\n  /**\r\n   * Clean up\r\n   */\r\n  destroy() {\r\n    this.state = \"destroy\";\r\n\r\n    this.slides.forEach((slide) => {\r\n      this.removeSlideEl(slide);\r\n    });\r\n\r\n    this.slides = [];\r\n\r\n    this.Panzoom.destroy();\r\n\r\n    this.detachPlugins();\r\n  }\r\n}\r\n\r\n// Expose version\r\nCarousel.version = \"__VERSION__\";\r\n\r\n// Static properties are a recent addition that dont work in all browsers yet\r\nCarousel.Plugins = Plugins;\r\n","export default {\r\n  NEXT: \"Next slide\",\r\n  PREV: \"Previous slide\",\r\n  GOTO: \"Go to slide #%d\",\r\n};\r\n","import { extend } from \"../../../shared/utils/extend.js\";\nimport { Carousel } from \"../../../Carousel/Carousel.js\";\n\nconst defaults = {\n  // The minimum number of images in the gallery to display thumbnails\n  minSlideCount: 2,\n\n  // Minimum screen height to display thumbnails\n  minScreenHeight: 500,\n\n  // Automatically show thumbnails when opened\n  autoStart: true,\n\n  // Keyboard shortcut to toggle thumbnail container\n  key: \"t\",\n\n  // Customize Carousel instance\n  Carousel: {},\n\n  tpl: `<div class=\"fancybox__thumb\" style=\"background-image:url('{{src}}')\"></div>`,\n};\n\nexport class Thumbs {\n  constructor(fancybox) {\n    this.fancybox = fancybox;\n\n    this.$container = null;\n    this.state = \"init\";\n\n    for (const methodName of [\"onPrepare\", \"onClosing\", \"onKeydown\"]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n\n    this.events = {\n      prepare: this.onPrepare,\n      closing: this.onClosing,\n      keydown: this.onKeydown,\n    };\n  }\n\n  /**\n   * Process `prepare` event to build the layout\n   */\n  onPrepare() {\n    // Get slides, skip if the total number is less than the minimum\n    const slides = this.getSlides();\n\n    if (slides.length < this.fancybox.option(\"Thumbs.minSlideCount\")) {\n      this.state = \"disabled\";\n      return;\n    }\n\n    if (\n      this.fancybox.option(\"Thumbs.autoStart\") === true &&\n      this.fancybox.Carousel.Panzoom.content.height >= this.fancybox.option(\"Thumbs.minScreenHeight\")\n    ) {\n      this.build();\n    }\n  }\n\n  /**\n   * Process `closing` event to disable all events\n   */\n  onClosing() {\n    if (this.Carousel) {\n      this.Carousel.Panzoom.detachEvents();\n    }\n  }\n\n  /**\n   * Process `keydown` event to enable thumbnail list toggling using keyboard key\n   * @param {Object} fancybox\n   * @param {String} key\n   */\n  onKeydown(fancybox, key) {\n    if (key === fancybox.option(\"Thumbs.key\")) {\n      this.toggle();\n    }\n  }\n\n  /**\n   * Build layout and init thumbnail Carousel\n   */\n  build() {\n    if (this.$container) {\n      return;\n    }\n\n    // Create wrapping element and append to layout\n    const $container = document.createElement(\"div\");\n\n    $container.classList.add(\"fancybox__thumbs\");\n\n    this.fancybox.$carousel.parentNode.insertBefore($container, this.fancybox.$carousel.nextSibling);\n\n    // Initialise thumbnail carousel with all slides\n    this.Carousel = new Carousel(\n      $container,\n      extend(\n        true,\n        {\n          Dots: false,\n          Navigation: false,\n          Sync: {\n            friction: 0,\n          },\n          infinite: false,\n          center: true,\n          fill: true,\n          dragFree: true,\n          slidesPerPage: 1,\n          preload: 1,\n        },\n        this.fancybox.option(\"Thumbs.Carousel\"),\n        {\n          Sync: {\n            target: this.fancybox.Carousel,\n          },\n          slides: this.getSlides(),\n        }\n      )\n    );\n\n    // Slide carousel on wheel event\n    this.Carousel.Panzoom.on(\"wheel\", (panzoom, event) => {\n      event.preventDefault();\n\n      this.fancybox[event.deltaY < 0 ? \"prev\" : \"next\"]();\n    });\n\n    this.$container = $container;\n\n    this.state = \"visible\";\n  }\n\n  /**\n   * Process all fancybox slides to get all thumbnail images\n   */\n  getSlides() {\n    const slides = [];\n\n    for (const slide of this.fancybox.items) {\n      const thumb = slide.thumb;\n\n      if (thumb) {\n        slides.push({\n          html: this.fancybox.option(\"Thumbs.tpl\").replace(/\\{\\{src\\}\\}/gi, thumb),\n          customClass: `has-thumb has-${slide.type || \"image\"}`,\n        });\n      }\n    }\n\n    return slides;\n  }\n\n  /**\n   * Toggle visibility of thumbnail list\n   * Tip: you can use `Fancybox.getInstance().plugins.Thumbs.toggle()` from anywhere in your code\n   */\n  toggle() {\n    if (this.state === \"visible\") {\n      this.hide();\n    } else if (this.state === \"hidden\") {\n      this.show();\n    } else {\n      this.build();\n    }\n  }\n\n  /**\n   * Show thumbnail list\n   */\n  show() {\n    if (this.state === \"hidden\") {\n      this.$container.style.display = \"\";\n\n      this.Carousel.Panzoom.attachEvents();\n\n      this.state = \"visible\";\n    }\n  }\n\n  /**\n   * Hide thumbnail list\n   */\n  hide() {\n    if (this.state === \"visible\") {\n      this.Carousel.Panzoom.detachEvents();\n\n      this.$container.style.display = \"none\";\n\n      this.state = \"hidden\";\n    }\n  }\n\n  /**\n   * Reset the state\n   */\n  cleanup() {\n    if (this.Carousel) {\n      this.Carousel.destroy();\n      this.Carousel = null;\n    }\n\n    if (this.$container) {\n      this.$container.remove();\n      this.$container = null;\n    }\n\n    this.state = \"init\";\n  }\n\n  attach() {\n    this.fancybox.on(this.events);\n  }\n\n  detach() {\n    this.fancybox.off(this.events);\n\n    this.cleanup();\n  }\n}\n\n// Expose defaults\nThumbs.defaults = defaults;\n","import { extend } from \"../../../shared/utils/extend.js\";\n\nconst buildURLQuery = (src, obj) => {\n  const url = new URL(src);\n  const params = new URLSearchParams(url.search);\n\n  let rez = new URLSearchParams();\n\n  for (const [key, value] of [...params, ...Object.entries(obj)]) {\n    // Youtube\n    if (key === \"t\") {\n      rez.set(\"start\", parseInt(value));\n    } else {\n      rez.set(key, value);\n    }\n  }\n\n  // Convert to 'foo=1&bar=2&baz=3'\n  rez = rez.toString();\n\n  // Vimeo\n  // https://vimeo.zendesk.com/hc/en-us/articles/360000121668-Starting-playback-at-a-specific-timecode\n  let matches = src.match(/#t=((.*)?\\d+s)/);\n\n  if (matches) {\n    rez += `#t=${matches[1]}`;\n  }\n\n  return rez;\n};\n\nconst defaults = {\n  // General options for any video content (Youtube, Vimeo, HTML5 video)\n  video: {\n    autoplay: true,\n    ratio: 16 / 9,\n  },\n  // Youtube embed parameters\n  youtube: {\n    autohide: 1,\n    fs: 1,\n    rel: 0,\n    hd: 1,\n    wmode: \"transparent\",\n    enablejsapi: 1,\n    html5: 1,\n  },\n  // Vimeo embed parameters\n  vimeo: {\n    hd: 1,\n    show_title: 1,\n    show_byline: 1,\n    show_portrait: 0,\n    fullscreen: 1,\n  },\n  // HTML5 video parameters\n  html5video: {\n    tpl: `<video class=\"fancybox__html5video\" playsinline controls controlsList=\"nodownload\" poster=\"{{poster}}\">\n  <source src=\"{{src}}\" type=\"{{format}}\" />Sorry, your browser doesn't support embedded videos.</video>`,\n    format: \"\",\n  },\n};\n\nexport class Html {\n  constructor(fancybox) {\n    this.fancybox = fancybox;\n\n    for (const methodName of [\n      \"onInit\",\n      \"onReady\",\n\n      \"onCreateSlide\",\n      \"onRemoveSlide\",\n\n      \"onSelectSlide\",\n      \"onUnselectSlide\",\n\n      \"onRefresh\",\n\n      // For communication with iframed video (youtube/vimeo)\n      \"onMessage\",\n    ]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n\n    this.events = {\n      init: this.onInit,\n      ready: this.onReady,\n\n      \"Carousel.createSlide\": this.onCreateSlide,\n      \"Carousel.removeSlide\": this.onRemoveSlide,\n\n      \"Carousel.selectSlide\": this.onSelectSlide,\n      \"Carousel.unselectSlide\": this.onUnselectSlide,\n\n      \"Carousel.refresh\": this.onRefresh,\n    };\n  }\n\n  /**\n   * Check if each gallery item has type when fancybox starts\n   */\n  onInit() {\n    for (const slide of this.fancybox.items) {\n      this.processType(slide);\n    }\n  }\n\n  /**\n   * Set content type for the slide\n   * @param {Object} slide\n   */\n  processType(slide) {\n    // Add support for `new Fancybox({items : [{html : 'smth'}]});`\n    if (slide.html) {\n      slide.src = slide.html;\n      slide.type = \"html\";\n\n      delete slide.html;\n\n      return;\n    }\n\n    const src = slide.src || \"\";\n\n    let type = slide.type || this.fancybox.options.type,\n      rez = null;\n\n    if (src && typeof src !== \"string\") {\n      return;\n    }\n\n    if (\n      (rez = src.match(\n        /(?:youtube\\.com|youtu\\.be|youtube\\-nocookie\\.com)\\/(?:watch\\?(?:.*&)?v=|v\\/|u\\/|embed\\/?)?(videoseries\\?list=(?:.*)|[\\w-]{11}|\\?listType=(?:.*)&list=(?:.*))(?:.*)/i\n      ))\n    ) {\n      const params = buildURLQuery(src, this.fancybox.option(\"Html.youtube\"));\n      const videoId = encodeURIComponent(rez[1]);\n\n      slide.videoId = videoId;\n      slide.src = `https://www.youtube-nocookie.com/embed/${videoId}?${params}`;\n      slide.thumb = slide.thumb || `https://i.ytimg.com/vi/${videoId}/mqdefault.jpg`;\n      slide.vendor = \"youtube\";\n\n      type = \"video\";\n    } else if ((rez = src.match(/^.+vimeo.com\\/(?:\\/)?([\\d]+)(.*)?/))) {\n      const params = buildURLQuery(src, this.fancybox.option(\"Html.vimeo\"));\n      const videoId = encodeURIComponent(rez[1]);\n\n      slide.videoId = videoId;\n      slide.src = `https://player.vimeo.com/video/${videoId}?${params}`;\n      slide.vendor = \"vimeo\";\n\n      type = \"video\";\n    } else if (\n      (rez = src.match(\n        /(?:maps\\.)?google\\.([a-z]{2,3}(?:\\.[a-z]{2})?)\\/(?:(?:(?:maps\\/(?:place\\/(?:.*)\\/)?\\@(.*),(\\d+.?\\d+?)z))|(?:\\?ll=))(.*)?/i\n      ))\n    ) {\n      slide.src = `//maps.google.${rez[1]}/?ll=${(rez[2]\n        ? rez[2] + \"&z=\" + Math.floor(rez[3]) + (rez[4] ? rez[4].replace(/^\\//, \"&\") : \"\")\n        : rez[4] + \"\"\n      ).replace(/\\?/, \"&\")}&output=${rez[4] && rez[4].indexOf(\"layer=c\") > 0 ? \"svembed\" : \"embed\"}`;\n\n      type = \"map\";\n    } else if ((rez = src.match(/(?:maps\\.)?google\\.([a-z]{2,3}(?:\\.[a-z]{2})?)\\/(?:maps\\/search\\/)(.*)/i))) {\n      slide.src = `//maps.google.${rez[1]}/maps?q=${rez[2].replace(\"query=\", \"q=\").replace(\"api=1\", \"\")}&output=embed`;\n\n      type = \"map\";\n    }\n\n    // Guess content type\n    if (!type) {\n      if (src.charAt(0) === \"#\") {\n        type = \"inline\";\n      } else if ((rez = src.match(/\\.(mp4|mov|ogv|webm)((\\?|#).*)?$/i))) {\n        type = \"html5video\";\n\n        slide.format = slide.format || \"video/\" + (rez[1] === \"ogv\" ? \"ogg\" : rez[1]);\n      } else if (src.match(/(^data:image\\/[a-z0-9+\\/=]*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\\?|#).*)?$)/i)) {\n        type = \"image\";\n      } else if (src.match(/\\.(pdf)((\\?|#).*)?$/i)) {\n        type = \"pdf\";\n      }\n    }\n\n    slide.type = type || this.fancybox.option(\"defaultType\", \"image\");\n\n    if (type === \"html5video\" || type === \"video\") {\n      slide.video = extend({}, this.fancybox.option(\"Html.video\"), slide.video);\n\n      if (slide._width && slide._height) {\n        slide.ratio = parseFloat(slide._width) / parseFloat(slide._height);\n      } else {\n        slide.ratio = slide.ratio || slide.video.ratio || defaults.video.ratio;\n      }\n    }\n  }\n\n  /**\n   * Start loading content when Fancybox is ready\n   */\n  onReady() {\n    this.fancybox.Carousel.slides.forEach((slide) => {\n      if (slide.$el) {\n        this.setContent(slide);\n\n        if (slide.index === this.fancybox.getSlide().index) {\n          this.playVideo(slide);\n        }\n      }\n    });\n  }\n\n  /**\n   * Process `Carousel.createSlide` event to create image content\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onCreateSlide(fancybox, carousel, slide) {\n    if (this.fancybox.state !== \"ready\") {\n      return;\n    }\n\n    this.setContent(slide);\n  }\n\n  /**\n   * Retrieve and set slide content\n   * @param {Object} slide\n   */\n  loadInlineContent(slide) {\n    let $content;\n\n    if (slide.src instanceof HTMLElement) {\n      $content = slide.src;\n    } else if (typeof slide.src === \"string\") {\n      const tmp = slide.src.split(\"#\", 2);\n      const id = tmp.length === 2 && tmp[0] === \"\" ? tmp[1] : tmp[0];\n\n      $content = document.getElementById(id);\n    }\n\n    if ($content) {\n      if (slide.type === \"clone\" || $content.$placeHolder) {\n        $content = $content.cloneNode(true);\n        let attrId = $content.getAttribute(\"id\");\n\n        attrId = attrId ? `${attrId}--clone` : `clone-${this.fancybox.id}-${slide.index}`;\n\n        $content.setAttribute(\"id\", attrId);\n      } else {\n        const $placeHolder = document.createElement(\"div\");\n        $placeHolder.classList.add(\"fancybox-placeholder\");\n        $content.parentNode.insertBefore($placeHolder, $content);\n        $content.$placeHolder = $placeHolder;\n      }\n\n      this.fancybox.setContent(slide, $content);\n    } else {\n      this.fancybox.setError(slide, \"{{ELEMENT_NOT_FOUND}}\");\n    }\n  }\n\n  /**\n   * Makes AJAX request and sets response as slide content\n   * @param {Object} slide\n   */\n  loadAjaxContent(slide) {\n    const fancybox = this.fancybox;\n    const xhr = new XMLHttpRequest();\n\n    fancybox.showLoading(slide);\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === XMLHttpRequest.DONE) {\n        if (fancybox.state === \"ready\") {\n          fancybox.hideLoading(slide);\n\n          if (xhr.status === 200) {\n            fancybox.setContent(slide, xhr.responseText);\n          } else {\n            fancybox.setError(slide, xhr.status === 404 ? \"{{AJAX_NOT_FOUND}}\" : \"{{AJAX_FORBIDDEN}}\");\n          }\n        }\n      }\n    };\n\n    const data = slide.ajax || null;\n\n    xhr.open(data ? \"POST\" : \"GET\", slide.src);\n    xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n    xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n    xhr.send(data);\n\n    slide.xhr = xhr;\n  }\n\n  /**\n   * Creates iframe as slide content, preloads if needed before displaying\n   * @param {Object} slide\n   */\n  loadIframeContent(slide) {\n    const fancybox = this.fancybox;\n    const $iframe = document.createElement(\"iframe\");\n\n    $iframe.className = \"fancybox__iframe\";\n\n    $iframe.setAttribute(\"id\", `fancybox__iframe_${fancybox.id}_${slide.index}`);\n\n    $iframe.setAttribute(\"allow\", \"autoplay; fullscreen\");\n    $iframe.setAttribute(\"scrolling\", \"auto\");\n\n    slide.$iframe = $iframe;\n\n    if (slide.type !== \"iframe\" || slide.preload === false) {\n      $iframe.setAttribute(\"src\", slide.src);\n\n      this.fancybox.setContent(slide, $iframe);\n\n      this.resizeIframe(slide);\n\n      return;\n    }\n\n    fancybox.showLoading(slide);\n\n    const $content = document.createElement(\"div\");\n    $content.style.visibility = \"hidden\";\n\n    this.fancybox.setContent(slide, $content);\n\n    $content.appendChild($iframe);\n\n    $iframe.onerror = () => {\n      fancybox.setError(slide, \"{{IFRAME_ERROR}}\");\n    };\n\n    $iframe.onload = () => {\n      fancybox.hideLoading(slide);\n\n      let isFirstLoad = false;\n\n      if (!$iframe.isReady) {\n        $iframe.isReady = true;\n        isFirstLoad = true;\n      }\n\n      if (!$iframe.src.length) {\n        return;\n      }\n\n      $iframe.parentNode.style.visibility = \"\";\n\n      this.resizeIframe(slide);\n\n      if (isFirstLoad) {\n        fancybox.revealContent(slide);\n      }\n    };\n\n    $iframe.setAttribute(\"src\", slide.src);\n  }\n\n  /**\n   * Set CSS max/min width/height properties of the content to have the correct aspect ratio\n   * @param {Object} slide\n   */\n  setAspectRatio(slide) {\n    const $content = slide.$content;\n    const ratio = slide.ratio;\n\n    if (!$content) {\n      return;\n    }\n\n    let width = slide._width;\n    let height = slide._height;\n\n    if (ratio || (width && height)) {\n      Object.assign($content.style, {\n        width: width && height ? \"100%\" : \"\",\n        height: width && height ? \"100%\" : \"\",\n        maxWidth: \"\",\n        maxHeight: \"\",\n      });\n\n      let maxWidth = $content.offsetWidth;\n      let maxHeight = $content.offsetHeight;\n\n      width = width || maxWidth;\n      height = height || maxHeight;\n\n      // Resize to fit\n      if (width > maxWidth || height > maxHeight) {\n        let maxRatio = Math.min(maxWidth / width, maxHeight / height);\n\n        width = width * maxRatio;\n        height = height * maxRatio;\n      }\n\n      // Recheck ratio\n      if (Math.abs(width / height - ratio) > 0.01) {\n        if (ratio < width / height) {\n          width = height * ratio;\n        } else {\n          height = width / ratio;\n        }\n      }\n\n      Object.assign($content.style, {\n        width: `${width}px`,\n        height: `${height}px`,\n      });\n    }\n  }\n\n  /**\n   * Adjust the width and height of the iframe according to the content dimensions, or defined sizes\n   * @param {Object} slide\n   */\n  resizeIframe(slide) {\n    const $iframe = slide.$iframe;\n\n    if (!$iframe) {\n      return;\n    }\n\n    let width_ = slide._width || 0;\n    let height_ = slide._height || 0;\n\n    if (width_ && height_) {\n      slide.autoSize = false;\n    }\n\n    const $parent = $iframe.parentNode;\n    const parentStyle = $parent && $parent.style;\n\n    if (slide.preload !== false && slide.autoSize !== false && parentStyle) {\n      try {\n        const compStyles = window.getComputedStyle($parent),\n          paddingX = parseFloat(compStyles.paddingLeft) + parseFloat(compStyles.paddingRight),\n          paddingY = parseFloat(compStyles.paddingTop) + parseFloat(compStyles.paddingBottom);\n\n        const document = $iframe.contentWindow.document,\n          $html = document.getElementsByTagName(\"html\")[0],\n          $body = document.body;\n\n        // Allow content to expand horizontally\n        parentStyle.width = \"\";\n\n        // Get rid of vertical scrollbar\n        $body.style.overflow = \"hidden\";\n\n        width_ = width_ || $html.scrollWidth + paddingX;\n\n        parentStyle.width = `${width_}px`;\n\n        $body.style.overflow = \"\";\n\n        parentStyle.flex = \"0 0 auto\";\n        parentStyle.height = `${$body.scrollHeight}px`;\n\n        height_ = $html.scrollHeight + paddingY;\n      } catch (error) {\n        //\n      }\n    }\n\n    if (width_ || height_) {\n      const newStyle = {\n        flex: \"0 1 auto\",\n      };\n\n      if (width_) {\n        newStyle.width = `${width_}px`;\n      }\n\n      if (height_) {\n        newStyle.height = `${height_}px`;\n      }\n\n      Object.assign(parentStyle, newStyle);\n    }\n  }\n\n  /**\n   * Process `Carousel.onRefresh` event,\n   * trigger iframe autosizing and set content aspect ratio for each slide\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   */\n  onRefresh(fancybox, carousel) {\n    carousel.slides.forEach((slide) => {\n      if (!slide.$el) {\n        return;\n      }\n\n      if (slide.$iframe) {\n        this.resizeIframe(slide);\n      }\n\n      if (slide.ratio) {\n        this.setAspectRatio(slide);\n      }\n    });\n  }\n\n  /**\n   * Process `Carousel.onCreateSlide` event to set content\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  setContent(slide) {\n    if (!slide || slide.isDom) {\n      return;\n    }\n\n    switch (slide.type) {\n      case \"html\":\n        this.fancybox.setContent(slide, slide.src);\n        break;\n\n      case \"html5video\":\n        this.fancybox.setContent(\n          slide,\n          this.fancybox\n            .option(\"Html.html5video.tpl\")\n            .replace(/\\{\\{src\\}\\}/gi, slide.src)\n            .replace(\"{{format}}\", slide.format || (slide.html5video && slide.html5video.format) || \"\")\n            .replace(\"{{poster}}\", slide.poster || slide.thumb || \"\")\n        );\n\n        break;\n\n      case \"inline\":\n      case \"clone\":\n        this.loadInlineContent(slide);\n        break;\n\n      case \"ajax\":\n        this.loadAjaxContent(slide);\n        break;\n\n      case \"pdf\":\n      case \"video\":\n      case \"map\":\n        slide.preload = false;\n\n      case \"iframe\":\n        this.loadIframeContent(slide);\n\n        break;\n    }\n\n    if (slide.ratio) {\n      this.setAspectRatio(slide);\n    }\n  }\n\n  /**\n   * Process `Carousel.onSelectSlide` event to start video\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onSelectSlide(fancybox, carousel, slide) {\n    if (fancybox.state === \"ready\") {\n      this.playVideo(slide);\n    }\n  }\n\n  /**\n   * Attempts to begin playback of the media\n   * @param {Object} slide\n   */\n  playVideo(slide) {\n    if (slide.type === \"html5video\" && slide.video.autoplay) {\n      try {\n        const $video = slide.$el.querySelector(\"video\");\n\n        if ($video) {\n          const promise = $video.play();\n\n          if (promise !== undefined) {\n            promise\n              .then(() => {\n                // Autoplay started\n              })\n              .catch((error) => {\n                // Autoplay was prevented.\n                $video.muted = true;\n                $video.play();\n              });\n          }\n        }\n      } catch (err) {}\n    }\n\n    if (slide.type !== \"video\" || !(slide.$iframe && slide.$iframe.contentWindow)) {\n      return;\n    }\n\n    // This function will be repeatedly called to check\n    // if video iframe has been loaded to send message to start the video\n    const poller = () => {\n      if (slide.state === \"done\" && slide.$iframe && slide.$iframe.contentWindow) {\n        let command;\n\n        if (slide.$iframe.isReady) {\n          if (slide.video && slide.video.autoplay) {\n            if (slide.vendor == \"youtube\") {\n              command = {\n                event: \"command\",\n                func: \"playVideo\",\n              };\n            } else {\n              command = {\n                method: \"play\",\n                value: \"true\",\n              };\n            }\n          }\n\n          if (command) {\n            slide.$iframe.contentWindow.postMessage(JSON.stringify(command), \"*\");\n          }\n\n          return;\n        }\n\n        if (slide.vendor === \"youtube\") {\n          command = {\n            event: \"listening\",\n            id: slide.$iframe.getAttribute(\"id\"),\n          };\n\n          slide.$iframe.contentWindow.postMessage(JSON.stringify(command), \"*\");\n        }\n      }\n\n      slide.poller = setTimeout(poller, 250);\n    };\n\n    poller();\n  }\n\n  /**\n   * Process `Carousel.onUnselectSlide` event to pause video\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onUnselectSlide(fancybox, carousel, slide) {\n    if (slide.type === \"html5video\") {\n      try {\n        slide.$el.querySelector(\"video\").pause();\n      } catch (error) {}\n\n      return;\n    }\n\n    let command = false;\n\n    if (slide.vendor == \"vimeo\") {\n      command = {\n        method: \"pause\",\n        value: \"true\",\n      };\n    } else if (slide.vendor === \"youtube\") {\n      command = {\n        event: \"command\",\n        func: \"pauseVideo\",\n      };\n    }\n\n    if (command && slide.$iframe && slide.$iframe.contentWindow) {\n      slide.$iframe.contentWindow.postMessage(JSON.stringify(command), \"*\");\n    }\n\n    clearTimeout(slide.poller);\n  }\n\n  /**\n   * Process `Carousel.onRemoveSlide` event to do clean up\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onRemoveSlide(fancybox, carousel, slide) {\n    // Abort ajax request if exists\n    if (slide.xhr) {\n      slide.xhr.abort();\n      slide.xhr = null;\n    }\n\n    // Unload iframe content if exists\n    if (slide.$iframe) {\n      slide.$iframe.onload = slide.$iframe.onerror = null;\n\n      slide.$iframe.src = \"//about:blank\";\n      slide.$iframe = null;\n    }\n\n    // Clear inline content\n    const $content = slide.$content;\n\n    if (slide.type === \"inline\" && $content) {\n      $content.classList.remove(\"fancybox__content\");\n\n      if ($content.style.display !== \"none\") {\n        $content.style.display = \"none\";\n      }\n    }\n\n    if (slide.$closeButton) {\n      slide.$closeButton.remove();\n      slide.$closeButton = null;\n    }\n\n    const $placeHolder = $content && $content.$placeHolder;\n\n    if ($placeHolder) {\n      $placeHolder.parentNode.insertBefore($content, $placeHolder);\n      $placeHolder.remove();\n      $content.$placeHolder = null;\n    }\n  }\n\n  /**\n   * Process `window.message` event to mark video iframe element as `ready`\n   * @param {Object} e - Event\n   */\n  onMessage(e) {\n    try {\n      let data = JSON.parse(e.data);\n\n      if (e.origin === \"https://player.vimeo.com\") {\n        if (data.event === \"ready\") {\n          for (let $iframe of document.getElementsByClassName(\"fancybox__iframe\")) {\n            if ($iframe.contentWindow === e.source) {\n              $iframe.isReady = 1;\n            }\n          }\n        }\n      } else if (e.origin === \"https://www.youtube-nocookie.com\") {\n        if (data.event === \"onReady\") {\n          document.getElementById(data.id).isReady = 1;\n        }\n      }\n    } catch (ex) {}\n  }\n\n  attach() {\n    this.fancybox.on(this.events);\n\n    window.addEventListener(\"message\", this.onMessage, false);\n  }\n\n  detach() {\n    this.fancybox.off(this.events);\n\n    window.removeEventListener(\"message\", this.onMessage, false);\n  }\n}\n\n// Expose defaults\nHtml.defaults = defaults;\n","import { extend } from \"../../../shared/utils/extend.js\";\r\n\r\nimport { Panzoom } from \"../../../Panzoom/Panzoom.js\";\r\n\r\nconst defaults = {\r\n  // Class name for slide element indicating that content can be zoomed in\r\n  canZoomInClass: \"can-zoom_in\",\r\n\r\n  // Class name for slide element indicating that content can be zoomed out\r\n  canZoomOutClass: \"can-zoom_out\",\r\n\r\n  // Do zoom animation from thumbnail image when starting or closing fancybox\r\n  zoom: true,\r\n\r\n  // Animate opacity while zooming\r\n  zoomOpacity: \"auto\", // \"auto\" | true | false,\r\n\r\n  // Zoom animation friction\r\n  zoomFriction: 0.82,\r\n\r\n  // Disable zoom animation if thumbnail is visible only partly\r\n  ignoreCoveredThumbnail: false,\r\n\r\n  // Enable guestures\r\n  touch: true,\r\n\r\n  // Action to be performed when user clicks on the image\r\n  click: \"toggleZoom\", // \"toggleZoom\" | \"next\" | \"close\" | null\r\n\r\n  // Action to be performed when double-click event is detected on the image\r\n  doubleClick: null, // \"toggleZoom\" | null\r\n\r\n  // Action to be performed when user rotates a wheel button on a pointing device\r\n  wheel: \"zoom\", // \"zoom\" | \"slide\" | \"close\" | null\r\n\r\n  // How image should be resized to fit its container\r\n  fit: \"contain\", // \"contain\" | \"contain-w\" | \"cover\"\r\n\r\n  // Should create wrapping element around the image\r\n  wrap: false,\r\n\r\n  // Custom Panzoom options\r\n  Panzoom: {\r\n    ratio: 1,\r\n  },\r\n};\r\n\r\nexport class Image {\r\n  constructor(fancybox) {\r\n    this.fancybox = fancybox;\r\n\r\n    for (const methodName of [\r\n      // Fancybox\r\n      \"onReady\",\r\n      \"onClosing\",\r\n      \"onDone\",\r\n\r\n      // Fancybox.Carousel\r\n      \"onPageChange\",\r\n      \"onCreateSlide\",\r\n      \"onRemoveSlide\",\r\n\r\n      // Image load/error\r\n      \"onImageStatusChange\",\r\n    ]) {\r\n      this[methodName] = this[methodName].bind(this);\r\n    }\r\n\r\n    this.events = {\r\n      ready: this.onReady,\r\n      closing: this.onClosing,\r\n      done: this.onDone,\r\n\r\n      \"Carousel.change\": this.onPageChange,\r\n      \"Carousel.createSlide\": this.onCreateSlide,\r\n      \"Carousel.removeSlide\": this.onRemoveSlide,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Handle `ready` event to start loading content\r\n   */\r\n  onReady() {\r\n    this.fancybox.Carousel.slides.forEach((slide) => {\r\n      if (slide.$el) {\r\n        this.setContent(slide);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle `done` event to update cursor\r\n   * @param {Object} fancybox\r\n   * @param {Object} slide\r\n   */\r\n  onDone(fancybox, slide) {\r\n    this.handleCursor(slide);\r\n  }\r\n\r\n  /**\r\n   * Handle `closing` event to clean up all slides and to start zoom-out animation\r\n   * @param {Object} fancybox\r\n   */\r\n  onClosing(fancybox) {\r\n    clearTimeout(this.clickTimer);\r\n    this.clickTimer = null;\r\n\r\n    // Remove events\r\n    fancybox.Carousel.slides.forEach((slide) => {\r\n      if (slide.$image) {\r\n        slide.state = \"destroy\";\r\n      }\r\n\r\n      if (slide.Panzoom) {\r\n        slide.Panzoom.detachEvents();\r\n      }\r\n    });\r\n\r\n    // If possible, start the zoom animation, it will interrupt the default closing process\r\n    if (this.fancybox.state === \"closing\" && this.canZoom(fancybox.getSlide())) {\r\n      this.zoomOut();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Process `Carousel.createSlide` event to create image content\r\n   * @param {Object} fancybox\r\n   * @param {Object} carousel\r\n   * @param {Object} slide\r\n   */\r\n  onCreateSlide(fancybox, carousel, slide) {\r\n    if (this.fancybox.state !== \"ready\") {\r\n      return;\r\n    }\r\n\r\n    this.setContent(slide);\r\n  }\r\n\r\n  /**\r\n   * Handle `Carousel.removeSlide` event to do clean up the slide\r\n   * @param {Object} fancybox\r\n   * @param {Object} carousel\r\n   * @param {Object} slide\r\n   */\r\n  onRemoveSlide(fancybox, carousel, slide) {\r\n    if (slide.$image) {\r\n      slide.$el.classList.remove(fancybox.option(\"Image.canZoomInClass\"));\r\n\r\n      slide.$image.remove();\r\n      slide.$image = null;\r\n    }\r\n\r\n    if (slide.Panzoom) {\r\n      slide.Panzoom.destroy();\r\n      slide.Panzoom = null;\r\n    }\r\n\r\n    if (slide.$el && slide.$el.dataset) {\r\n      delete slide.$el.dataset.imageFit;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Build DOM elements and add event listeners\r\n   * @param {Object} slide\r\n   */\r\n  setContent(slide) {\r\n    // Check if this slide should contain an image\r\n    if (slide.isDom || slide.html || (slide.type && slide.type !== \"image\")) {\r\n      return;\r\n    }\r\n\r\n    if (slide.$image) {\r\n      return;\r\n    }\r\n\r\n    slide.type = \"image\";\r\n    slide.state = \"loading\";\r\n\r\n    // * Build layout\r\n    // Container\r\n    const $content = document.createElement(\"div\");\r\n    $content.style.visibility = \"hidden\";\r\n\r\n    // Image element\r\n    const $image = document.createElement(\"img\");\r\n\r\n    $image.addEventListener(\"load\", (event) => {\r\n      event.stopImmediatePropagation();\r\n\r\n      this.onImageStatusChange(slide);\r\n    });\r\n\r\n    $image.addEventListener(\"error\", () => {\r\n      this.onImageStatusChange(slide);\r\n    });\r\n\r\n    $image.src = slide.src;\r\n    $image.alt = \"\";\r\n    $image.draggable = false;\r\n\r\n    $image.classList.add(\"fancybox__image\");\r\n\r\n    if (slide.srcset) {\r\n      $image.setAttribute(\"srcset\", slide.srcset);\r\n    }\r\n\r\n    if (slide.sizes) {\r\n      $image.setAttribute(\"sizes\", slide.sizes);\r\n    }\r\n\r\n    slide.$image = $image;\r\n\r\n    const shouldWrap = this.fancybox.option(\"Image.wrap\");\r\n\r\n    if (shouldWrap) {\r\n      const $wrap = document.createElement(\"div\");\r\n      $wrap.classList.add(typeof shouldWrap === \"string\" ? shouldWrap : \"fancybox__image-wrap\");\r\n\r\n      $wrap.appendChild($image);\r\n\r\n      $content.appendChild($wrap);\r\n\r\n      slide.$wrap = $wrap;\r\n    } else {\r\n      $content.appendChild($image);\r\n    }\r\n\r\n    // Set data attribute if other that default\r\n    // for example, set `[data-image-fit=\"contain-w\"]`\r\n    slide.$el.dataset.imageFit = this.fancybox.option(\"Image.fit\");\r\n\r\n    // Append content\r\n    this.fancybox.setContent(slide, $content);\r\n\r\n    // Display loading icon\r\n    if ($image.complete || $image.error) {\r\n      this.onImageStatusChange(slide);\r\n    } else {\r\n      this.fancybox.showLoading(slide);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle image state change, display error or start revealing image\r\n   * @param {Object} slide\r\n   */\r\n  onImageStatusChange(slide) {\r\n    const $image = slide.$image;\r\n\r\n    if (!$image || slide.state !== \"loading\") {\r\n      return;\r\n    }\r\n\r\n    if (!($image.complete && $image.naturalWidth && $image.naturalHeight)) {\r\n      this.fancybox.setError(slide, \"{{IMAGE_ERROR}}\");\r\n\r\n      return;\r\n    }\r\n\r\n    this.fancybox.hideLoading(slide);\r\n\r\n    if (this.fancybox.option(\"Image.fit\") === \"contain\") {\r\n      this.initSlidePanzoom(slide);\r\n    }\r\n\r\n    // Add `wheel` and `click` event handler\r\n    slide.$el.addEventListener(\"wheel\", (event) => this.onWheel(slide, event), { passive: false });\r\n    slide.$content.addEventListener(\"click\", (event) => this.onClick(slide, event), { passive: false });\r\n\r\n    this.revealContent(slide);\r\n  }\r\n\r\n  /**\r\n   * Make image zoomable and draggable using Panzoom\r\n   * @param {Object} slide\r\n   */\r\n  initSlidePanzoom(slide) {\r\n    if (slide.Panzoom) {\r\n      return;\r\n    }\r\n\r\n    //* Initialize Panzoom\r\n    slide.Panzoom = new Panzoom(\r\n      slide.$el,\r\n      extend(true, this.fancybox.option(\"Image.Panzoom\", {}), {\r\n        viewport: slide.$wrap,\r\n        content: slide.$image,\r\n\r\n        width: slide._width,\r\n        height: slide._height,\r\n\r\n        wrapInner: false,\r\n\r\n        // Allow to select caption text\r\n        textSelection: true,\r\n\r\n        // Toggle gestures\r\n        touch: this.fancybox.option(\"Image.touch\"),\r\n\r\n        // This will prevent click conflict with fancybox main carousel\r\n        panOnlyZoomed: true,\r\n\r\n        // Disable default click / wheel events as custom event listeners will replace them,\r\n        // because click and wheel events should work without Panzoom\r\n        click: false,\r\n        wheel: false,\r\n      })\r\n    );\r\n\r\n    slide.Panzoom.on(\"startAnimation\", () => {\r\n      this.fancybox.trigger(\"Image.startAnimation\", slide);\r\n    });\r\n\r\n    slide.Panzoom.on(\"endAnimation\", () => {\r\n      if (slide.state === \"zoomIn\") {\r\n        this.fancybox.done(slide);\r\n      }\r\n\r\n      this.handleCursor(slide);\r\n\r\n      this.fancybox.trigger(\"Image.endAnimation\", slide);\r\n    });\r\n\r\n    slide.Panzoom.on(\"afterUpdate\", () => {\r\n      this.handleCursor(slide);\r\n\r\n      this.fancybox.trigger(\"Image.afterUpdate\", slide);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Start zoom-in animation if possible, or simply reveal content\r\n   * @param {Object} slide\r\n   */\r\n  revealContent(slide) {\r\n    // Animate only on first run\r\n    if (\r\n      this.fancybox.Carousel.prevPage === null &&\r\n      slide.index === this.fancybox.options.startIndex &&\r\n      this.canZoom(slide)\r\n    ) {\r\n      this.zoomIn();\r\n    } else {\r\n      this.fancybox.revealContent(slide);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get zoom info for selected slide\r\n   * @param {Object} slide\r\n   */\r\n  getZoomInfo(slide) {\r\n    const $thumb = slide.$thumb,\r\n      thumbRect = $thumb.getBoundingClientRect(),\r\n      thumbWidth = thumbRect.width,\r\n      thumbHeight = thumbRect.height,\r\n      //\r\n      contentRect = slide.$content.getBoundingClientRect(),\r\n      contentWidth = contentRect.width,\r\n      contentHeight = contentRect.height,\r\n      //\r\n      shiftedTop = contentRect.top - thumbRect.top,\r\n      shiftedLeft = contentRect.left - thumbRect.left;\r\n\r\n    // Check if need to update opacity\r\n    let opacity = this.fancybox.option(\"Image.zoomOpacity\");\r\n\r\n    if (opacity === \"auto\") {\r\n      opacity = Math.abs(thumbWidth / thumbHeight - contentWidth / contentHeight) > 0.1;\r\n    }\r\n\r\n    return {\r\n      top: shiftedTop,\r\n      left: shiftedLeft,\r\n      scale: contentWidth && thumbWidth ? thumbWidth / contentWidth : 1,\r\n      opacity: opacity,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Determine if it is possible to do zoom-in animation\r\n   */\r\n  canZoom(slide) {\r\n    const fancybox = this.fancybox,\r\n      $container = fancybox.$container;\r\n\r\n    if (window.visualViewport && window.visualViewport.scale !== 1) {\r\n      return false;\r\n    }\r\n\r\n    if (slide.Panzoom && !slide.Panzoom.content.width) {\r\n      return false;\r\n    }\r\n\r\n    if (!fancybox.option(\"Image.zoom\") || fancybox.option(\"Image.fit\") !== \"contain\") {\r\n      return false;\r\n    }\r\n\r\n    const $thumb = slide.$thumb;\r\n\r\n    if (!$thumb || slide.state === \"loading\") {\r\n      return false;\r\n    }\r\n\r\n    // * Check if thumbnail image is really visible\r\n    $container.classList.add(\"fancybox__no-click\");\r\n\r\n    const rect = $thumb.getBoundingClientRect();\r\n\r\n    let rez;\r\n\r\n    // Check if thumbnail image is actually visible on the screen\r\n    if (this.fancybox.option(\"Image.ignoreCoveredThumbnail\")) {\r\n      const visibleTopLeft = document.elementFromPoint(rect.left + 1, rect.top + 1) === $thumb;\r\n      const visibleBottomRight = document.elementFromPoint(rect.right - 1, rect.bottom - 1) === $thumb;\r\n\r\n      rez = visibleTopLeft && visibleBottomRight;\r\n    } else {\r\n      rez = document.elementFromPoint(rect.left + rect.width * 0.5, rect.top + rect.height * 0.5) === $thumb;\r\n    }\r\n\r\n    $container.classList.remove(\"fancybox__no-click\");\r\n\r\n    return rez;\r\n  }\r\n\r\n  /**\r\n   * Perform zoom-in animation\r\n   */\r\n  zoomIn() {\r\n    const fancybox = this.fancybox,\r\n      slide = fancybox.getSlide(),\r\n      Panzoom = slide.Panzoom;\r\n\r\n    const { top, left, scale, opacity } = this.getZoomInfo(slide);\r\n\r\n    fancybox.trigger(\"reveal\", slide);\r\n\r\n    // Scale and move to start position\r\n    Panzoom.panTo({\r\n      x: left * -1,\r\n      y: top * -1,\r\n      scale: scale,\r\n      friction: 0,\r\n      ignoreBounds: true,\r\n    });\r\n\r\n    slide.$content.style.visibility = \"\";\r\n\r\n    slide.state = \"zoomIn\";\r\n\r\n    if (opacity === true) {\r\n      Panzoom.on(\"afterTransform\", (panzoom) => {\r\n        if (slide.state === \"zoomIn\" || slide.state === \"zoomOut\") {\r\n          panzoom.$content.style.opacity = Math.min(1, 1 - (1 - panzoom.content.scale) / (1 - scale));\r\n        }\r\n      });\r\n    }\r\n\r\n    // Animate back to original position\r\n    Panzoom.panTo({\r\n      x: 0,\r\n      y: 0,\r\n      scale: 1,\r\n      friction: this.fancybox.option(\"Image.zoomFriction\"),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Perform zoom-out animation\r\n   */\r\n  zoomOut() {\r\n    const fancybox = this.fancybox,\r\n      slide = fancybox.getSlide(),\r\n      Panzoom = slide.Panzoom;\r\n\r\n    if (!Panzoom) {\r\n      return;\r\n    }\r\n\r\n    slide.state = \"zoomOut\";\r\n    fancybox.state = \"customClosing\";\r\n\r\n    if (slide.$caption) {\r\n      slide.$caption.style.visibility = \"hidden\";\r\n    }\r\n\r\n    let friction = this.fancybox.option(\"Image.zoomFriction\");\r\n\r\n    const animatePosition = (event) => {\r\n      const { top, left, scale, opacity } = this.getZoomInfo(slide);\r\n\r\n      // Increase speed on the first run if opacity is not animated\r\n      if (!event && !opacity) {\r\n        friction *= 0.82;\r\n      }\r\n\r\n      Panzoom.panTo({\r\n        x: left * -1,\r\n        y: top * -1,\r\n        scale,\r\n        friction,\r\n        ignoreBounds: true,\r\n      });\r\n\r\n      // Gradually increase speed\r\n      friction *= 0.98;\r\n    };\r\n\r\n    // Page scrolling will cause thumbnail to change position on the display,\r\n    // therefore animation end position has to be recalculated after each page scroll\r\n    window.addEventListener(\"scroll\", animatePosition);\r\n\r\n    Panzoom.once(\"endAnimation\", () => {\r\n      window.removeEventListener(\"scroll\", animatePosition);\r\n      fancybox.destroy();\r\n    });\r\n\r\n    animatePosition();\r\n  }\r\n\r\n  /**\r\n   * Set the type of mouse cursor to indicate if content is zoomable\r\n   * @param {Object} slide\r\n   */\r\n  handleCursor(slide) {\r\n    if (slide.type !== \"image\" || !slide.$el) {\r\n      return;\r\n    }\r\n\r\n    const panzoom = slide.Panzoom;\r\n    const clickAction = this.fancybox.option(\"Image.click\", false, slide);\r\n    const touchIsEnabled = this.fancybox.option(\"Image.touch\");\r\n\r\n    const classList = slide.$el.classList;\r\n\r\n    const zoomInClass = this.fancybox.option(\"Image.canZoomInClass\");\r\n    const zoomOutClass = this.fancybox.option(\"Image.canZoomOutClass\");\r\n\r\n    classList.remove(zoomOutClass);\r\n    classList.remove(zoomInClass);\r\n\r\n    if (panzoom && clickAction === \"toggleZoom\") {\r\n      const canZoomIn =\r\n        panzoom && panzoom.content.scale === 1 && panzoom.option(\"maxScale\") - panzoom.content.scale > 0.01;\r\n\r\n      if (canZoomIn) {\r\n        classList.add(zoomInClass);\r\n      } else if (panzoom.content.scale > 1 && !touchIsEnabled) {\r\n        classList.add(zoomOutClass);\r\n      }\r\n    } else if (clickAction === \"close\") {\r\n      classList.add(zoomOutClass);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle `wheel` event\r\n   * @param {Object} slide\r\n   * @param {Object} event\r\n   */\r\n  onWheel(slide, event) {\r\n    if (this.fancybox.state !== \"ready\") {\r\n      return;\r\n    }\r\n\r\n    if (this.fancybox.trigger(\"Image.wheel\", event) === false) {\r\n      return;\r\n    }\r\n\r\n    switch (this.fancybox.option(\"Image.wheel\")) {\r\n      case \"zoom\":\r\n        if (slide.state === \"done\") {\r\n          slide.Panzoom && slide.Panzoom.zoomWithWheel(event);\r\n        }\r\n\r\n        break;\r\n\r\n      case \"close\":\r\n        this.fancybox.close();\r\n\r\n        break;\r\n\r\n      case \"slide\":\r\n        this.fancybox[event.deltaY < 0 ? \"prev\" : \"next\"]();\r\n\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle `click` and `dblclick` events\r\n   * @param {Object} slide\r\n   * @param {Object} event\r\n   */\r\n  onClick(slide, event) {\r\n    // Check that clicks should be allowed\r\n    if (this.fancybox.state !== \"ready\") {\r\n      return;\r\n    }\r\n\r\n    const panzoom = slide.Panzoom;\r\n\r\n    if (\r\n      panzoom &&\r\n      (panzoom.dragPosition.midPoint ||\r\n        panzoom.dragOffset.x !== 0 ||\r\n        panzoom.dragOffset.y !== 0 ||\r\n        panzoom.dragOffset.scale !== 1)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (this.fancybox.Carousel.Panzoom.lockAxis) {\r\n      return false;\r\n    }\r\n\r\n    const process = (action) => {\r\n      switch (action) {\r\n        case \"toggleZoom\":\r\n          event.stopPropagation();\r\n\r\n          slide.Panzoom && slide.Panzoom.zoomWithClick(event);\r\n\r\n          break;\r\n\r\n        case \"close\":\r\n          this.fancybox.close();\r\n\r\n          break;\r\n\r\n        case \"next\":\r\n          event.stopPropagation();\r\n\r\n          this.fancybox.next();\r\n\r\n          break;\r\n      }\r\n    };\r\n\r\n    const clickAction = this.fancybox.option(\"Image.click\");\r\n    const dblclickAction = this.fancybox.option(\"Image.doubleClick\");\r\n\r\n    if (dblclickAction) {\r\n      if (this.clickTimer) {\r\n        clearTimeout(this.clickTimer);\r\n        this.clickTimer = null;\r\n\r\n        process(dblclickAction);\r\n      } else {\r\n        this.clickTimer = setTimeout(() => {\r\n          this.clickTimer = null;\r\n          process(clickAction);\r\n        }, 300);\r\n      }\r\n    } else {\r\n      process(clickAction);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle `Carousel.change` event to reset zoom level for any zoomed in/out content\r\n   * and to revel content of the current page\r\n   * @param {Object} fancybox\r\n   * @param {Object} carousel\r\n   */\r\n  onPageChange(fancybox, carousel) {\r\n    const currSlide = fancybox.getSlide();\r\n\r\n    carousel.slides.forEach((slide) => {\r\n      if (!slide.Panzoom || slide.state !== \"done\") {\r\n        return;\r\n      }\r\n\r\n      if (slide.index !== currSlide.index) {\r\n        slide.Panzoom.panTo({\r\n          x: 0,\r\n          y: 0,\r\n          scale: 1,\r\n          friction: 0.8,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  attach() {\r\n    this.fancybox.on(this.events);\r\n  }\r\n\r\n  detach() {\r\n    this.fancybox.off(this.events);\r\n  }\r\n}\r\n\r\n// Expose defaults\r\nImage.defaults = defaults;\r\n","import { canUseDOM } from \"../../../shared/utils/canUseDOM.js\";\n\nexport class Hash {\n  constructor(fancybox) {\n    this.fancybox = fancybox;\n\n    for (const methodName of [\"onChange\", \"onClosing\"]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n\n    this.events = {\n      initCarousel: this.onChange,\n      \"Carousel.change\": this.onChange,\n      closing: this.onClosing,\n    };\n\n    this.hasCreatedHistory = false;\n    this.origHash = \"\";\n    this.timer = null;\n  }\n\n  /**\n   * Process `Carousel.ready` and `Carousel.change` events to update URL hash\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   */\n  onChange(fancybox) {\n    const carousel = fancybox.Carousel;\n\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n\n    const firstRun = carousel.prevPage === null;\n    const currentSlide = fancybox.getSlide();\n\n    const currentHash = new URL(document.URL).hash;\n\n    let newHash = false;\n\n    if (currentSlide.slug) {\n      newHash = \"#\" + currentSlide.slug;\n    } else {\n      const dataset = currentSlide.$trigger && currentSlide.$trigger.dataset;\n      const slug = fancybox.option(\"slug\") || (dataset && dataset.fancybox);\n\n      if (slug && slug.length && slug !== \"true\") {\n        newHash = \"#\" + slug + (carousel.slides.length > 1 ? \"-\" + (currentSlide.index + 1) : \"\");\n      }\n    }\n\n    if (firstRun) {\n      this.origHash = currentHash !== newHash ? currentHash : \"\";\n    }\n\n    if (newHash && currentHash !== newHash) {\n      this.timer = setTimeout(() => {\n        try {\n          window.history[firstRun ? \"pushState\" : \"replaceState\"](\n            {},\n            document.title,\n            window.location.pathname + window.location.search + newHash\n          );\n\n          if (firstRun) {\n            this.hasCreatedHistory = true;\n          }\n        } catch (e) {}\n      }, 300);\n    }\n  }\n\n  /**\n   * Process `closing` event to clean up\n   */\n  onClosing() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n\n    // Skip if closing is triggered by pressing  browser back button or by changing hash manually\n    if (this.hasSilentClose === true) {\n      return;\n    }\n\n    // Restore original url\n    try {\n      window.history.replaceState(\n        {},\n        document.title,\n        window.location.pathname + window.location.search + (this.origHash || \"\")\n      );\n\n      return;\n    } catch (e) {}\n  }\n\n  attach(fancybox) {\n    fancybox.on(this.events);\n  }\n\n  detach(fancybox) {\n    fancybox.off(this.events);\n  }\n\n  /**\n   * Start fancybox from current URL hash,\n   * this will be called on page load OR/AND after changing URL hash\n   * @param {Class} Fancybox\n   */\n  static startFromUrl() {\n    const Fancybox = Hash.Fancybox;\n\n    if (!Fancybox || Fancybox.getInstance() || Fancybox.defaults.Hash === false) {\n      return;\n    }\n\n    const { hash, slug, index } = Hash.getParsedURL();\n\n    if (!slug) {\n      return;\n    }\n\n    // Support custom slug\n    // ===\n    let selectedElem = document.querySelector(`[data-slug=\"${hash}\"]`);\n\n    if (selectedElem) {\n      selectedElem.dispatchEvent(new CustomEvent(\"click\", { bubbles: true, cancelable: true }));\n    }\n\n    if (Fancybox.getInstance()) {\n      return;\n    }\n\n    // If elements are not found by custom slug, use URL hash value as group name\n    // ===\n    const groupElems = document.querySelectorAll(`[data-fancybox=\"${slug}\"]`);\n\n    if (!groupElems.length) {\n      return;\n    }\n\n    if (index === null && groupElems.length === 1) {\n      selectedElem = groupElems[0];\n    } else if (index) {\n      selectedElem = groupElems[index - 1];\n    }\n\n    if (selectedElem) {\n      selectedElem.dispatchEvent(new CustomEvent(\"click\", { bubbles: true, cancelable: true }));\n    }\n  }\n\n  /**\n   * Handle `hash` change, change gallery item to current index or start/close current instance\n   */\n  static onHashChange() {\n    const { slug, index } = Hash.getParsedURL();\n\n    const Fancybox = Hash.Fancybox;\n    const instance = Fancybox && Fancybox.getInstance();\n\n    if (instance && instance.plugins.Hash) {\n      // Check if hash matches currently active gallery\n      if (slug) {\n        const carousel = instance.Carousel;\n\n        /**\n         * Support manually opened gallery\n         */\n        if (slug === instance.option(\"slug\")) {\n          return carousel.slideTo(index - 1);\n        }\n\n        /**\n         * Check if URL hash matches `data-slug` value of active element\n         */\n        for (let slide of carousel.slides) {\n          if (slide.slug && slide.slug === slug) {\n            return carousel.slideTo(slide.index);\n          }\n        }\n\n        /**\n         * Check if URL hash matches `data-fancybox` value of active element\n         */\n        const slide = instance.getSlide();\n        const dataset = slide.$trigger && slide.$trigger.dataset;\n\n        if (dataset && dataset.fancybox === slug) {\n          return carousel.slideTo(index - 1);\n        }\n      }\n\n      /**\n       * Close if no matching element found\n       */\n      instance.plugins.Hash.hasSilentClose = true;\n\n      instance.close();\n    }\n\n    /**\n     * Attempt to start\n     */\n    Hash.startFromUrl();\n  }\n\n  /**\n   * Add event bindings that will start new Fancybox instance based in the current URL\n   */\n  static create(Fancybox) {\n    Hash.Fancybox = Fancybox;\n\n    function proceed() {\n      window.addEventListener(\"hashchange\", Hash.onHashChange, false);\n\n      Hash.startFromUrl();\n    }\n\n    if (canUseDOM) {\n      window.requestAnimationFrame(() => {\n        if (/complete|interactive|loaded/.test(document.readyState)) {\n          proceed();\n        } else {\n          document.addEventListener(\"DOMContentLoaded\", proceed);\n        }\n      });\n    }\n  }\n\n  static destroy() {\n    window.removeEventListener(\"hashchange\", Hash.onHashChange, false);\n  }\n\n  /**\n   * Helper method to split URL hash into useful pieces\n   */\n  static getParsedURL() {\n    const hash = window.location.hash.substr(1),\n      tmp = hash.split(\"-\"),\n      index = tmp.length > 1 && /^\\+?\\d+$/.test(tmp[tmp.length - 1]) ? parseInt(tmp.pop(-1), 10) || null : null,\n      slug = tmp.join(\"-\");\n\n    return {\n      hash,\n      slug,\n      index,\n    };\n  }\n}\n","export const Fullscreen = {\r\n  pageXOffset: 0,\r\n  pageYOffset: 0,\r\n\r\n  element() {\r\n    return document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement;\r\n  },\r\n\r\n  activate(element) {\r\n    Fullscreen.pageXOffset = window.pageXOffset;\r\n    Fullscreen.pageYOffset = window.pageYOffset;\r\n\r\n    if (element.requestFullscreen) {\r\n      element.requestFullscreen(); // W3C spec\r\n    } else if (element.mozRequestFullScreen) {\r\n      element.mozRequestFullScreen(); // Firefox\r\n    } else if (element.webkitRequestFullscreen) {\r\n      element.webkitRequestFullscreen(); // Safari\r\n    } else if (element.msRequestFullscreen) {\r\n      element.msRequestFullscreen(); // IE/Edge\r\n    }\r\n  },\r\n\r\n  deactivate() {\r\n    if (document.exitFullscreen) {\r\n      document.exitFullscreen();\r\n    } else if (document.mozCancelFullScreen) {\r\n      document.mozCancelFullScreen();\r\n    } else if (document.webkitExitFullscreen) {\r\n      document.webkitExitFullscreen();\r\n    }\r\n  },\r\n};\r\n","export class Slideshow {\r\n  constructor(fancybox) {\r\n    this.fancybox = fancybox;\r\n    this.active = false;\r\n\r\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\r\n  }\r\n\r\n  isActive() {\r\n    return this.active;\r\n  }\r\n\r\n  setTimer() {\r\n    if (!this.active || this.timer) {\r\n      return;\r\n    }\r\n\r\n    const delay = this.fancybox.option(\"slideshow.delay\", 3000);\r\n\r\n    this.timer = setTimeout(() => {\r\n      this.timer = null;\r\n\r\n      if (\r\n        !this.fancybox.option(\"infinite\") &&\r\n        this.fancybox.getSlide().index === this.fancybox.Carousel.slides.length - 1\r\n      ) {\r\n        this.fancybox.jumpTo(0, { friction: 0 });\r\n      } else {\r\n        this.fancybox.next();\r\n      }\r\n    }, delay);\r\n\r\n    let $progress = this.$progress;\r\n\r\n    if (!$progress) {\r\n      $progress = document.createElement(\"div\");\r\n      $progress.classList.add(\"fancybox__progress\");\r\n\r\n      this.fancybox.$carousel.parentNode.insertBefore($progress, this.fancybox.$carousel);\r\n\r\n      this.$progress = $progress;\r\n\r\n      $progress.offsetHeight; /* trigger reflow */\r\n    }\r\n\r\n    $progress.style.transitionDuration = `${delay}ms`;\r\n    $progress.style.transform = \"scaleX(1)\";\r\n  }\r\n\r\n  clearTimer() {\r\n    clearTimeout(this.timer);\r\n    this.timer = null;\r\n\r\n    if (this.$progress) {\r\n      this.$progress.style.transitionDuration = \"\";\r\n      this.$progress.style.transform = \"\";\r\n\r\n      this.$progress.offsetHeight; /* trigger reflow */\r\n    }\r\n  }\r\n\r\n  activate() {\r\n    if (this.active) {\r\n      return;\r\n    }\r\n\r\n    this.active = true;\r\n    this.fancybox.$container.classList.add(\"has-slideshow\");\r\n\r\n    if (this.fancybox.getSlide().state === \"done\") {\r\n      this.setTimer();\r\n    }\r\n\r\n    document.addEventListener(\"visibilitychange\", this.handleVisibilityChange, false);\r\n  }\r\n\r\n  handleVisibilityChange() {\r\n    this.deactivate();\r\n  }\r\n\r\n  deactivate() {\r\n    this.active = false;\r\n\r\n    this.clearTimer();\r\n\r\n    this.fancybox.$container.classList.remove(\"has-slideshow\");\r\n\r\n    document.removeEventListener(\"visibilitychange\", this.handleVisibilityChange, false);\r\n  }\r\n\r\n  toggle() {\r\n    if (this.active) {\r\n      this.deactivate();\r\n    } else if (this.fancybox.Carousel.slides.length > 1) {\r\n      this.activate();\r\n    }\r\n  }\r\n}\r\n","import { isPlainObject } from \"../../../shared/utils/isPlainObject.js\";\r\nimport { extend } from \"../../../shared/utils/extend.js\";\r\n\r\nimport { Fullscreen } from \"../../../shared/utils/Fullscreen.js\";\r\nimport { Slideshow } from \"../../../shared/utils/Slideshow.js\";\r\n\r\nconst defaults = {\r\n  // What toolbar items to display\r\n  display: [\r\n    \"counter\",\r\n    //\"prev\",\r\n    //\"next\",\r\n    //\"download\",\r\n    \"zoom\",\r\n    \"slideshow\",\r\n    \"fullscreen\",\r\n    \"thumbs\",\r\n    \"close\",\r\n  ],\r\n\r\n  // Only create a toolbar item if there is at least one image in the group\r\n  autoEnable: true,\r\n\r\n  // Toolbar items; can be links, buttons or `div` elements\r\n  items: {\r\n    counter: {\r\n      position: \"left\",\r\n      type: \"div\",\r\n      class: \"fancybox__counter\",\r\n      html: '<span data-fancybox-index=\"\"></span>&nbsp;/&nbsp;<span data-fancybox-count=\"\"></span>',\r\n      attr: { tabindex: -1 },\r\n    },\r\n    prev: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--prev\",\r\n      label: \"PREV\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><path d=\"M15 4l-8 8 8 8\"/></svg>',\r\n      attr: { \"data-fancybox-prev\": \"\" },\r\n    },\r\n    next: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--next\",\r\n      label: \"NEXT\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><path d=\"M8 4l8 8-8 8\"/></svg>',\r\n      attr: { \"data-fancybox-next\": \"\" },\r\n    },\r\n    fullscreen: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--fullscreen\",\r\n      label: \"TOGGLE_FULLSCREEN\",\r\n      html: `<svg viewBox=\"0 0 24 24\">\r\n                <g><path d=\"M3 8 V3h5\"></path><path d=\"M21 8V3h-5\"></path><path d=\"M8 21H3v-5\"></path><path d=\"M16 21h5v-5\"></path></g>\r\n                <g><path d=\"M7 2v5H2M17 2v5h5M2 17h5v5M22 17h-5v5\"/></g>\r\n            </svg>`,\r\n      click: function (event) {\r\n        event.preventDefault();\r\n\r\n        if (Fullscreen.element()) {\r\n          Fullscreen.deactivate();\r\n        } else {\r\n          Fullscreen.activate(this.fancybox.$container);\r\n        }\r\n      },\r\n    },\r\n    slideshow: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--slideshow\",\r\n      label: \"TOGGLE_SLIDESHOW\",\r\n      html: `<svg viewBox=\"0 0 24 24\">\r\n                <g><path d=\"M6 4v16\"/><path d=\"M20 12L6 20\"/><path d=\"M20 12L6 4\"/></g>\r\n                <g><path d=\"M7 4v15M17 4v15\"/></g>\r\n            </svg>`,\r\n      click: function (event) {\r\n        event.preventDefault();\r\n\r\n        this.Slideshow.toggle();\r\n      },\r\n    },\r\n    zoom: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--zoom\",\r\n      label: \"TOGGLE_ZOOM\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><circle cx=\"10\" cy=\"10\" r=\"7\"></circle><path d=\"M16 16 L21 21\"></svg>',\r\n      click: function (event) {\r\n        event.preventDefault();\r\n\r\n        const panzoom = this.fancybox.getSlide().Panzoom;\r\n\r\n        if (panzoom) {\r\n          panzoom.toggleZoom();\r\n        }\r\n      },\r\n    },\r\n    download: {\r\n      type: \"link\",\r\n      label: \"DOWNLOAD\",\r\n      class: \"fancybox__button--download\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><path d=\"M12 15V3m0 12l-4-4m4 4l4-4M2 17l.62 2.48A2 2 0 004.56 21h14.88a2 2 0 001.94-1.51L22 17\"/></svg>',\r\n      click: function (event) {\r\n        event.stopPropagation();\r\n      },\r\n    },\r\n    thumbs: {\r\n      type: \"button\",\r\n      label: \"TOGGLE_THUMBS\",\r\n      class: \"fancybox__button--thumbs\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><circle cx=\"4\" cy=\"4\" r=\"1\" /><circle cx=\"12\" cy=\"4\" r=\"1\" transform=\"rotate(90 12 4)\"/><circle cx=\"20\" cy=\"4\" r=\"1\" transform=\"rotate(90 20 4)\"/><circle cx=\"4\" cy=\"12\" r=\"1\" transform=\"rotate(90 4 12)\"/><circle cx=\"12\" cy=\"12\" r=\"1\" transform=\"rotate(90 12 12)\"/><circle cx=\"20\" cy=\"12\" r=\"1\" transform=\"rotate(90 20 12)\"/><circle cx=\"4\" cy=\"20\" r=\"1\" transform=\"rotate(90 4 20)\"/><circle cx=\"12\" cy=\"20\" r=\"1\" transform=\"rotate(90 12 20)\"/><circle cx=\"20\" cy=\"20\" r=\"1\" transform=\"rotate(90 20 20)\"/></svg>',\r\n      click: function (event) {\r\n        event.stopPropagation();\r\n\r\n        const thumbs = this.fancybox.plugins.Thumbs;\r\n\r\n        if (thumbs) {\r\n          thumbs.toggle();\r\n        }\r\n      },\r\n    },\r\n    close: {\r\n      type: \"button\",\r\n      label: \"CLOSE\",\r\n      class: \"fancybox__button--close\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><path d=\"M20 20L4 4m16 0L4 20\"></path></svg>',\r\n      attr: { \"data-fancybox-close\": \"\", tabindex: 0 },\r\n    },\r\n  },\r\n};\r\n\r\nexport class Toolbar {\r\n  constructor(fancybox) {\r\n    this.fancybox = fancybox;\r\n\r\n    this.$container = null;\r\n    this.state = \"init\";\r\n\r\n    for (const methodName of [\r\n      \"onInit\",\r\n      \"onPrepare\",\r\n      \"onDone\",\r\n      \"onKeydown\",\r\n      \"onClosing\",\r\n      \"onChange\",\r\n      \"onSettle\",\r\n      \"onRefresh\",\r\n    ]) {\r\n      this[methodName] = this[methodName].bind(this);\r\n    }\r\n\r\n    this.events = {\r\n      init: this.onInit,\r\n      prepare: this.onPrepare,\r\n      done: this.onDone,\r\n      keydown: this.onKeydown,\r\n      closing: this.onClosing,\r\n\r\n      // Clear Slideshow when user strts to change current slide\r\n      \"Carousel.change\": this.onChange,\r\n\r\n      // Set timer after carousel changes current slide; deactive if last slide is reached\r\n      \"Carousel.settle\": this.onSettle,\r\n\r\n      // Deactivate Slideshow on user interaction\r\n      \"Carousel.Panzoom.touchStart\": () => this.onRefresh(),\r\n\r\n      \"Image.startAnimation\": (fancybox, slide) => this.onRefresh(slide),\r\n      \"Image.afterUpdate\": (fancybox, slide) => this.onRefresh(slide),\r\n    };\r\n  }\r\n\r\n  onInit() {\r\n    // Disable self if current group does not contain at least one image\r\n    if (this.fancybox.option(\"Toolbar.autoEnable\")) {\r\n      let hasImage = false;\r\n\r\n      for (const item of this.fancybox.items) {\r\n        if (item.type === \"image\") {\r\n          hasImage = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!hasImage) {\r\n        this.state = \"disabled\";\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Disable the creation of a close button, if one exists in the toolbar\r\n    for (const key of this.fancybox.option(\"Toolbar.display\")) {\r\n      const id = isPlainObject(key) ? key.id : key;\r\n\r\n      if (id === \"close\") {\r\n        this.fancybox.options.closeButton = false;\r\n\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  onPrepare() {\r\n    const fancybox = this.fancybox;\r\n    // Skip if disabled\r\n    if (this.state !== \"init\") {\r\n      return;\r\n    }\r\n\r\n    this.build();\r\n\r\n    this.update();\r\n\r\n    this.Slideshow = new Slideshow(fancybox);\r\n\r\n    if (!fancybox.Carousel.prevPage) {\r\n      if (fancybox.option(\"slideshow.autoStart\")) {\r\n        this.Slideshow.activate();\r\n      }\r\n\r\n      if (fancybox.option(\"fullscreen.autoStart\") && !Fullscreen.element()) {\r\n        try {\r\n          Fullscreen.activate(fancybox.$container);\r\n        } catch (error) {}\r\n      }\r\n    }\r\n  }\r\n\r\n  onFsChange() {\r\n    window.scrollTo(Fullscreen.pageXOffset, Fullscreen.pageYOffset);\r\n  }\r\n\r\n  onSettle() {\r\n    const fancybox = this.fancybox;\r\n    const slideshow = this.Slideshow;\r\n\r\n    if (slideshow && slideshow.isActive()) {\r\n      if (fancybox.getSlide().index === fancybox.Carousel.slides.length - 1 && !fancybox.option(\"infinite\")) {\r\n        slideshow.deactivate();\r\n      } else if (fancybox.getSlide().state === \"done\") {\r\n        slideshow.setTimer();\r\n      }\r\n    }\r\n  }\r\n\r\n  onChange() {\r\n    this.update();\r\n\r\n    if (this.Slideshow && this.Slideshow.isActive()) {\r\n      this.Slideshow.clearTimer();\r\n    }\r\n  }\r\n\r\n  onDone(fancybox, slide) {\r\n    const slideshow = this.Slideshow;\r\n\r\n    if (slide.index === fancybox.getSlide().index) {\r\n      this.update();\r\n\r\n      if (slideshow && slideshow.isActive()) {\r\n        if (!fancybox.option(\"infinite\") && slide.index === fancybox.Carousel.slides.length - 1) {\r\n          slideshow.deactivate();\r\n        } else {\r\n          slideshow.setTimer();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onRefresh(slide) {\r\n    if (!slide || slide.index === this.fancybox.getSlide().index) {\r\n      this.update();\r\n\r\n      if (this.Slideshow && this.Slideshow.isActive() && (!slide || slide.state === \"done\")) {\r\n        this.Slideshow.deactivate();\r\n      }\r\n    }\r\n  }\r\n\r\n  onKeydown(fancybox, key, event) {\r\n    if (key === \" \" && this.Slideshow) {\r\n      this.Slideshow.toggle();\r\n\r\n      event.preventDefault();\r\n    }\r\n  }\r\n\r\n  onClosing() {\r\n    if (this.Slideshow) {\r\n      this.Slideshow.deactivate();\r\n    }\r\n\r\n    document.removeEventListener(\"fullscreenchange\", this.onFsChange);\r\n  }\r\n\r\n  /**\r\n   * Create link, button or `div` element for the toolbar\r\n   * @param {Object} obj\r\n   * @returns HTMLElement\r\n   */\r\n  createElement(obj) {\r\n    let $el;\r\n\r\n    if (obj.type === \"div\") {\r\n      $el = document.createElement(\"div\");\r\n    } else {\r\n      $el = document.createElement(obj.type === \"link\" ? \"a\" : \"button\");\r\n      $el.classList.add(\"carousel__button\");\r\n    }\r\n\r\n    $el.innerHTML = obj.html;\r\n\r\n    $el.setAttribute(\"tabindex\", obj.tabindex || 0);\r\n\r\n    if (obj.class) {\r\n      $el.classList.add(...obj.class.split(\" \"));\r\n    }\r\n\r\n    for (const prop in obj.attr) {\r\n      $el.setAttribute(prop, obj.attr[prop]);\r\n    }\r\n\r\n    if (obj.label) {\r\n      $el.setAttribute(\"title\", this.fancybox.localize(`{{${obj.label}}}`));\r\n    }\r\n\r\n    if (obj.click) {\r\n      $el.addEventListener(\"click\", obj.click.bind(this));\r\n    }\r\n\r\n    if (obj.id === \"prev\") {\r\n      $el.setAttribute(\"data-fancybox-prev\", \"\");\r\n    }\r\n\r\n    if (obj.id === \"next\") {\r\n      $el.setAttribute(\"data-fancybox-next\", \"\");\r\n    }\r\n\r\n    const $svg = $el.querySelector(\"svg\");\r\n\r\n    if ($svg) {\r\n      $svg.setAttribute(\"role\", \"img\");\r\n      $svg.setAttribute(\"tabindex\", \"-1\");\r\n      $svg.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\r\n    }\r\n\r\n    return $el;\r\n  }\r\n\r\n  /**\r\n   * Create all DOM elements\r\n   */\r\n  build() {\r\n    this.cleanup();\r\n\r\n    const all_items = this.fancybox.option(\"Toolbar.items\");\r\n    const all_groups = [\r\n      {\r\n        position: \"left\",\r\n        items: [],\r\n      },\r\n      {\r\n        position: \"center\",\r\n        items: [],\r\n      },\r\n      {\r\n        position: \"right\",\r\n        items: [],\r\n      },\r\n    ];\r\n\r\n    const thumbs = this.fancybox.plugins.Thumbs;\r\n\r\n    // 1st step - group toolbar elements by position\r\n    for (const key of this.fancybox.option(\"Toolbar.display\")) {\r\n      let id, item;\r\n\r\n      if (isPlainObject(key)) {\r\n        id = key.id;\r\n        item = extend({}, all_items[id], key);\r\n      } else {\r\n        id = key;\r\n        item = all_items[id];\r\n      }\r\n\r\n      if ([\"counter\", \"next\", \"prev\", \"slideshow\"].includes(id) && this.fancybox.items.length < 2) {\r\n        continue;\r\n      }\r\n\r\n      if (id === \"fullscreen\") {\r\n        if (!document.fullscreenEnabled || window.fullScreen) {\r\n          continue;\r\n        }\r\n\r\n        document.addEventListener(\"fullscreenchange\", this.onFsChange);\r\n      }\r\n\r\n      if (id === \"thumbs\" && (!thumbs || thumbs.state === \"disabled\")) {\r\n        continue;\r\n      }\r\n\r\n      if (!item) {\r\n        continue;\r\n      }\r\n\r\n      let position = item.position || \"right\";\r\n\r\n      let group = all_groups.find((obj) => obj.position === position);\r\n\r\n      if (group) {\r\n        group.items.push(item);\r\n      }\r\n    }\r\n\r\n    // 2st step - create DOM elements\r\n    const $container = document.createElement(\"div\");\r\n    $container.classList.add(\"fancybox__toolbar\");\r\n\r\n    for (const group of all_groups) {\r\n      if (group.items.length) {\r\n        const $wrap = document.createElement(\"div\");\r\n        $wrap.classList.add(\"fancybox__toolbar__items\");\r\n        $wrap.classList.add(`fancybox__toolbar__items--${group.position}`);\r\n\r\n        for (const obj of group.items) {\r\n          $wrap.appendChild(this.createElement(obj));\r\n        }\r\n\r\n        $container.appendChild($wrap);\r\n      }\r\n    }\r\n\r\n    // Add toolbar container to DOM\r\n    this.fancybox.$carousel.parentNode.insertBefore($container, this.fancybox.$carousel);\r\n\r\n    this.$container = $container;\r\n  }\r\n\r\n  /**\r\n   * Update element state depending on index of current slide\r\n   */\r\n  update() {\r\n    const slide = this.fancybox.getSlide();\r\n    const idx = slide.index;\r\n    const cnt = this.fancybox.items.length;\r\n\r\n    // Download links\r\n    // ====\r\n    const src = slide.downloadSrc || (slide.type === \"image\" && !slide.error ? slide.src : null);\r\n\r\n    for (const $el of this.fancybox.$container.querySelectorAll(\"a.fancybox__button--download\")) {\r\n      if (src) {\r\n        $el.removeAttribute(\"disabled\");\r\n        $el.removeAttribute(\"tabindex\");\r\n\r\n        $el.setAttribute(\"href\", src);\r\n        $el.setAttribute(\"download\", src);\r\n        $el.setAttribute(\"target\", \"_blank\");\r\n      } else {\r\n        $el.setAttribute(\"disabled\", \"\");\r\n        $el.setAttribute(\"tabindex\", -1);\r\n\r\n        $el.removeAttribute(\"href\");\r\n        $el.removeAttribute(\"download\");\r\n      }\r\n    }\r\n\r\n    // Zoom button\r\n    // ===\r\n    const panzoom = slide.Panzoom;\r\n    const canZoom = panzoom && panzoom.option(\"maxScale\") > panzoom.option(\"baseScale\");\r\n\r\n    for (const $el of this.fancybox.$container.querySelectorAll(\".fancybox__button--zoom\")) {\r\n      if (canZoom) {\r\n        $el.removeAttribute(\"disabled\");\r\n      } else {\r\n        $el.setAttribute(\"disabled\", \"\");\r\n      }\r\n    }\r\n\r\n    // Counter\r\n    // ====\r\n    for (const $el of this.fancybox.$container.querySelectorAll(\"[data-fancybox-index]\")) {\r\n      $el.innerHTML = slide.index + 1;\r\n    }\r\n\r\n    for (const $el of this.fancybox.$container.querySelectorAll(\"[data-fancybox-count]\")) {\r\n      $el.innerHTML = cnt;\r\n    }\r\n\r\n    // Disable previous/next links if gallery is not infinite and has reached start/end\r\n    // ===\r\n    if (!this.fancybox.option(\"infinite\")) {\r\n      for (const $el of this.fancybox.$container.querySelectorAll(\"[data-fancybox-prev]\")) {\r\n        if (idx === 0) {\r\n          $el.setAttribute(\"disabled\", \"\");\r\n        } else {\r\n          $el.removeAttribute(\"disabled\");\r\n        }\r\n      }\r\n\r\n      for (const $el of this.fancybox.$container.querySelectorAll(\"[data-fancybox-next]\")) {\r\n        if (idx === cnt - 1) {\r\n          $el.setAttribute(\"disabled\", \"\");\r\n        } else {\r\n          $el.removeAttribute(\"disabled\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  cleanup() {\r\n    if (this.Slideshow && this.Slideshow.isActive()) {\r\n      this.Slideshow.clearTimer();\r\n    }\r\n\r\n    if (this.$container) {\r\n      this.$container.remove();\r\n    }\r\n\r\n    this.$container = null;\r\n  }\r\n\r\n  attach() {\r\n    this.fancybox.on(this.events);\r\n  }\r\n\r\n  detach() {\r\n    this.fancybox.off(this.events);\r\n\r\n    this.cleanup();\r\n  }\r\n}\r\n\r\n// Expose defaults\r\nToolbar.defaults = defaults;\r\n","import { ScrollLock } from \"./ScrollLock/ScrollLock.js\";\nimport { Thumbs } from \"./Thumbs/Thumbs.js\";\nimport { Html } from \"./Html/Html.js\";\nimport { Image } from \"./Image/Image.js\";\nimport { Hash } from \"./Hash/Hash.js\";\nimport { Toolbar } from \"./Toolbar/Toolbar.js\";\n\nexport const Plugins = {\n  ScrollLock,\n  Thumbs,\n  Html,\n  Toolbar,\n  Image,\n  Hash,\n};\n","import { isScrollable } from \"../../../../src/shared/utils/isScrollable.js\";\n\nexport class ScrollLock {\n  constructor(fancybox) {\n    this.fancybox = fancybox;\n    this.viewport = null;\n\n    this.pendingUpdate = null;\n\n    for (const methodName of [\"onReady\", \"onResize\", \"onTouchstart\", \"onTouchmove\"]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n  }\n\n  /**\n   * Process `initLayout` event to attach event listeners and resize viewport if needed\n   */\n  onReady() {\n    //* Support Visual Viewport API\n    // https://developer.mozilla.org/en-US/docs/Web/API/Visual_Viewport_API\n    const viewport = window.visualViewport;\n\n    if (viewport) {\n      this.viewport = viewport;\n      this.startY = 0;\n\n      viewport.addEventListener(\"resize\", this.onResize);\n\n      this.updateViewport();\n    }\n\n    //* Prevent bouncing while scrolling on mobile devices\n    window.addEventListener(\"touchstart\", this.onTouchstart, { passive: false });\n    window.addEventListener(\"touchmove\", this.onTouchmove, { passive: false });\n\n    //* Prevent window scrolling with mouse wheel\n    window.addEventListener(\"wheel\", this.onWheel, { passive: false });\n  }\n\n  /**\n   * Handle `resize` event to call `updateViewport`\n   */\n  onResize() {\n    this.updateViewport();\n  }\n\n  /**\n   * Scale $container proportionally to actually fit inside browser,\n   * e.g., disable viewport zooming\n   */\n  updateViewport() {\n    const fancybox = this.fancybox,\n      viewport = this.viewport,\n      scale = viewport.scale || 1,\n      $container = fancybox.$container;\n\n    if (!$container) {\n      return;\n    }\n\n    let width = \"\",\n      height = \"\",\n      transform = \"\";\n\n    if (scale - 1 > 0.1) {\n      width = `${viewport.width * scale}px`;\n      height = `${viewport.height * scale}px`;\n      transform = `translate3d(${viewport.offsetLeft}px, ${viewport.offsetTop}px, 0) scale(${1 / scale})`;\n    }\n\n    $container.style.width = width;\n    $container.style.height = height;\n    $container.style.transform = transform;\n  }\n\n  /**\n   * Handle `touchstart` event to mark drag start position\n   * @param {Object} event\n   */\n  onTouchstart(event) {\n    this.startY = event.touches ? event.touches[0].screenY : event.screenY;\n  }\n\n  /**\n   * Handle `touchmove` event to fix scrolling on mobile devices (iOS)\n   * @param {Object} event\n   */\n  onTouchmove(event) {\n    const startY = this.startY;\n    const zoom = window.innerWidth / window.document.documentElement.clientWidth;\n\n    if (!event.cancelable) {\n      return;\n    }\n\n    if (event.touches.length > 1 || zoom !== 1) {\n      return;\n    }\n\n    const el = isScrollable(event.composedPath()[0]);\n\n    if (!el) {\n      event.preventDefault();\n      return;\n    }\n\n    const style = window.getComputedStyle(el);\n    const height = parseInt(style.getPropertyValue(\"height\"), 10);\n\n    const curY = event.touches ? event.touches[0].screenY : event.screenY;\n\n    const isAtTop = startY <= curY && el.scrollTop === 0;\n    const isAtBottom = startY >= curY && el.scrollHeight - el.scrollTop === height;\n\n    if (isAtTop || isAtBottom) {\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * Handle `wheel` event\n   */\n  onWheel(event) {\n    if (!isScrollable(event.composedPath()[0])) {\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * Clean everything up\n   */\n  cleanup() {\n    if (this.pendingUpdate) {\n      cancelAnimationFrame(this.pendingUpdate);\n      this.pendingUpdate = null;\n    }\n\n    const viewport = this.viewport;\n\n    if (viewport) {\n      viewport.removeEventListener(\"resize\", this.onResize);\n      this.viewport = null;\n    }\n\n    window.removeEventListener(\"touchstart\", this.onTouchstart, false);\n    window.removeEventListener(\"touchmove\", this.onTouchmove, false);\n\n    window.removeEventListener(\"wheel\", this.onWheel, { passive: false });\n  }\n\n  attach() {\n    this.fancybox.on(\"initLayout\", this.onReady);\n  }\n\n  detach() {\n    this.fancybox.off(\"initLayout\", this.onReady);\n\n    this.cleanup();\n  }\n}\n","import { extend } from \"../shared/utils/extend.js\";\nimport { canUseDOM } from \"../shared/utils/canUseDOM.js\";\nimport { FOCUSABLE_ELEMENTS, setFocusOn } from \"../shared/utils/setFocusOn.js\";\n\nimport { Base } from \"../shared/Base/Base.js\";\n\nimport { Carousel } from \"../Carousel/Carousel.js\";\n\nimport { Plugins } from \"./plugins/index.js\";\n\n// Default language\nimport en from \"./l10n/en.js\";\n\n// Default settings\nconst defaults = {\n  // Index of active slide on the start\n  startIndex: 0,\n\n  // Number of slides to preload before and after active slide\n  preload: 1,\n\n  // Should navigation be infinite\n  infinite: true,\n\n  // Class name to be applied to the content to reveal it\n  showClass: \"fancybox-zoomInUp\", // \"fancybox-fadeIn\" | \"fancybox-zoomInUp\" | false\n\n  // Class name to be applied to the content to hide it\n  hideClass: \"fancybox-fadeOut\", // \"fancybox-fadeOut\" | \"fancybox-zoomOutDown\" | false\n\n  // Should backdrop and UI elements fade in/out on start/close\n  animated: true,\n\n  // If browser scrollbar should be hidden\n  hideScrollbar: true,\n\n  // Element containing main structure\n  parentEl: null,\n\n  // Custom class name or multiple space-separated class names for the container\n  mainClass: null,\n\n  // Set focus on first focusable element after displaying content\n  autoFocus: true,\n\n  // Trap focus inside Fancybox\n  trapFocus: true,\n\n  // Set focus back to trigger element after closing Fancybox\n  placeFocusBack: true,\n\n  // Action to take when the user clicks on the backdrop\n  click: \"close\", // \"close\" | \"next\" | null\n\n  // Position of the close button - over the content or at top right corner of viewport\n  closeButton: \"inside\", // \"inside\" | \"outside\"\n\n  // Allow user to drag content up/down to close instance\n  dragToClose: true,\n\n  // Enable keyboard navigation\n  keyboard: {\n    Escape: \"close\",\n    Delete: \"close\",\n    Backspace: \"close\",\n    PageUp: \"next\",\n    PageDown: \"prev\",\n    ArrowUp: \"next\",\n    ArrowDown: \"prev\",\n    ArrowRight: \"next\",\n    ArrowLeft: \"prev\",\n  },\n\n  // HTML templates for various elements\n  template: {\n    // Close button icon\n    closeButton:\n      '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" tabindex=\"-1\"><path d=\"M20 20L4 4m16 0L4 20\"/></svg>',\n    // Loading indicator icon\n    spinner:\n      '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"50\" height=\"50\" viewBox=\"25 25 50 50\" tabindex=\"-1\"><circle cx=\"50\" cy=\"50\" r=\"20\"/></svg>',\n\n    // Main container element\n    main: null,\n  },\n\n  /* Note: If the `template.main` option is not provided, the structure is generated as follows by default:\n  <div class=\"fancybox__container\" role=\"dialog\" aria-modal=\"true\" aria-hidden=\"true\" aria-label=\"{{MODAL}}\" tabindex=\"-1\">\n    <div class=\"fancybox__backdrop\"></div>\n    <div class=\"fancybox__carousel\"></div>\n  </div>\n  */\n\n  // Localization of strings\n  l10n: en,\n};\n\n// Object that contains all active instances of Fancybox\nconst instances = new Map();\n\n// Number of Fancybox instances created, it is used to generate new instance \"id\"\nlet called = 0;\n\nclass Fancybox extends Base {\n  /**\n   * Fancybox constructor\n   * @constructs Fancybox\n   * @param {Object} [options] - Options for Fancybox\n   */\n  constructor(items, options = {}) {\n    // Quick hack to fix variable naming collision\n    items = items.map((item) => {\n      if (item.width) item._width = item.width;\n      if (item.height) item._height = item.height;\n\n      return item;\n    });\n\n    super(extend(true, {}, defaults, options));\n\n    this.bindHandlers();\n\n    this.state = \"init\";\n\n    this.setItems(items);\n\n    this.attachPlugins(Fancybox.Plugins);\n\n    // \"init\" event marks the start of initialization and is available to plugins\n    this.trigger(\"init\");\n\n    if (this.option(\"hideScrollbar\") === true) {\n      this.hideScrollbar();\n    }\n\n    this.initLayout();\n\n    this.initCarousel();\n\n    this.attachEvents();\n\n    instances.set(this.id, this);\n\n    // \"prepare\" event will trigger the creation of additional layout elements, such as thumbnails and toolbar\n    this.trigger(\"prepare\");\n\n    this.state = \"ready\";\n\n    // \"ready\" event will trigger the content to load\n    this.trigger(\"ready\");\n\n    // Reveal container\n    this.$container.setAttribute(\"aria-hidden\", \"false\");\n\n    // Set focus on the first focusable element inside this instance\n    if (this.option(\"trapFocus\")) {\n      this.focus();\n    }\n  }\n\n  /**\n   * Override `option` method to get value from the current slide\n   * @param {String} name option name\n   * @param  {...any} rest optional extra parameters\n   * @returns {any}\n   */\n  option(name, ...rest) {\n    const slide = this.getSlide();\n\n    let value = slide ? slide[name] : undefined;\n\n    if (value !== undefined) {\n      if (typeof value === \"function\") {\n        value = value.call(this, this, ...rest);\n      }\n\n      return value;\n    }\n\n    return super.option(name, ...rest);\n  }\n\n  /**\n   * Bind event handlers for referencability\n   */\n  bindHandlers() {\n    for (const methodName of [\n      \"onMousedown\",\n      \"onKeydown\",\n      \"onClick\",\n\n      \"onFocus\",\n\n      \"onCreateSlide\",\n      \"onSettle\",\n\n      \"onTouchMove\",\n      \"onTouchEnd\",\n\n      \"onTransform\",\n    ]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n  }\n\n  /**\n   * Set up a functions that will be called whenever the specified event is delivered\n   */\n  attachEvents() {\n    document.addEventListener(\"mousedown\", this.onMousedown);\n    document.addEventListener(\"keydown\", this.onKeydown, true);\n\n    // Trap keyboard focus inside of the modal\n    if (this.option(\"trapFocus\")) {\n      document.addEventListener(\"focus\", this.onFocus, true);\n    }\n\n    this.$container.addEventListener(\"click\", this.onClick);\n  }\n\n  /**\n   * Removes previously registered event listeners\n   */\n  detachEvents() {\n    document.removeEventListener(\"mousedown\", this.onMousedown);\n    document.removeEventListener(\"keydown\", this.onKeydown, true);\n\n    document.removeEventListener(\"focus\", this.onFocus, true);\n\n    this.$container.removeEventListener(\"click\", this.onClick);\n  }\n\n  /**\n   * Initialize layout; create main container, backdrop nd layout for main carousel\n   */\n  initLayout() {\n    this.$root = this.option(\"parentEl\") || document.body;\n\n    // Container\n    let mainTemplate = this.option(\"template.main\");\n\n    if (mainTemplate) {\n      this.$root.insertAdjacentHTML(\"beforeend\", this.localize(mainTemplate));\n\n      this.$container = this.$root.querySelector(\".fancybox__container\");\n    }\n\n    if (!this.$container) {\n      this.$container = document.createElement(\"div\");\n      this.$root.appendChild(this.$container);\n    }\n\n    // Normally we would not need this, but Safari does not support `preventScroll:false` option for `focus` method\n    // and that causes layout issues\n    this.$container.onscroll = () => {\n      this.$container.scrollLeft = 0;\n      return false;\n    };\n\n    Object.entries({\n      class: \"fancybox__container\",\n      role: \"dialog\",\n      tabIndex: \"-1\",\n      \"aria-modal\": \"true\",\n      \"aria-hidden\": \"true\",\n      \"aria-label\": this.localize(\"{{MODAL}}\"),\n    }).forEach((args) => this.$container.setAttribute(...args));\n\n    if (this.option(\"animated\")) {\n      this.$container.classList.add(\"is-animated\");\n    }\n\n    // Backdrop\n    this.$backdrop = this.$container.querySelector(\".fancybox__backdrop\");\n\n    if (!this.$backdrop) {\n      this.$backdrop = document.createElement(\"div\");\n      this.$backdrop.classList.add(\"fancybox__backdrop\");\n\n      this.$container.appendChild(this.$backdrop);\n    }\n\n    // Carousel\n    this.$carousel = this.$container.querySelector(\".fancybox__carousel\");\n\n    if (!this.$carousel) {\n      this.$carousel = document.createElement(\"div\");\n      this.$carousel.classList.add(\"fancybox__carousel\");\n\n      this.$container.appendChild(this.$carousel);\n    }\n\n    // Make instance reference accessible\n    this.$container.Fancybox = this;\n\n    // Make sure the container has an ID\n    this.id = this.$container.getAttribute(\"id\");\n\n    if (!this.id) {\n      this.id = this.options.id || ++called;\n      this.$container.setAttribute(\"id\", \"fancybox-\" + this.id);\n    }\n\n    // Add custom class name to main element\n    const mainClass = this.option(\"mainClass\");\n\n    if (mainClass) {\n      this.$container.classList.add(...mainClass.split(\" \"));\n    }\n\n    // Add class name for <html> element\n    document.documentElement.classList.add(\"with-fancybox\");\n\n    this.trigger(\"initLayout\");\n\n    return this;\n  }\n\n  /**\n   * Prepares slides for the corousel\n   * @returns {Array} Slides\n   */\n  setItems(items) {\n    const slides = [];\n\n    for (const slide of items) {\n      const $trigger = slide.$trigger;\n\n      if ($trigger) {\n        const dataset = $trigger.dataset || {};\n\n        slide.src = dataset.src || $trigger.getAttribute(\"href\") || slide.src;\n        slide.type = dataset.type || slide.type;\n\n        // Support items without `src`, e.g., when `data-fancybox` attribute added directly to `<img>` element\n        if (!slide.src && $trigger instanceof HTMLImageElement) {\n          slide.src = $trigger.currentSrc || slide.$trigger.src;\n        }\n      }\n\n      // Check for thumbnail element\n      let $thumb = slide.$thumb;\n\n      if (!$thumb) {\n        let origTarget = slide.$trigger && slide.$trigger.origTarget;\n\n        if (origTarget) {\n          if (origTarget instanceof HTMLImageElement) {\n            $thumb = origTarget;\n          } else {\n            $thumb = origTarget.querySelector(\"img:not([aria-hidden])\");\n          }\n        }\n\n        if (!$thumb && slide.$trigger) {\n          $thumb =\n            slide.$trigger instanceof HTMLImageElement\n              ? slide.$trigger\n              : slide.$trigger.querySelector(\"img:not([aria-hidden])\");\n        }\n      }\n\n      slide.$thumb = $thumb || null;\n\n      // Get thumbnail image source\n      let thumb = slide.thumb;\n\n      if (!thumb && $thumb) {\n        thumb = $thumb.currentSrc || $thumb.src;\n\n        if (!thumb && $thumb.dataset) {\n          thumb = $thumb.dataset.lazySrc || $thumb.dataset.src;\n        }\n      }\n\n      // Assume we have image, then use it as thumbnail\n      if (!thumb && slide.type === \"image\") {\n        thumb = slide.src;\n      }\n\n      slide.thumb = thumb || null;\n\n      // Add empty caption to make things simpler\n      slide.caption = slide.caption || \"\";\n\n      slides.push(slide);\n    }\n\n    this.items = slides;\n  }\n\n  /**\n   * Initialize main Carousel that will be used to display the content\n   * @param {Array} slides\n   */\n  initCarousel() {\n    this.Carousel = new Carousel(\n      this.$carousel,\n      extend(\n        true,\n        {},\n        {\n          prefix: \"\",\n\n          classNames: {\n            viewport: \"fancybox__viewport\",\n            track: \"fancybox__track\",\n            slide: \"fancybox__slide\",\n          },\n\n          textSelection: true,\n          preload: this.option(\"preload\"),\n\n          friction: 0.88,\n\n          slides: this.items,\n          initialPage: this.options.startIndex,\n          slidesPerPage: 1,\n\n          infiniteX: this.option(\"infinite\"),\n          infiniteY: true,\n\n          l10n: this.option(\"l10n\"),\n\n          Dots: false,\n          Navigation: {\n            classNames: {\n              main: \"fancybox__nav\",\n              button: \"carousel__button\",\n\n              next: \"is-next\",\n              prev: \"is-prev\",\n            },\n          },\n\n          Panzoom: {\n            textSelection: true,\n\n            panOnlyZoomed: () => {\n              return (\n                this.Carousel && this.Carousel.pages && this.Carousel.pages.length < 2 && !this.option(\"dragToClose\")\n              );\n            },\n\n            lockAxis: () => {\n              if (this.Carousel) {\n                let rez = \"x\";\n\n                if (this.option(\"dragToClose\")) {\n                  rez += \"y\";\n                }\n\n                return rez;\n              }\n            },\n          },\n\n          on: {\n            \"*\": (name, ...details) => this.trigger(`Carousel.${name}`, ...details),\n            init: (carousel) => (this.Carousel = carousel),\n            createSlide: this.onCreateSlide,\n            settle: this.onSettle,\n          },\n        },\n\n        this.option(\"Carousel\")\n      )\n    );\n\n    if (this.option(\"dragToClose\")) {\n      this.Carousel.Panzoom.on({\n        // Stop further touch event handling if content is scaled\n        touchMove: this.onTouchMove,\n\n        // Update backdrop opacity depending on vertical distance\n        afterTransform: this.onTransform,\n\n        // Close instance if drag distance exceeds limit\n        touchEnd: this.onTouchEnd,\n      });\n    }\n\n    this.trigger(\"initCarousel\");\n\n    return this;\n  }\n\n  /**\n   * Process `createSlide` event to create caption element inside new slide\n   */\n  onCreateSlide(carousel, slide) {\n    let caption = slide.caption || \"\";\n\n    if (typeof this.options.caption === \"function\") {\n      caption = this.options.caption.call(this, this, this.Carousel, slide);\n    }\n\n    if (typeof caption === \"string\" && caption.length) {\n      const $caption = document.createElement(\"div\");\n      const id = `fancybox__caption_${this.id}_${slide.index}`;\n\n      $caption.className = \"fancybox__caption\";\n      $caption.innerHTML = caption;\n      $caption.setAttribute(\"id\", id);\n\n      slide.$caption = slide.$el.appendChild($caption);\n\n      slide.$el.classList.add(\"has-caption\");\n      slide.$el.setAttribute(\"aria-labelledby\", id);\n    }\n  }\n\n  /**\n   * Handle Carousel `settle` event\n   */\n  onSettle() {\n    if (this.option(\"autoFocus\")) {\n      this.focus();\n    }\n  }\n\n  /**\n   * Handle focus event\n   * @param {Event} event - Focus event\n   */\n  onFocus(event) {\n    if (!this.isTopmost()) {\n      return;\n    }\n\n    this.focus(event);\n  }\n\n  /**\n   * Handle click event on the container\n   * @param {Event} event - Click event\n   */\n  onClick(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    let eventTarget = event.composedPath()[0];\n\n    if (eventTarget.matches(\"[data-fancybox-close]\")) {\n      event.preventDefault();\n      Fancybox.close(false, event);\n\n      return;\n    }\n\n    if (eventTarget.matches(\"[data-fancybox-next]\")) {\n      event.preventDefault();\n      Fancybox.next();\n\n      return;\n    }\n\n    if (eventTarget.matches(\"[data-fancybox-prev]\")) {\n      event.preventDefault();\n      Fancybox.prev();\n\n      return;\n    }\n\n    const activeElement = document.activeElement;\n\n    if (activeElement) {\n      if (activeElement.closest(\"[contenteditable]\")) {\n        return;\n      }\n\n      if (!eventTarget.matches(FOCUSABLE_ELEMENTS)) {\n        activeElement.blur();\n      }\n    }\n\n    // Skip if clicked inside content area\n    if (eventTarget.closest(\".fancybox__content\")) {\n      return;\n    }\n\n    // Skip if text is selected\n    if (getSelection().toString().length) {\n      return;\n    }\n\n    if (this.trigger(\"click\", event) === false) {\n      return;\n    }\n\n    const action = this.option(\"click\");\n\n    switch (action) {\n      case \"close\":\n        this.close();\n        break;\n      case \"next\":\n        this.next();\n        break;\n    }\n  }\n\n  /**\n   * Handle panzoom `touchMove` event; Disable dragging if content of current slide is scaled\n   */\n  onTouchMove() {\n    const panzoom = this.getSlide().Panzoom;\n\n    return panzoom && panzoom.content.scale !== 1 ? false : true;\n  }\n\n  /**\n   * Handle panzoom `touchEnd` event; close when quick flick up/down is detected\n   * @param {Object} panzoom - Panzoom instance\n   */\n  onTouchEnd(panzoom) {\n    const distanceY = panzoom.dragOffset.y;\n\n    if (Math.abs(distanceY) >= 150 || (Math.abs(distanceY) >= 35 && panzoom.dragOffset.time < 350)) {\n      if (this.option(\"hideClass\")) {\n        this.getSlide().hideClass = `fancybox-throwOut${panzoom.content.y < 0 ? \"Up\" : \"Down\"}`;\n      }\n\n      this.close();\n    } else if (panzoom.lockAxis === \"y\") {\n      panzoom.panTo({ y: 0 });\n    }\n  }\n\n  /**\n   * Handle `afterTransform` event; change backdrop opacity based on current y position of panzoom\n   * @param {Object} panzoom - Panzoom instance\n   */\n  onTransform(panzoom) {\n    const $backdrop = this.$backdrop;\n\n    if ($backdrop) {\n      const yPos = Math.abs(panzoom.content.y);\n      const opacity = yPos < 1 ? \"\" : Math.max(0.33, Math.min(1, 1 - (yPos / panzoom.content.fitHeight) * 1.5));\n\n      this.$container.style.setProperty(\"--fancybox-ts\", opacity ? \"0s\" : \"\");\n      this.$container.style.setProperty(\"--fancybox-opacity\", opacity);\n    }\n  }\n\n  /**\n   * Handle `mousedown` event to mark that the mouse is in use\n   */\n  onMousedown() {\n    if (this.state === \"ready\") {\n      document.body.classList.add(\"is-using-mouse\");\n    }\n  }\n\n  /**\n   * Handle `keydown` event; trap focus\n   * @param {Event} event Keydown event\n   */\n  onKeydown(event) {\n    if (!this.isTopmost()) {\n      return;\n    }\n\n    document.body.classList.remove(\"is-using-mouse\");\n\n    const key = event.key;\n    const keyboard = this.option(\"keyboard\");\n\n    if (!keyboard || event.ctrlKey || event.altKey || event.shiftKey) {\n      return;\n    }\n\n    const target = event.composedPath()[0];\n\n    const classList = document.activeElement && document.activeElement.classList;\n    const isUIElement = classList && classList.contains(\"carousel__button\");\n\n    // Allow to close using Escape button\n    if (key !== \"Escape\" && !isUIElement) {\n      let ignoreElements =\n        event.target.isContentEditable ||\n        [\"BUTTON\", \"TEXTAREA\", \"OPTION\", \"INPUT\", \"SELECT\", \"VIDEO\"].indexOf(target.nodeName) !== -1;\n\n      if (ignoreElements) {\n        return;\n      }\n    }\n\n    if (this.trigger(\"keydown\", key, event) === false) {\n      return;\n    }\n\n    const action = keyboard[key];\n\n    if (typeof this[action] === \"function\") {\n      this[action]();\n    }\n  }\n\n  /**\n   * Get the active slide. This will be the first slide from the current page of the main carousel.\n   */\n  getSlide() {\n    const carousel = this.Carousel;\n\n    if (!carousel) return null;\n\n    const page = carousel.page === null ? carousel.option(\"initialPage\") : carousel.page;\n    const pages = carousel.pages || [];\n\n    if (pages.length && pages[page]) {\n      return pages[page].slides[0];\n    }\n\n    return null;\n  }\n\n  /**\n   * Place focus on the first focusable element inside current slide\n   * @param {Event} [event] - Focus event\n   */\n  focus(event) {\n    if (Fancybox.ignoreFocusChange) {\n      return;\n    }\n\n    if ([\"init\", \"closing\", \"customClosing\", \"destroy\"].indexOf(this.state) > -1) {\n      return;\n    }\n\n    const $container = this.$container;\n    const currentSlide = this.getSlide();\n    const $currentSlide = currentSlide.state === \"done\" ? currentSlide.$el : null;\n\n    // Skip if the DOM element that is currently in focus is already inside the current slide\n    if ($currentSlide && $currentSlide.contains(document.activeElement)) {\n      return;\n    }\n\n    if (event) {\n      event.preventDefault();\n    }\n\n    Fancybox.ignoreFocusChange = true;\n\n    const allFocusableElems = Array.from($container.querySelectorAll(FOCUSABLE_ELEMENTS));\n\n    let enabledElems = [];\n    let $firstEl;\n\n    for (let node of allFocusableElems) {\n      // Enable element if it's visible and\n      // is inside the current slide or is outside main carousel (for example, inside the toolbar)\n      const isNodeVisible = node.offsetParent;\n      const isNodeInsideCurrentSlide = $currentSlide && $currentSlide.contains(node);\n      const isNodeOutsideCarousel = !this.Carousel.$viewport.contains(node);\n\n      if (isNodeVisible && (isNodeInsideCurrentSlide || isNodeOutsideCarousel)) {\n        enabledElems.push(node);\n\n        if (node.dataset.origTabindex !== undefined) {\n          node.tabIndex = node.dataset.origTabindex;\n          node.removeAttribute(\"data-orig-tabindex\");\n        }\n\n        if (\n          node.hasAttribute(\"autoFocus\") ||\n          (!$firstEl && isNodeInsideCurrentSlide && !node.classList.contains(\"carousel__button\"))\n        ) {\n          $firstEl = node;\n        }\n      } else {\n        // Element is either hidden or is inside preloaded slide (e.g., not inside current slide, but next/prev)\n        node.dataset.origTabindex =\n          node.dataset.origTabindex === undefined ? node.getAttribute(\"tabindex\") : node.dataset.origTabindex;\n\n        node.tabIndex = -1;\n      }\n    }\n\n    if (!event) {\n      if (this.option(\"autoFocus\") && $firstEl) {\n        setFocusOn($firstEl);\n      } else if (enabledElems.indexOf(document.activeElement) < 0) {\n        setFocusOn($container);\n      }\n    } else {\n      if (enabledElems.indexOf(event.target) > -1) {\n        this.lastFocus = event.target;\n      } else {\n        if (this.lastFocus === $container) {\n          setFocusOn(enabledElems[enabledElems.length - 1]);\n        } else {\n          setFocusOn($container);\n        }\n      }\n    }\n\n    this.lastFocus = document.activeElement;\n\n    Fancybox.ignoreFocusChange = false;\n  }\n\n  /**\n   * Hide vertical page scrollbar and adjust right padding value of `body` element to prevent content from shifting\n   * (otherwise the `body` element may become wider and the content may expand horizontally).\n   */\n  hideScrollbar() {\n    if (!canUseDOM) {\n      return;\n    }\n\n    const scrollbarWidth = window.innerWidth - document.documentElement.getBoundingClientRect().width;\n    const id = \"fancybox-style-noscroll\";\n\n    let $style = document.getElementById(id);\n\n    if ($style) {\n      return;\n    }\n\n    if (scrollbarWidth > 0) {\n      $style = document.createElement(\"style\");\n\n      $style.id = id;\n      $style.type = \"text/css\";\n      $style.innerHTML = `.compensate-for-scrollbar {padding-right: ${scrollbarWidth}px;}`;\n\n      document.getElementsByTagName(\"head\")[0].appendChild($style);\n\n      document.body.classList.add(\"compensate-for-scrollbar\");\n    }\n  }\n\n  /**\n   * Stop hiding vertical page scrollbar\n   */\n  revealScrollbar() {\n    document.body.classList.remove(\"compensate-for-scrollbar\");\n\n    const el = document.getElementById(\"fancybox-style-noscroll\");\n\n    if (el) {\n      el.remove();\n    }\n  }\n\n  /**\n   * Remove content for given slide\n   * @param {Object} slide - Carousel slide\n   */\n  clearContent(slide) {\n    // * Clear previously added content and class name\n    this.Carousel.trigger(\"removeSlide\", slide);\n\n    if (slide.$content) {\n      slide.$content.remove();\n      slide.$content = null;\n    }\n\n    if (slide.$closeButton) {\n      slide.$closeButton.remove();\n      slide.$closeButton = null;\n    }\n\n    if (slide._className) {\n      slide.$el.classList.remove(slide._className);\n    }\n  }\n\n  /**\n   * Set new content for given slide\n   * @param {Object} slide - Carousel slide\n   * @param {HTMLElement|String} html - HTML element or string containing HTML code\n   * @param {Object} [opts] - Options\n   */\n  setContent(slide, html, opts = {}) {\n    let $content;\n\n    const $el = slide.$el;\n\n    if (html instanceof HTMLElement) {\n      if ([\"img\", \"iframe\", \"video\", \"audio\"].indexOf(html.nodeName.toLowerCase()) > -1) {\n        $content = document.createElement(\"div\");\n        $content.appendChild(html);\n      } else {\n        $content = html;\n      }\n    } else {\n      const $fragment = document.createRange().createContextualFragment(html);\n\n      $content = document.createElement(\"div\");\n      $content.appendChild($fragment);\n    }\n\n    if (slide.filter && !slide.error) {\n      $content = $content.querySelector(slide.filter);\n    }\n\n    if (!($content instanceof Element)) {\n      this.setError(slide, \"{{ELEMENT_NOT_FOUND}}\");\n\n      return;\n    }\n\n    // * Add class name indicating content type, for example `has-image`\n    slide._className = `has-${opts.suffix || slide.type || \"unknown\"}`;\n\n    $el.classList.add(slide._className);\n\n    // * Set content\n    $content.classList.add(\"fancybox__content\");\n\n    // Make sure that content is not hidden and will be visible\n    if ($content.style.display === \"none\" || getComputedStyle($content).getPropertyValue(\"display\") === \"none\") {\n      $content.style.display = slide.display || this.option(\"defaultDisplay\") || \"flex\";\n    }\n\n    if (slide.id) {\n      $content.setAttribute(\"id\", slide.id);\n    }\n\n    slide.$content = $content;\n\n    $el.prepend($content);\n\n    this.manageCloseButton(slide);\n\n    if (slide.state !== \"loading\") {\n      this.revealContent(slide);\n    }\n\n    return $content;\n  }\n\n  /**\n   * Create close button if needed\n   * @param {Object} slide\n   */\n  manageCloseButton(slide) {\n    const position = slide.closeButton === undefined ? this.option(\"closeButton\") : slide.closeButton;\n\n    if (!position || (position === \"top\" && this.$closeButton)) {\n      return;\n    }\n\n    const $btn = document.createElement(\"button\");\n\n    $btn.classList.add(\"carousel__button\", \"is-close\");\n    $btn.setAttribute(\"title\", this.options.l10n.CLOSE);\n    $btn.innerHTML = this.option(\"template.closeButton\");\n\n    $btn.addEventListener(\"click\", (e) => this.close(e));\n\n    if (position === \"inside\") {\n      // Remove existing one to avoid scope issues\n      if (slide.$closeButton) {\n        slide.$closeButton.remove();\n      }\n\n      slide.$closeButton = slide.$content.appendChild($btn);\n    } else {\n      this.$closeButton = this.$container.insertBefore($btn, this.$container.firstChild);\n    }\n  }\n\n  /**\n   * Make content visible for given slide and optionally start CSS animation\n   * @param {Object} slide - Carousel slide\n   */\n  revealContent(slide) {\n    this.trigger(\"reveal\", slide);\n\n    slide.$content.style.visibility = \"\";\n\n    // Add CSS class name that reveals content (default animation is \"fadeIn\")\n    let showClass = false;\n\n    if (\n      !(\n        slide.error ||\n        slide.state === \"loading\" ||\n        this.Carousel.prevPage !== null ||\n        slide.index !== this.options.startIndex\n      )\n    ) {\n      showClass = slide.showClass === undefined ? this.option(\"showClass\") : slide.showClass;\n    }\n\n    if (!showClass) {\n      this.done(slide);\n\n      return;\n    }\n\n    slide.state = \"animating\";\n\n    this.animateCSS(slide.$content, showClass, () => {\n      this.done(slide);\n    });\n  }\n\n  /**\n   * Add class name to given HTML element and wait for `animationend` event to execute callback\n   * @param {HTMLElement} $el\n   * @param {String} className\n   * @param {Function} callback - A callback to run\n   */\n  animateCSS($element, className, callback) {\n    if ($element) {\n      $element.dispatchEvent(new CustomEvent(\"animationend\", { bubbles: true, cancelable: true }));\n    }\n\n    if (!$element || !className) {\n      if (typeof callback === \"function\") {\n        callback();\n      }\n\n      return;\n    }\n\n    const handleAnimationEnd = function (event) {\n      if (event.currentTarget === this) {\n        $element.removeEventListener(\"animationend\", handleAnimationEnd);\n\n        if (callback) {\n          callback();\n        }\n\n        $element.classList.remove(className);\n      }\n    };\n\n    $element.addEventListener(\"animationend\", handleAnimationEnd);\n    $element.classList.add(className);\n  }\n\n  /**\n   * Mark given slide as `done`, e.g., content is loaded and displayed completely\n   * @param {Object} slide - Carousel slide\n   */\n  done(slide) {\n    slide.state = \"done\";\n\n    this.trigger(\"done\", slide);\n\n    // Trigger focus for current slide (and ignore preloaded slides)\n    const currentSlide = this.getSlide();\n\n    if (currentSlide && slide.index === currentSlide.index && this.option(\"autoFocus\")) {\n      this.focus();\n    }\n  }\n\n  /**\n   * Set error message as slide content\n   * @param {Object} slide - Carousel slide\n   * @param {String} message - Error message, can contain HTML code and template variables\n   */\n  setError(slide, message) {\n    slide.error = message;\n\n    this.hideLoading(slide);\n    this.clearContent(slide);\n\n    // Create new content\n    const div = document.createElement(\"div\");\n    div.classList.add(\"fancybox-error\");\n    div.innerHTML = this.localize(message || \"<p>{{ERROR}}</p>\");\n\n    this.setContent(slide, div, { suffix: \"error\" });\n  }\n\n  /**\n   * Create loading indicator inside given slide\n   * @param {Object} slide - Carousel slide\n   */\n  showLoading(slide) {\n    slide.state = \"loading\";\n\n    slide.$el.classList.add(\"is-loading\");\n\n    let $spinner = slide.$el.querySelector(\".fancybox__spinner\");\n\n    if ($spinner) {\n      return;\n    }\n\n    $spinner = document.createElement(\"div\");\n\n    $spinner.classList.add(\"fancybox__spinner\");\n    $spinner.innerHTML = this.option(\"template.spinner\");\n\n    $spinner.addEventListener(\"click\", () => {\n      if (!this.Carousel.Panzoom.velocity) this.close();\n    });\n\n    slide.$el.prepend($spinner);\n  }\n\n  /**\n   * Remove loading indicator from given slide\n   * @param {Object} slide - Carousel slide\n   */\n  hideLoading(slide) {\n    const $spinner = slide.$el && slide.$el.querySelector(\".fancybox__spinner\");\n\n    if ($spinner) {\n      $spinner.remove();\n\n      slide.$el.classList.remove(\"is-loading\");\n    }\n\n    if (slide.state === \"loading\") {\n      this.trigger(\"load\", slide);\n\n      slide.state = \"ready\";\n    }\n  }\n\n  /**\n   * Slide carousel to next page\n   */\n  next() {\n    const carousel = this.Carousel;\n\n    if (carousel && carousel.pages.length > 1) {\n      carousel.slideNext();\n    }\n  }\n\n  /**\n   * Slide carousel to previous page\n   */\n  prev() {\n    const carousel = this.Carousel;\n\n    if (carousel && carousel.pages.length > 1) {\n      carousel.slidePrev();\n    }\n  }\n\n  /**\n   * Slide carousel to selected page with optional parameters\n   * Examples:\n   *    Fancybox.getInstance().jumpTo(2);\n   *    Fancybox.getInstance().jumpTo(3, {friction: 0})\n   * @param  {...any} args - Arguments for Carousel `slideTo` method\n   */\n  jumpTo(...args) {\n    if (this.Carousel) this.Carousel.slideTo(...args);\n  }\n\n  /**\n   * Check if current instance is trying to close or is already closed\n   * @returns {Boolean}\n   */\n  isClosing() {\n    return [\"closing\", \"customClosing\", \"destroy\"].includes(this.state);\n  }\n\n  /**\n   * Check if the current instance is not blocked by another instance\n   * @returns {Boolean}\n   */\n  isTopmost() {\n    return Fancybox.getInstance().id == this.id;\n  }\n\n  /**\n   * Start closing the current instance\n   * @param {Event} [event] - Optional click event\n   */\n  close(event) {\n    if (event) event.preventDefault();\n\n    // First, stop further execution if this instance is already closing\n    // (this can happen if, for example, user clicks close button multiple times really fast)\n    if (this.isClosing()) {\n      return;\n    }\n\n    // Allow callbacks and/or plugins to prevent closing\n    if (this.trigger(\"shouldClose\", event) === false) {\n      return;\n    }\n\n    this.state = \"closing\";\n\n    this.Carousel.Panzoom.destroy();\n\n    this.detachEvents();\n\n    this.trigger(\"closing\", event);\n\n    if (this.state === \"destroy\") {\n      return;\n    }\n\n    // Trigger default CSS closing animation for backdrop and interface elements\n    this.$container.setAttribute(\"aria-hidden\", \"true\");\n\n    this.$container.classList.add(\"is-closing\");\n\n    // Clear inactive slides\n    const currentSlide = this.getSlide();\n\n    this.Carousel.slides.forEach((slide) => {\n      if (slide.$content && slide.index !== currentSlide.index) {\n        this.Carousel.trigger(\"removeSlide\", slide);\n      }\n    });\n\n    // Start default closing animation\n    if (this.state === \"closing\") {\n      const hideClass = currentSlide.hideClass === undefined ? this.option(\"hideClass\") : currentSlide.hideClass;\n\n      this.animateCSS(\n        currentSlide.$content,\n        hideClass,\n        () => {\n          this.destroy();\n        },\n        true\n      );\n    }\n  }\n\n  /**\n   * Clean up after closing fancybox\n   */\n  destroy() {\n    if (this.state === \"destroy\") {\n      return;\n    }\n\n    this.state = \"destroy\";\n\n    this.trigger(\"destroy\");\n\n    const $trigger = this.option(\"placeFocusBack\") ? this.option(\"triggerTarget\", this.getSlide().$trigger) : null;\n\n    // Destroy Carousel and then detach plugins;\n    // * Note: this order allows plugins to receive `removeSlide` event\n    this.Carousel.destroy();\n\n    this.detachPlugins();\n\n    this.Carousel = null;\n\n    this.options = {};\n    this.events = {};\n\n    this.$container.remove();\n\n    this.$container = this.$backdrop = this.$carousel = null;\n\n    if ($trigger) {\n      setFocusOn($trigger);\n    }\n\n    instances.delete(this.id);\n\n    const nextInstance = Fancybox.getInstance();\n\n    if (nextInstance) {\n      nextInstance.focus();\n      return;\n    }\n\n    document.documentElement.classList.remove(\"with-fancybox\");\n    document.body.classList.remove(\"is-using-mouse\");\n\n    this.revealScrollbar();\n  }\n\n  /**\n   * Create new Fancybox instance with provided options\n   * Example:\n   *   Fancybox.show([{ src : 'https://lipsum.app/id/1/300x225' }]);\n   * @param {Array} items - Gallery items\n   * @param {Object} [options] - Optional custom options\n   * @returns {Object} Fancybox instance\n   */\n  static show(items, options = {}) {\n    return new Fancybox(items, options);\n  }\n\n  /**\n   * Starts Fancybox if event target matches any opener or target is `trigger element`\n   * @param {Event} event - Click event\n   * @param {Object} [options] - Optional custom options\n   */\n  static fromEvent(event, options = {}) {\n    //  Allow other scripts to prevent starting fancybox on click\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    // Don't run if right-click\n    if (event.button && event.button !== 0) {\n      return;\n    }\n\n    // Ignore command/control + click\n    if (event.ctrlKey || event.metaKey || event.shiftKey) {\n      return;\n    }\n\n    const origTarget = event.composedPath()[0];\n    let eventTarget = origTarget;\n\n    // Support `trigger` element, e.g., start fancybox from different DOM element, for example,\n    // to have one preview image for hidden image gallery\n    let triggerGroupName;\n\n    if (\n      eventTarget.matches(\"[data-fancybox-trigger]\") ||\n      (eventTarget = eventTarget.closest(\"[data-fancybox-trigger]\"))\n    ) {\n      options.triggerTarget = eventTarget;\n      triggerGroupName = eventTarget && eventTarget.dataset && eventTarget.dataset.fancyboxTrigger;\n    }\n\n    if (triggerGroupName) {\n      const triggerItems = document.querySelectorAll(`[data-fancybox=\"${triggerGroupName}\"]`);\n      const triggerIndex = parseInt(eventTarget.dataset.fancyboxIndex, 10) || 0;\n\n      eventTarget = triggerItems.length ? triggerItems[triggerIndex] : eventTarget;\n    }\n\n    // * Try to find matching openener\n    let matchingOpener;\n    let target;\n\n    Array.from(Fancybox.openers.keys())\n      .reverse()\n      .some((opener) => {\n        target = eventTarget || origTarget;\n\n        let found = false;\n\n        try {\n          if (target instanceof Element && (typeof opener === \"string\" || opener instanceof String)) {\n            // Chain closest() to event.target to find and return the parent element,\n            // regardless if clicking on the child elements (icon, label, etc)\n            found = target.matches(opener) || (target = target.closest(opener));\n          }\n        } catch (error) {}\n\n        if (found) {\n          event.preventDefault();\n          matchingOpener = opener;\n          return true;\n        }\n\n        return false;\n      });\n\n    let rez = false;\n\n    if (matchingOpener) {\n      options.event = event;\n      options.target = target;\n\n      target.origTarget = origTarget;\n\n      rez = Fancybox.fromOpener(matchingOpener, options);\n\n      // Check if the mouse is being used\n      // Waiting for better browser support for `:focus-visible` -\n      // https://drafts.csswg.org/selectors-4/#the-focus-visible-pseudo\n      const nextInstance = Fancybox.getInstance();\n\n      if (nextInstance && nextInstance.state === \"ready\" && event.detail) {\n        document.body.classList.add(\"is-using-mouse\");\n      }\n    }\n\n    return rez;\n  }\n\n  /**\n   * Starts Fancybox using selector\n   * @param {String} opener - Valid CSS selector string\n   * @param {Object} [options] - Optional custom options\n   */\n  static fromOpener(opener, options = {}) {\n    // Callback function called once for each group element that\n    // 1) converts data attributes to boolean or JSON\n    // 2) removes values that could cause issues\n    const mapCallback = function (el) {\n      const falseValues = [\"false\", \"0\", \"no\", \"null\", \"undefined\"];\n      const trueValues = [\"true\", \"1\", \"yes\"];\n\n      const dataset = Object.assign({}, el.dataset);\n      const options = {};\n\n      for (let [key, value] of Object.entries(dataset)) {\n        if (key === \"fancybox\") {\n          continue;\n        }\n\n        if (key === \"width\" || key === \"height\") {\n          options[`_${key}`] = value;\n        } else if (typeof value === \"string\" || value instanceof String) {\n          if (falseValues.indexOf(value) > -1) {\n            options[key] = false;\n          } else if (trueValues.indexOf(options[key]) > -1) {\n            options[key] = true;\n          } else {\n            try {\n              options[key] = JSON.parse(value);\n            } catch (e) {\n              options[key] = value;\n            }\n          }\n        } else {\n          options[key] = value;\n        }\n      }\n\n      if (el instanceof Element) {\n        options.$trigger = el;\n      }\n\n      return options;\n    };\n\n    let items = [],\n      index = options.startIndex || 0,\n      target = options.target || null;\n\n    // Get options\n    // ===\n    options = extend({}, options, Fancybox.openers.get(opener));\n\n    // Get matching nodes\n    // ===\n    const groupAll = options.groupAll === undefined ? false : options.groupAll;\n\n    const groupAttr = options.groupAttr === undefined ? \"data-fancybox\" : options.groupAttr;\n    const groupValue = groupAttr && target ? target.getAttribute(`${groupAttr}`) : \"\";\n\n    if (!target || groupValue || groupAll) {\n      const $root = options.root || (target ? target.getRootNode() : document.body);\n\n      items = [].slice.call($root.querySelectorAll(opener));\n    }\n\n    if (target && !groupAll) {\n      if (groupValue) {\n        items = items.filter((el) => el.getAttribute(`${groupAttr}`) === groupValue);\n      } else {\n        items = [target];\n      }\n    }\n\n    if (!items.length) {\n      return false;\n    }\n\n    // Exit if current instance is triggered from the same element\n    // ===\n    const currentInstance = Fancybox.getInstance();\n\n    if (currentInstance && items.indexOf(currentInstance.options.$trigger) > -1) {\n      return false;\n    }\n\n    // Start Fancybox\n    // ===\n\n    // Get index of current item in the gallery\n    index = target ? items.indexOf(target) : index;\n\n    // Convert items in a format supported by fancybox\n    items = items.map(mapCallback);\n\n    // * Create new fancybox instance\n    return new Fancybox(\n      items,\n      extend({}, options, {\n        startIndex: index,\n        $trigger: target,\n      })\n    );\n  }\n\n  /**\n   * Attach a click handler function that starts Fancybox to the selected items, as well as to all future matching elements.\n   * @param {String} selector - Selector that should match trigger elements\n   * @param {Object} [options] - Custom options\n   */\n  static bind(selector, options = {}) {\n    function attachClickEvent() {\n      document.body.addEventListener(\"click\", Fancybox.fromEvent, false);\n    }\n\n    if (!canUseDOM) {\n      return;\n    }\n\n    if (!Fancybox.openers.size) {\n      if (/complete|interactive|loaded/.test(document.readyState)) {\n        attachClickEvent();\n      } else {\n        document.addEventListener(\"DOMContentLoaded\", attachClickEvent);\n      }\n    }\n\n    Fancybox.openers.set(selector, options);\n  }\n\n  /**\n   * Remove the click handler that was attached with `bind()`\n   * @param {String} selector - A selector which should match the one originally passed to .bind()\n   */\n  static unbind(selector) {\n    Fancybox.openers.delete(selector);\n\n    if (!Fancybox.openers.size) {\n      Fancybox.destroy();\n    }\n  }\n\n  /**\n   * Immediately destroy all instances (without closing animation) and clean up all bindings..\n   */\n  static destroy() {\n    let fb;\n\n    while ((fb = Fancybox.getInstance())) {\n      fb.destroy();\n    }\n\n    Fancybox.openers = new Map();\n\n    document.body.removeEventListener(\"click\", Fancybox.fromEvent, false);\n  }\n\n  /**\n   * Retrieve instance by identifier or the top most instance, if identifier is not provided\n   * @param {String|Numeric} [id] - Optional instance identifier\n   */\n  static getInstance(id) {\n    if (id) {\n      return instances.get(id);\n    }\n\n    const instance = Array.from(instances.values())\n      .reverse()\n      .find((instance) => {\n        if (!instance.isClosing()) {\n          return instance;\n        }\n\n        return false;\n      });\n\n    return instance || null;\n  }\n\n  /**\n   * Close all or topmost currently active instance.\n   * @param {boolean} [all] - All or only topmost active instance\n   * @param {any} [arguments] - Optional data\n   */\n  static close(all = true, args) {\n    if (all) {\n      for (const instance of instances.values()) {\n        instance.close(args);\n      }\n    } else {\n      const instance = Fancybox.getInstance();\n\n      if (instance) {\n        instance.close(args);\n      }\n    }\n  }\n\n  /**\n   * Slide topmost currently active instance to next page\n   */\n  static next() {\n    const instance = Fancybox.getInstance();\n\n    if (instance) {\n      instance.next();\n    }\n  }\n\n  /**\n   * Slide topmost currently active instance to previous page\n   */\n  static prev() {\n    const instance = Fancybox.getInstance();\n\n    if (instance) {\n      instance.prev();\n    }\n  }\n}\n\n// Expose version\nFancybox.version = \"__VERSION__\";\n\n// Expose defaults\nFancybox.defaults = defaults;\n\n// Expose openers\nFancybox.openers = new Map();\n\n// Add default plugins\nFancybox.Plugins = Plugins;\n\n// Auto init with default options\nFancybox.bind(\"[data-fancybox]\");\n\n// Prepare plugins\nfor (const [key, Plugin] of Object.entries(Fancybox.Plugins || {})) {\n  if (typeof Plugin.create === \"function\") {\n    Plugin.create(Fancybox);\n  }\n}\n\nexport { Fancybox };\n","export default {\r\n  CLOSE: \"Close\",\r\n  NEXT: \"Next\",\r\n  PREV: \"Previous\",\r\n  MODAL: \"You can close this modal content with the ESC key\",\r\n  ERROR: \"Something Went Wrong, Please Try Again Later\",\r\n  IMAGE_ERROR: \"Image Not Found\",\r\n  ELEMENT_NOT_FOUND: \"HTML Element Not Found\",\r\n  AJAX_NOT_FOUND: \"Error Loading AJAX : Not Found\",\r\n  AJAX_FORBIDDEN: \"Error Loading AJAX : Forbidden\",\r\n  IFRAME_ERROR: \"Error Loading Page\",\r\n  TOGGLE_ZOOM: \"Toggle zoom level\",\r\n  TOGGLE_THUMBS: \"Toggle thumbnails\",\r\n  TOGGLE_SLIDESHOW: \"Toggle slideshow\",\r\n  TOGGLE_FULLSCREEN: \"Toggle full-screen mode\",\r\n  DOWNLOAD: \"Download\",\r\n};\r\n","import { Fancybox } from '@fancyapps/ui/src/Fancybox/Fancybox.js';\n\nFancybox.bind('[data-fancybox=\"single\"]', {\n  groupAttr: false,\n});\n"],"names":["$bfd35158e31ac20e$export$53b83ca8eaab0383","obj","constructor","Object","prototype","toString","call","$2e60a25320e39cdf$export$8b58be045bf06082","args","deep","shift","result","Error","extenders","slice","len","length","i","extender","key","hasOwnProperty","value","Array","isArray","base","$97076b09dd502a27$export$71594e8a50f746f4","window","document","createElement","$c0ba77432e9b82a2$var$preventScrollSupported","$c0ba77432e9b82a2$export$6a59c51278cd7bb1","$c0ba77432e9b82a2$export$5a51bc2ba3a0d25","node","focus","preventScroll","setActive","scrollTop","pageXOffset","body","scrollLeft","pageYOffset","scrollTo","top","left","behavior","e","$0f3c6e405f60aa30$export$ef88aa0d34c34520","option","fallback","rest","String","path","this","options","split","reduce","prev","curr","undefined","localize","str","params","replace","match","subkey","rez","toLowerCase","substring","index","join","on","name","callback","entries","forEach","item","listeners","events","indexOf","push","once","listener","details","off","_","splice","trigger","listener1","attachPlugins","plugins","newPlugins","Plugin","defaults","key1","plugin","attach","assign","detachPlugins","detach","type","$35c98288d6c334d4$export$2077e0241d6afd3c","precision","parseFloat","Math","round","Number","EPSILON","$11392641aadb1a2a$export$2bb74740c4e19def","Element","__Panzoom","overflowY","getComputedStyle","overflowX","vertical","abs","scrollHeight","clientHeight","horizontal","scrollWidth","clientWidth","$11392641aadb1a2a$export$988b38dbf6859d61","parentNode","$a41650b7895a0bb6$export$9caf76241ca21a11","ResizeObserver","observe","el","observables","some","observable","newObservable","size","height","width","unobserve","filter","disconnect","check","changedEntries","currentHeight","currentWidth","map","requestAnimationFrame","boundCheck","bind","$746ca33a09d68912$var$Pointer","nativePointer","id","self","Touch","identifier","pageX","pageY","clientX","clientY","$746ca33a09d68912$export$79376507b09a66f","a","b","sqrt","$746ca33a09d68912$export$b820caf342892892","$746ca33a09d68912$export$602faa26dc074936","stop","_element","removeEventListener","_pointerStart","passive","_touchStart","_move","_touchEnd","_pointerEnd","_triggerPointerStart","pointer","event","_startCallback","currentPointers","startPointers","start","move","end","buttons","button","p","addEventListener","touch","from","changedTouches","previousPointers","changedPointers","$746ca33a09d68912$var$isTouchEvent","t","trackedChangedPointers","findIndex","_moveCallback","_triggerPointerEnd","_endCallback","$027cf5305e190dba$export$5a4c7d2802d310f9","element","x","y","nodes","childNodes","range","createRange","nodeType","Node","TEXT_NODE","selectNodeContents","rect","getBoundingClientRect","right","bottom","$af9fb750ab54033a$export$36c2abee46ce2f83","elem","max","naturalHeight","baseVal","offsetHeight","$af9fb750ab54033a$export$26b8a639408dbbb6","srcWidth","srcHeight","maxWidth","maxHeight","ratio","min","$c0e2b244f1c707be$var$defaults","zoom","pinchToZoom","panOnlyZoomed","lockAxis","friction","decelFriction","zoomFriction","bounceForce","baseScale","minScale","maxScale","step","textSelection","click","wheel","wheelFactor","wheelLimit","draggableClass","draggingClass","$c0e2b244f1c707be$export$b704d075ddd20210","initLayout","$container","HTMLElement","$content","querySelector","$viewport","classList","add","append","appendChild","resetValues","updateRate","test","navigator","userAgent","container","viewport","content","origWidth","origHeight","scale","transform","resetDragPosition","onLoad","updateMetrics","panTo","onClick","defaultPrevented","activeElement","closest","getSelection","target","hasAttribute","stopPropagation","getClientRects","state","dragPosition","midPoint","dragStart","preventDefault","zoomWithClick","onWheel","zoomWithWheel","changedDelta","delta","deltaY","deltaX","wheelDelta","detail","newScale","zoomTo","toggleZoom","attachEvents","initObserver","pointerTracker","velocity","composedPath","nodeName","time","Date","now","prevMidpoint","newMidpoint","panX","panY","prevDistance","newDistance","scaleDiff","dragOffset","axisToLock","angle","atan2","PI","stopImmediatePropagation","startPoint","xPos","yPos","getZoomDelta","setDragResistance","startAnimation","_dragOffset","recalculateTransform","remove","last","resizeObserver","updateTimer","setTimeout","isAnimating","endAnimation","silently","contentIsImage","HTMLImageElement","contentIsZoomable","shouldResizeParent","naturalWidth","offsetWidth","style","contentRect","viewportRect","containerRect","viewportWidth","viewportHeight","viewportStyles","paddingLeft","paddingRight","paddingTop","paddingBottom","fitWidth","fitHeight","isZoomable","zoomIn","zoomOut","props","currentScale","percentXInCurrentBox","percentYInCurrentBox","ignoreBounds","boundX","boundY","getBounds","to","rAF","cancelAnimationFrame","animate","setEdgeForce","setDragForce","setTransform","pastLeft","pastRight","pastTop","pastBottom","force","restX","restY","bound","distance","final","handleCursor","detachEvents","destroy","clearTimeout","super","methodName","Plugins","version","$d7319af613f18d0a$export$de363e709c412c8a","func","limit","lastCall","getTime","$2f665a12a0f531a0$export$b8a61e5c71402559","carousel","createButton","$btn","setAttribute","toUpperCase","classNames","innerHTML","build","$next","$prev","onRefresh","pageCount","pages","elemDimWidth","wrapDimWidth","isInteger","cleanup","removeAttribute","page","prevTpl","nextTpl","main","next","$6c9bf2576103359c$export$2ae15352e0a80063","addAsTargetFor","nav","addAsNavFor","initialSlide","initialPage","onNavReady","onNavCreateSlide","onNavClick","onTargetChange","panzoom","clickedNavSlide","selectedNavIndex","parseInt","dataset","selectedSyncPage","findPageForSlide","slideTo","markSelectedSlide","slide","selectedIndex","targetIndex","indexes","selectedNavPage","slides","$el","slide1","sync","Sync","$10ab92cec0d5a75a$export$c203ca0aafe4939a","buildList","$list","removeList","removeChild","rebuildDots","listExists","pagesCount","dotCount","children","lastChild","$dot","code","nextSibling","previousSibling","setActiveDot","$activeDot","onChange","change","refresh","$aa0fda34e3ae17cd$var$defaults","preload","slidesPerPage","center","infinite","fill","dragFree","prefix","track","slideSelected","l10n","NEXT","PREV","GOTO","$aa0fda34e3ae17cd$export$144901db2ea8e967","pageIndex","prevPage","prevPageIndex","initSlides","$track","manageSlideVisiblity","initPanzoom","querySelectorAll","isDom","lastSlideWidth","contentWidth","slideWidth","getSlideMetrics","currentPage","shouldCenter","shouldFill","sum","page2","page1","updatePanzoom","firstSlide","isTestEl","visibility","customClass","prepend","currentStyle","marginLeft","marginRight","find","page3","setPage","Panzoom","wrapInner","resizeParent","centerOnStart","afterUpdate","updatePage","beforeTransform","onBeforeTransform","touchEnd","onTouchEnd","currentX","getPropertyValue","leftBoundary","rightBoundary","hasDiff","insideCurrentInterval","insidePrevInterval","insideNextInterval","createSlideEl","removeSlideEl","updatedX","nextIndex","nextPos","markSelectedSlides","curentIndex","lazySrc1","srcset","lazySrcset","lazySrc","src","backgroundImage","div","html","allElelements","goal","refIndex","insertBefore","refSlide","selectedClass","attr","contains","manageInfiniteTrack","isFlipped","nextPageIndex","getPageFromPosition","slideToClosest","interval","floor","slide2","toClosest","nextPosition","$53dcd4e13abe2049$var$defaults","minSlideCount","minScreenHeight","autoStart","Carousel","tpl","$53dcd4e13abe2049$export$73e055b807a6709","onPrepare","getSlides","fancybox","onClosing","onKeydown","toggle","$carousel","Dots","Navigation","items","thumb","hide","show","display","prepare","closing","keydown","$74f87f5b5f8a278c$var$buildURLQuery","url","URL","URLSearchParams","search","set","matches","$74f87f5b5f8a278c$var$defaults","video","autoplay","youtube","autohide","fs","rel","hd","wmode","enablejsapi","html5","vimeo","show_title","show_byline","show_portrait","fullscreen","html5video","format","$74f87f5b5f8a278c$export$13f9d3c4397c4713","onInit","processType","videoId","encodeURIComponent","vendor","charAt","_width","_height","onReady","setContent","getSlide","playVideo","onCreateSlide","loadInlineContent","tmp","getElementById","$placeHolder","cloneNode","attrId","getAttribute","setError","loadAjaxContent","xhr","XMLHttpRequest","showLoading","onreadystatechange","readyState","DONE","hideLoading","status","responseText","data","ajax","open","setRequestHeader","send","loadIframeContent","$iframe","className","resizeIframe","onerror","onload","isFirstLoad","isReady","revealContent","setAspectRatio","maxRatio","width_","height_","autoSize","$parent","parentStyle","compStyles","paddingX","paddingY","contentWindow","$html","getElementsByTagName","$body","overflow","flex","error","newStyle","poster","onSelectSlide","$video","promise","play","then","catch","muted","err","poller","command","method","postMessage","JSON","stringify","onUnselectSlide","pause","onRemoveSlide","abort","$closeButton","onMessage","parse","origin","getElementsByClassName","source","ex","init","ready","$f74b7916fa7bc0d6$export$3e431a229df88919","clickTimer","$image","canZoom","imageFit","onImageStatusChange","alt","draggable","sizes","shouldWrap","$wrap","complete","initSlidePanzoom","done","startIndex","getZoomInfo","thumbRect","$thumb","thumbWidth","thumbHeight","contentHeight","shiftedTop","shiftedLeft","opacity","visualViewport","visibleTopLeft","elementFromPoint","visibleBottomRight","Panzoom1","Panzoom2","$caption","animatePosition","zoomOutClass","zoomInClass","clickAction","touchIsEnabled","close","process","action","dblclickAction","canZoomInClass","canZoomOutClass","zoomOpacity","ignoreCoveredThumbnail","doubleClick","fit","wrap","$368ceaaa8552dda6$export$ab85ecd77ce6a5cd","timer","firstRun","currentSlide","currentHash","hash","newHash","slug","$trigger","origHash","history","title","location","pathname","hasCreatedHistory","hasSilentClose","replaceState","static","Fancybox","getInstance","Hash","getParsedURL","selectedElem","dispatchEvent","CustomEvent","bubbles","cancelable","groupElems","instance","startFromUrl","proceed","onHashChange","substr","pop","initCarousel","$5c3de6cebd770467$export$159cd03be7087f39","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","activate","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","deactivate","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","$cba53c876457adba$export$9e844f8a53211d5","isActive","active","setTimer","delay","jumpTo","$progress","transitionDuration","clearTimer","handleVisibilityChange","$8d9279010f90a5a6$var$defaults","autoEnable","counter","position","class","tabindex","label","Slideshow","thumbs","Thumbs","hasImage","closeButton","update","slideshow","onFsChange","prop","$svg","all_groups","all_items","includes","fullscreenEnabled","fullScreen","group","idx","cnt","downloadSrc","$el1","$el2","$el3","$el4","onDone","$6e3d0a6414b202f7$export$c203ca0aafe4939a","startY","onResize","updateViewport","onTouchstart","onTouchmove","offsetLeft","offsetTop","touches","screenY","innerWidth","documentElement","curY","isAtTop","isAtBottom","pendingUpdate","$8d9279010f90a5a6$export$4c260019440d418f","$14464cd073806874$var$defaults","showClass","hideClass","animated","hideScrollbar","parentEl","mainClass","autoFocus","trapFocus","placeFocusBack","dragToClose","keyboard","Escape","Delete","Backspace","PageUp","PageDown","ArrowUp","ArrowDown","ArrowRight","ArrowLeft","template","spinner","CLOSE","MODAL","ERROR","IMAGE_ERROR","ELEMENT_NOT_FOUND","AJAX_NOT_FOUND","AJAX_FORBIDDEN","IFRAME_ERROR","TOGGLE_ZOOM","TOGGLE_THUMBS","TOGGLE_SLIDESHOW","TOGGLE_FULLSCREEN","DOWNLOAD","$14464cd073806874$var$instances","Map","$14464cd073806874$var$called","$14464cd073806874$export$cb45b08d97cdc4fd","bindHandlers","onMousedown","onFocus","$root","mainTemplate","insertAdjacentHTML","onscroll","role","tabIndex","$backdrop","setItems","currentSrc","origTarget","caption","infiniteX","infiniteY","createSlide","settle","onSettle","touchMove","onTouchMove","afterTransform","onTransform","isTopmost","eventTarget","blur","distanceY","setProperty","ctrlKey","altKey","shiftKey","isUIElement","isContentEditable","ignoreFocusChange","$currentSlide","allFocusableElems","$firstEl","enabledElems","isNodeVisible","offsetParent","isNodeInsideCurrentSlide","isNodeOutsideCarousel","origTabindex","lastFocus","scrollbarWidth","$style","revealScrollbar","clearContent","_className","opts","$fragment","createContextualFragment","suffix","manageCloseButton","firstChild","animateCSS","$element","handleAnimationEnd","currentTarget","message","$spinner","slideNext","slidePrev","isClosing","delete","nextInstance","metaKey","triggerGroupName","matchingOpener","triggerTarget","fancyboxTrigger","triggerItems","triggerIndex","fancyboxIndex","openers","keys","reverse","opener","found","fromOpener","options1","groupAll","get","groupAttr","groupValue","root","getRootNode","currentInstance","falseValues","trueValues","key2","selector","attachClickEvent","fromEvent","fb","values","all","create"],"version":3,"file":"index.6569d2f0.js.map"}