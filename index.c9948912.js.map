{"mappings":"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","sources":["src/js/get-refs.js","src/js/openMobMenu.js","src/js/openAboutUs.js","src/js/openContacts.js","src/js/openPortfolio.js","node_modules/@fancyapps/ui/src/shared/utils/isPlainObject.js","node_modules/@fancyapps/ui/src/shared/utils/extend.js","node_modules/@fancyapps/ui/src/shared/utils/canUseDOM.js","node_modules/@fancyapps/ui/src/shared/utils/setFocusOn.js","node_modules/@fancyapps/ui/src/shared/Base/Base.js","node_modules/@fancyapps/ui/src/shared/utils/resolve.js","node_modules/@fancyapps/ui/src/shared/utils/round.js","node_modules/@fancyapps/ui/src/shared/utils/isScrollable.js","node_modules/@fancyapps/ui/src/shared/utils/ResizeObserver.js","node_modules/@fancyapps/ui/src/shared/utils/PointerTracker.js","node_modules/@fancyapps/ui/src/shared/utils/getTextNodeFromPoint.js","node_modules/@fancyapps/ui/src/shared/utils/getDimensions.js","node_modules/@fancyapps/ui/src/Panzoom/Panzoom.js","node_modules/@fancyapps/ui/src/Panzoom/plugins/index.js","node_modules/@fancyapps/ui/src/shared/utils/throttle.js","node_modules/@fancyapps/ui/src/Carousel/plugins/Navigation/Navigation.js","node_modules/@fancyapps/ui/src/Carousel/plugins/Sync/Sync.js","node_modules/@fancyapps/ui/src/Carousel/plugins/index.js","node_modules/@fancyapps/ui/src/Carousel/plugins/Dots/Dots.js","node_modules/@fancyapps/ui/src/Carousel/Carousel.js","node_modules/@fancyapps/ui/src/Carousel/l10n/en.js","node_modules/@fancyapps/ui/src/Fancybox/plugins/Thumbs/Thumbs.js","node_modules/@fancyapps/ui/src/Fancybox/plugins/Html/Html.js","node_modules/@fancyapps/ui/src/Fancybox/plugins/Image/Image.js","node_modules/@fancyapps/ui/src/Fancybox/plugins/Hash/Hash.js","node_modules/@fancyapps/ui/src/shared/utils/Fullscreen.js","node_modules/@fancyapps/ui/src/shared/utils/Slideshow.js","node_modules/@fancyapps/ui/src/Fancybox/plugins/Toolbar/Toolbar.js","node_modules/@fancyapps/ui/src/Fancybox/plugins/index.js","node_modules/@fancyapps/ui/src/Fancybox/plugins/ScrollLock/ScrollLock.js","node_modules/@fancyapps/ui/src/Fancybox/Fancybox.js","node_modules/@fancyapps/ui/src/Fancybox/l10n/en.js","src/js/fancybox.js"],"sourcesContent":["const refs = {\n  mobMenu: document.querySelector('.js-menu-container'),\n  openMenuBtn: document.querySelector('.js-open-menu'),\n  closeMenuBtn: document.querySelector('.js-close-menu'),\n  aboutUsLinkHeader: document.querySelector('.js-about-header'),\n  abotUsLinkMobMenu: document.querySelector('.js-about-menu'),\n  portfolioLinkHeader: document.querySelector('.js-portfolio-header'),\n  portfolioLinkMobMenu: document.querySelector('.js-portfolio-menu'),\n  contactsLinkHeader: document.querySelector('.js-contacts-header'),\n  contactsLinkMobMenu: document.querySelector('.js-contacts-menu'),\n  heroSection: document.querySelector('.js-hero'),\n  propertiesSection: document.querySelector('.js-properties'),\n  aboutSection: document.querySelector('.js-about'),\n  contactsSection: document.querySelector('.js-contacts'),\n  portfolioSection: document.querySelector('.js-portfolio-section'),\n  footer: document.querySelector('.js-footer'),\n};\n\nexport { refs };\n","import { refs } from './get-refs';\n\nexport const toggleMenu = () => {\n  refs.mobMenu?.classList.toggle('is-hidden');\n};\n\nrefs.openMenuBtn?.addEventListener('click', toggleMenu);\nrefs.closeMenuBtn?.addEventListener('click', toggleMenu);\n","import { refs } from './get-refs';\n\nexport const openAboutUs = () => {\n  refs.heroSection?.classList.remove('is-hidden');\n  refs.propertiesSection?.classList.remove('is-hidden');\n  refs.aboutSection?.classList.remove('is-hidden');\n  refs.contactsSection?.classList.add('is-hidden');\n  refs.portfolioSection?.classList.add('is-hidden');\n  refs.footer?.classList.remove('is-hidden');\n  refs.mobMenu?.classList.add('is-hidden');\n};\n\nrefs.aboutUsLinkHeader?.addEventListener('click', openAboutUs);\nrefs.abotUsLinkMobMenu?.addEventListener('click', openAboutUs);\n","import { refs } from './get-refs';\n\nexport const openContacts = () => {\n  refs.heroSection?.classList.add('is-hidden');\n  refs.propertiesSection?.classList.add('is-hidden');\n  refs.aboutSection?.classList.add('is-hidden');\n  refs.footer?.classList.add('is-hidden');\n  refs.portfolioSection?.classList.add('is-hidden');\n  refs.contactsSection?.classList.remove('is-hidden');\n  refs.mobMenu?.classList.add('is-hidden');\n};\n\nrefs.contactsLinkHeader?.addEventListener('click', openContacts);\nrefs.contactsLinkMobMenu?.addEventListener('click', openContacts);\n","import { refs } from './get-refs';\n\nexport const openPortfolio = () => {\n  if (refs.portfolioSection?.classList.contains('is-hidden') === false) {\n    return;\n  }\n  refs.heroSection?.classList.add('is-hidden');\n  refs.aboutSection?.classList.add('is-hidden');\n  refs.propertiesSection?.classList.add('is-hidden');\n  refs.contactsSection?.classList.add('is-hidden');\n  refs.footer?.classList.remove('is-hidden');\n  refs.portfolioSection?.classList.toggle('is-hidden');\n  refs.mobMenu?.classList.add('is-hidden');\n};\n\nrefs.portfolioLinkHeader?.addEventListener('click', openPortfolio);\nrefs.portfolioLinkMobMenu?.addEventListener('click', openPortfolio);\n","/**\n * Check to see if an object is a plain object (created using \"{}\" or \"new Object\").\n * @param {*} obj Variable of any type\n * @returns {Boolean}\n */\nexport const isPlainObject = (obj) => {\n  return (\n    // separate from primitives\n    typeof obj === \"object\" &&\n    // is obvious\n    obj !== null &&\n    // separate instances (Array, DOM, ...)\n    obj.constructor === Object &&\n    // separate build-in like Math\n    Object.prototype.toString.call(obj) === \"[object Object]\"\n  );\n};\n","import { isPlainObject } from \"./isPlainObject.js\";\n\n/**\n * Merge the contents of two or more objects together into the first object.\n * If passing \"true\" for first argument, the merge becomes recursive (aka. deep copy).\n * @param  {...any} args\n * @returns {Object}\n */\nexport const extend = (...args) => {\n  let deep = false;\n\n  if (typeof args[0] == \"boolean\") {\n    deep = args.shift();\n  }\n\n  let result = args[0];\n\n  if (!result || typeof result !== \"object\") {\n    throw new Error(\"extendee must be an object\");\n  }\n\n  const extenders = args.slice(1);\n  const len = extenders.length;\n\n  for (let i = 0; i < len; i++) {\n    const extender = extenders[i];\n\n    for (let key in extender) {\n      if (extender.hasOwnProperty(key)) {\n        const value = extender[key];\n\n        if (deep && (Array.isArray(value) || isPlainObject(value))) {\n          const base = Array.isArray(value) ? [] : {};\n\n          result[key] = extend(true, result.hasOwnProperty(key) ? result[key] : base, value);\n        } else {\n          result[key] = value;\n        }\n      }\n    }\n  }\n\n  return result;\n};\n","/**\r\n * Detect if rendering from the client or the server\r\n */\r\nexport const canUseDOM = !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\r\n","import { canUseDOM } from \"./canUseDOM.js\";\r\n\r\nlet preventScrollSupported = null;\r\n\r\nexport const FOCUSABLE_ELEMENTS = [\r\n  \"a[href]\",\r\n  \"area[href]\",\r\n  'input:not([disabled]):not([type=\"hidden\"]):not([aria-hidden])',\r\n  \"select:not([disabled]):not([aria-hidden])\",\r\n  \"textarea:not([disabled]):not([aria-hidden])\",\r\n  \"button:not([disabled]):not([aria-hidden])\",\r\n  \"iframe\",\r\n  \"object\",\r\n  \"embed\",\r\n  \"video\",\r\n  \"audio\",\r\n  \"[contenteditable]\",\r\n  '[tabindex]:not([tabindex^=\"-\"]):not([disabled]):not([aria-hidden])',\r\n];\r\n\r\nexport const setFocusOn = (node) => {\r\n  if (!node || !canUseDOM) {\r\n    return;\r\n  }\r\n\r\n  if (preventScrollSupported === null) {\r\n    document.createElement(\"div\").focus({\r\n      get preventScroll() {\r\n        preventScrollSupported = true;\r\n\r\n        return false;\r\n      },\r\n    });\r\n  }\r\n\r\n  try {\r\n    if (node.setActive) {\r\n      // IE/Edge\r\n      node.setActive();\r\n    } else if (preventScrollSupported) {\r\n      // Modern browsers\r\n      node.focus({ preventScroll: true });\r\n    } else {\r\n      // Safari does not support `preventScroll` option\r\n      // https://bugs.webkit.org/show_bug.cgi?id=178583\r\n\r\n      // Save position\r\n      const scrollTop = window.pageXOffset || document.body.scrollTop;\r\n      const scrollLeft = window.pageYOffset || document.body.scrollLeft;\r\n\r\n      node.focus();\r\n\r\n      document.body.scrollTo({\r\n        top: scrollTop,\r\n        left: scrollLeft,\r\n        behavior: \"auto\",\r\n      });\r\n    }\r\n  } catch (e) {}\r\n};\r\n","import { extend } from \"../utils/extend.js\";\nimport { resolve } from \"../utils/resolve.js\";\nimport { isPlainObject } from \"../utils/isPlainObject.js\";\n\n/**\n * Base class, all components inherit from this class\n */\nexport class Base {\n  /**\n   * Base constructor\n   * @param {Object} [options] - Options as `key: value` pairs\n   */\n  constructor(options = {}) {\n    this.options = extend(true, {}, options);\n\n    this.plugins = [];\n    this.events = {};\n\n    // * Prefill with initial events\n    for (const type of [\"on\", \"once\"]) {\n      for (const args of Object.entries(this.options[type] || {})) {\n        this[type](...args);\n      }\n    }\n  }\n\n  /**\n   * Retrieve option value by key, supports subkeys\n   * @param {String} key Option name\n   * @param {*} [fallback] Fallback value for non-existing key\n   * @returns {*}\n   */\n  option(key, fallback, ...rest) {\n    // Make sure it is string\n    key = String(key);\n\n    let value = resolve(key, this.options);\n\n    // Allow to have functions as options\n    if (typeof value === \"function\") {\n      value = value.call(this, this, ...rest);\n    }\n\n    return value === undefined ? fallback : value;\n  }\n\n  /**\n   * Simple l10n support - replaces object keys\n   * found in template with corresponding values\n   * @param {String} str String containing values to localize\n   * @param {Array} params Substitute parameters\n   * @returns {String}\n   */\n  localize(str, params = []) {\n    str = String(str).replace(/\\{\\{(\\w+).?(\\w+)?\\}\\}/g, (match, key, subkey) => {\n      let rez = \"\";\n\n      // Plugins have `Plugin.l10n.KEY`\n      if (subkey) {\n        rez = this.option(`${key[0] + key.toLowerCase().substring(1)}.l10n.${subkey}`);\n      } else if (key) {\n        rez = this.option(`l10n.${key}`);\n      }\n\n      if (!rez) {\n        rez = match;\n      }\n\n      for (let index = 0; index < params.length; index++) {\n        rez = rez.split(params[index][0]).join(params[index][1]);\n      }\n\n      return rez;\n    });\n\n    str = str.replace(/\\{\\{(.*)\\}\\}/, (match, key) => {\n      return key;\n    });\n\n    return str;\n  }\n\n  /**\n   * Subscribe to an event\n   * @param {String} name\n   * @param {Function} callback\n   * @returns {Object}\n   */\n  on(name, callback) {\n    if (isPlainObject(name)) {\n      for (const args of Object.entries(name)) {\n        this.on(...args);\n      }\n\n      return this;\n    }\n\n    String(name)\n      .split(\" \")\n      .forEach((item) => {\n        const listeners = (this.events[item] = this.events[item] || []);\n\n        if (listeners.indexOf(callback) == -1) {\n          listeners.push(callback);\n        }\n      });\n\n    return this;\n  }\n\n  /**\n   * Subscribe to an event only once\n   * @param {String} name\n   * @param {Function} callback\n   * @returns {Object}\n   */\n  once(name, callback) {\n    if (isPlainObject(name)) {\n      for (const args of Object.entries(name)) {\n        this.once(...args);\n      }\n\n      return this;\n    }\n\n    String(name)\n      .split(\" \")\n      .forEach((item) => {\n        const listener = (...details) => {\n          this.off(item, listener);\n          callback.call(this, this, ...details);\n        };\n\n        listener._ = callback;\n\n        this.on(item, listener);\n      });\n\n    return this;\n  }\n\n  /**\n   * Unsubscribe event with name and callback\n   * @param {String} name\n   * @param {Function} callback\n   * @returns {Object}\n   */\n  off(name, callback) {\n    if (isPlainObject(name)) {\n      for (const args of Object.entries(name)) {\n        this.off(...args);\n      }\n\n      return;\n    }\n\n    name.split(\" \").forEach((item) => {\n      const listeners = this.events[item];\n\n      if (!listeners || !listeners.length) {\n        return this;\n      }\n\n      let index = -1;\n\n      for (let i = 0, len = listeners.length; i < len; i++) {\n        const listener = listeners[i];\n\n        if (listener && (listener === callback || listener._ === callback)) {\n          index = i;\n          break;\n        }\n      }\n\n      if (index != -1) {\n        listeners.splice(index, 1);\n      }\n    });\n\n    return this;\n  }\n\n  /**\n   * Emit an event.\n   * If present, `\"*\"` handlers are invoked after name-matched handlers.\n   * @param {String} name\n   * @param  {...any} details\n   * @returns {Boolean}\n   */\n  trigger(name, ...details) {\n    for (const listener of [...(this.events[name] || [])].slice()) {\n      if (listener && listener.call(this, this, ...details) === false) {\n        return false;\n      }\n    }\n\n    // A wildcard \"*\" event type\n    for (const listener of [...(this.events[\"*\"] || [])].slice()) {\n      if (listener && listener.call(this, name, this, ...details) === false) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Add given plugins to this instance,\n   * this will end up calling `attach` method of each plugin\n   * @param {Object} Plugins\n   * @returns {Object}\n   */\n  attachPlugins(plugins) {\n    const newPlugins = {};\n\n    for (const [key, Plugin] of Object.entries(plugins || {})) {\n      // Check if this plugin is not disabled by option\n      if (this.options[key] !== false && !this.plugins[key]) {\n        // Populate options with defaults from the plugin\n        this.options[key] = extend({}, Plugin.defaults || {}, this.options[key]);\n\n        // Initialise plugin\n        newPlugins[key] = new Plugin(this);\n      }\n    }\n\n    for (const [key, plugin] of Object.entries(newPlugins)) {\n      plugin.attach(this);\n    }\n\n    this.plugins = Object.assign({}, this.plugins, newPlugins);\n\n    return this;\n  }\n\n  /**\n   * Remove all plugin instances from this instance,\n   * this will end up calling `detach` method of each plugin\n   * @returns {Object}\n   */\n  detachPlugins() {\n    for (const key in this.plugins) {\n      let plugin;\n\n      if ((plugin = this.plugins[key]) && typeof plugin.detach === \"function\") {\n        plugin.detach(this);\n      }\n    }\n\n    this.plugins = {};\n\n    return this;\n  }\n}\n","/**\n * Access nested JavaScript objects by string path.\n * Example: `resolve(\"a.b.c\", {a:{b:{c:\"d\"}})` would return `d`\n * @param {String} path\n * @param {Object} obj\n * @returns {*}\n */\nexport const resolve = function (path, obj) {\n  return path.split(\".\").reduce(function (prev, curr) {\n    return prev && prev[curr];\n  }, obj);\n};\n","/**\n * Round half up; to be more specific and to ensure things like 1.005 round correctly\n * @param {Float} value\n * @param {Integer} precision\n * @returns {Float}\n */\nexport const round = (value, precision = 10000) => {\n  value = parseFloat(value) || 0;\n\n  return Math.round((value + Number.EPSILON) * precision) / precision;\n};\n","/**\n * Check if  element has scrollable content\n * @param {Node} node\n * @returns {Boolean}\n */\nexport const hasScrollbars = function (node) {\n  const overflowY = getComputedStyle(node)[\"overflow-y\"],\n    overflowX = getComputedStyle(node)[\"overflow-x\"],\n    vertical = (overflowY === \"scroll\" || overflowY === \"auto\") && Math.abs(node.scrollHeight - node.clientHeight) > 1,\n    horizontal = (overflowX === \"scroll\" || overflowX === \"auto\") && Math.abs(node.scrollWidth - node.clientWidth) > 1;\n\n  return vertical || horizontal;\n};\n\n/**\n * Check if element or one of the parents is scrollable\n * @param {Node} node  DOM Node element\n * @returns {Boolean}\n */\nexport const isScrollable = function (node) {\n  if (!node || !(typeof node === \"object\" && node instanceof Element) || node === document.body) {\n    return false;\n  }\n\n  if (node.__Panzoom) {\n    return false;\n  }\n\n  if (hasScrollbars(node)) {\n    return node;\n  }\n\n  return isScrollable(node.parentNode);\n};\n","/**\n * ResizeObserver Polyfill\n */\nexport const ResizeObserver =\n  (typeof window !== \"undefined\" && window.ResizeObserver) ||\n  class {\n    constructor(callback) {\n      this.observables = [];\n      // Array of observed elements that looks like this:\n      // [{\n      //   el: domNode,\n      //   size: {height: x, width: y}\n      // }]\n      this.boundCheck = this.check.bind(this);\n      this.boundCheck();\n      this.callback = callback;\n    }\n\n    observe(el) {\n      if (this.observables.some((observable) => observable.el === el)) {\n        return;\n      }\n\n      const newObservable = {\n        el: el,\n        size: {\n          height: el.clientHeight,\n          width: el.clientWidth,\n        },\n      };\n\n      this.observables.push(newObservable);\n    }\n\n    unobserve(el) {\n      this.observables = this.observables.filter((obj) => obj.el !== el);\n    }\n\n    disconnect() {\n      this.observables = [];\n    }\n\n    check() {\n      const changedEntries = this.observables\n        .filter((obj) => {\n          const currentHeight = obj.el.clientHeight;\n          const currentWidth = obj.el.clientWidth;\n          if (obj.size.height !== currentHeight || obj.size.width !== currentWidth) {\n            obj.size.height = currentHeight;\n            obj.size.width = currentWidth;\n            return true;\n          }\n        })\n        .map((obj) => obj.el);\n\n      if (changedEntries.length > 0) {\n        this.callback(changedEntries);\n      }\n\n      window.requestAnimationFrame(this.boundCheck);\n    }\n  };\n","class Pointer {\r\n  constructor(nativePointer) {\r\n    this.id = self.Touch && nativePointer instanceof Touch ? nativePointer.identifier : -1;\r\n\r\n    this.pageX = nativePointer.pageX;\r\n    this.pageY = nativePointer.pageY;\r\n\r\n    this.clientX = nativePointer.clientX;\r\n    this.clientY = nativePointer.clientY;\r\n  }\r\n}\r\n\r\nconst getDistance = (a, b) => {\r\n  if (!b) {\r\n    return 0;\r\n  }\r\n\r\n  return Math.sqrt((b.clientX - a.clientX) ** 2 + (b.clientY - a.clientY) ** 2);\r\n};\r\n\r\nconst getMidpoint = (a, b) => {\r\n  if (!b) {\r\n    return a;\r\n  }\r\n\r\n  return {\r\n    clientX: (a.clientX + b.clientX) / 2,\r\n    clientY: (a.clientY + b.clientY) / 2,\r\n  };\r\n};\r\n\r\nconst isTouchEvent = (event) => \"changedTouches\" in event;\r\n\r\nclass PointerTracker {\r\n  constructor(_element, { start = () => true, move = () => {}, end = () => {} } = {}) {\r\n    this._element = _element;\r\n\r\n    this.startPointers = [];\r\n    this.currentPointers = [];\r\n\r\n    this._pointerStart = (event) => {\r\n      if (event.buttons > 0 && event.button !== 0) {\r\n        return;\r\n      }\r\n\r\n      const pointer = new Pointer(event);\r\n\r\n      if (this.currentPointers.some((p) => p.id === pointer.id)) {\r\n        return;\r\n      }\r\n\r\n      if (!this._triggerPointerStart(pointer, event)) {\r\n        return;\r\n      }\r\n\r\n      window.addEventListener(\"mousemove\", this._move);\r\n      window.addEventListener(\"mouseup\", this._pointerEnd);\r\n    };\r\n\r\n    this._touchStart = (event) => {\r\n      for (const touch of Array.from(event.changedTouches || [])) {\r\n        this._triggerPointerStart(new Pointer(touch), event);\r\n      }\r\n    };\r\n\r\n    this._move = (event) => {\r\n      const previousPointers = this.currentPointers.slice();\r\n      const changedPointers = isTouchEvent(event)\r\n        ? Array.from(event.changedTouches).map((t) => new Pointer(t))\r\n        : [new Pointer(event)];\r\n\r\n      const trackedChangedPointers = [];\r\n\r\n      for (const pointer of changedPointers) {\r\n        const index = this.currentPointers.findIndex((p) => p.id === pointer.id);\r\n\r\n        if (index < 0) {\r\n          continue;\r\n        }\r\n\r\n        trackedChangedPointers.push(pointer);\r\n\r\n        this.currentPointers[index] = pointer;\r\n      }\r\n\r\n      this._moveCallback(previousPointers, this.currentPointers.slice(), event);\r\n    };\r\n\r\n    this._triggerPointerEnd = (pointer, event) => {\r\n      const index = this.currentPointers.findIndex((p) => p.id === pointer.id);\r\n\r\n      if (index < 0) {\r\n        return false;\r\n      }\r\n\r\n      this.currentPointers.splice(index, 1);\r\n      this.startPointers.splice(index, 1);\r\n\r\n      this._endCallback(pointer, event);\r\n\r\n      return true;\r\n    };\r\n\r\n    this._pointerEnd = (event) => {\r\n      if (event.buttons > 0 && event.button !== 0) {\r\n        return;\r\n      }\r\n\r\n      if (!this._triggerPointerEnd(new Pointer(event), event)) {\r\n        return;\r\n      }\r\n\r\n      window.removeEventListener(\"mousemove\", this._move, { passive: false });\r\n      window.removeEventListener(\"mouseup\", this._pointerEnd, { passive: false });\r\n    };\r\n\r\n    this._touchEnd = (event) => {\r\n      for (const touch of Array.from(event.changedTouches || [])) {\r\n        this._triggerPointerEnd(new Pointer(touch), event);\r\n      }\r\n    };\r\n\r\n    this._startCallback = start;\r\n    this._moveCallback = move;\r\n    this._endCallback = end;\r\n\r\n    this._element.addEventListener(\"mousedown\", this._pointerStart, { passive: false });\r\n    this._element.addEventListener(\"touchstart\", this._touchStart, { passive: false });\r\n    this._element.addEventListener(\"touchmove\", this._move, { passive: false });\r\n    this._element.addEventListener(\"touchend\", this._touchEnd);\r\n    this._element.addEventListener(\"touchcancel\", this._touchEnd);\r\n  }\r\n\r\n  stop() {\r\n    this._element.removeEventListener(\"mousedown\", this._pointerStart, { passive: false });\r\n    this._element.removeEventListener(\"touchstart\", this._touchStart, { passive: false });\r\n    this._element.removeEventListener(\"touchmove\", this._move, { passive: false });\r\n    this._element.removeEventListener(\"touchend\", this._touchEnd);\r\n    this._element.removeEventListener(\"touchcancel\", this._touchEnd);\r\n\r\n    window.removeEventListener(\"mousemove\", this._move);\r\n    window.removeEventListener(\"mouseup\", this._pointerEnd);\r\n  }\r\n\r\n  _triggerPointerStart(pointer, event) {\r\n    if (!this._startCallback(pointer, event)) {\r\n      return false;\r\n    }\r\n\r\n    this.currentPointers.push(pointer);\r\n    this.startPointers.push(pointer);\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nexport { PointerTracker, getDistance, getMidpoint };\r\n","/**\n * Get element child node at the given coordinates\n * @param {Element} HTML element\n * @param {Float|Integer} x\n * @param {Float|Integer} y\n * @returns {Node|Boolean}}\n */\nexport const getTextNodeFromPoint = (element, x, y) => {\n  const nodes = element.childNodes;\n  const range = document.createRange();\n\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n\n    if (node.nodeType !== Node.TEXT_NODE) {\n      continue;\n    }\n\n    range.selectNodeContents(node);\n\n    const rect = range.getBoundingClientRect();\n\n    if (x >= rect.left && y >= rect.top && x <= rect.right && y <= rect.bottom) {\n      return node;\n    }\n  }\n\n  return false;\n};\n","/**\n * Get actual width of the element, regardless of how much of content is currently visible\n * @param {Element} elem\n * @returns {Integer}\n */\nexport const getFullWidth = (elem) => {\n  return Math.max(\n    parseFloat(elem.naturalWidth || 0),\n    parseFloat((elem.width && elem.width.baseVal && elem.width.baseVal.value) || 0),\n    parseFloat(elem.offsetWidth || 0),\n    parseFloat(elem.scrollWidth || 0)\n  );\n};\n\n/**\n * Get actual height of the element, regardless of how much of content is currently visible\n * @param {Element} elem\n * @returns {Integer}\n */\nexport const getFullHeight = (elem) => {\n  return Math.max(\n    parseFloat(elem.naturalHeight || 0),\n    parseFloat((elem.height && elem.height.baseVal && elem.height.baseVal.value) || 0),\n    parseFloat(elem.offsetHeight || 0),\n    parseFloat(elem.scrollHeight || 0)\n  );\n};\n\n/**\n * Calculate bounding size to fit dimensions while preserving aspect ratio\n * @param {Number} srcWidth\n * @param {Number} srcHeight\n * @param {Number} maxWidth\n * @param {Number} maxHeight\n * @returns {Object}\n */\nexport const calculateAspectRatioFit = (srcWidth, srcHeight, maxWidth, maxHeight) => {\n  const ratio = Math.min(maxWidth / srcWidth || 0, maxHeight / srcHeight);\n\n  return { width: srcWidth * ratio || 0, height: srcHeight * ratio || 0 };\n};\n","import { extend } from \"../shared/utils/extend.js\";\nimport { round } from \"../shared/utils/round.js\";\nimport { isScrollable } from \"../shared/utils/isScrollable.js\";\n\nimport { ResizeObserver } from \"../shared/utils/ResizeObserver.js\";\nimport { PointerTracker, getMidpoint, getDistance } from \"../shared/utils/PointerTracker.js\";\n\nimport { getTextNodeFromPoint } from \"../shared/utils/getTextNodeFromPoint.js\";\n\nimport { getFullWidth, getFullHeight, calculateAspectRatioFit } from \"../shared/utils/getDimensions.js\";\n\nimport { Base } from \"../shared/Base/Base.js\";\n\nimport { Plugins } from \"./plugins/index.js\";\n\nconst defaults = {\n  // Enable touch guestures\n  touch: true,\n\n  // Enable zooming\n  zoom: true,\n\n  // Enable pinch gesture to zoom in/out using two fingers\n  pinchToZoom: true,\n\n  // Disable dragging if scale level is equal to value of `baseScale` option\n  panOnlyZoomed: false,\n\n  // Lock axis while dragging,\n  // possible values: false | \"x\" | \"y\" | \"xy\"\n  lockAxis: false,\n\n  // * All friction values are inside [0, 1) interval,\n  // * where 0 would change instantly, but 0.99 would update extremely slowly\n\n  // Friction while panning/dragging\n  friction: 0.64,\n\n  // Friction while decelerating after drag end\n  decelFriction: 0.88,\n\n  // Friction while scaling\n  zoomFriction: 0.74,\n\n  // Bounciness after hitting the edge\n  bounceForce: 0.2,\n\n  // Initial scale level\n  baseScale: 1,\n\n  // Minimum scale level\n  minScale: 1,\n\n  // Maximum scale level\n  maxScale: 2,\n\n  // Default scale step while zooming\n  step: 0.5,\n\n  // Allow to select text,\n  // if enabled, dragging will be disabled when text selection is detected\n  textSelection: false,\n\n  // Add `click` event listener,\n  // possible values: true | false | function | \"toggleZoom\"\n  click: \"toggleZoom\",\n\n  // Add `wheel` event listener,\n  // possible values: true | false | function |  \"zoom\"\n  wheel: \"zoom\",\n\n  // Value for zoom on mouse wheel\n  wheelFactor: 42,\n\n  // Number of wheel events after which it should stop preventing default behaviour of mouse wheel\n  wheelLimit: 5,\n\n  // Class name added to `$viewport` element to indicate if content is draggable\n  draggableClass: \"is-draggable\",\n\n  // Class name added to `$viewport` element to indicate that user is currently dragging\n  draggingClass: \"is-dragging\",\n\n  // Content will be scaled by this number,\n  // this can also be a function which should return a number, for example:\n  // ratio: function() { return 1 / (window.devicePixelRatio || 1) }\n  ratio: 1,\n};\n\nexport class Panzoom extends Base {\n  /**\n   * Panzoom constructor\n   * @constructs Panzoom\n   * @param {HTMLElement} $viewport Panzoom container\n   * @param {Object} [options] Options for Panzoom\n   */\n  constructor($container, options = {}) {\n    super(extend(true, {}, defaults, options));\n\n    this.state = \"init\";\n\n    this.$container = $container;\n\n    // Bind event handlers for referencability\n    for (const methodName of [\"onLoad\", \"onWheel\", \"onClick\"]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n\n    this.initLayout();\n\n    this.resetValues();\n\n    this.attachPlugins(Panzoom.Plugins);\n\n    this.trigger(\"init\");\n\n    this.updateMetrics();\n\n    this.attachEvents();\n\n    this.trigger(\"ready\");\n\n    if (this.option(\"centerOnStart\") === false) {\n      this.state = \"ready\";\n    } else {\n      this.panTo({\n        friction: 0,\n      });\n    }\n\n    $container.__Panzoom = this;\n  }\n\n  /**\n   * Create references to container, viewport and content elements\n   */\n  initLayout() {\n    const $container = this.$container;\n\n    // Make sure content element exists\n    if (!($container instanceof HTMLElement)) {\n      throw new Error(\"Panzoom: Container not found\");\n    }\n\n    const $content = this.option(\"content\") || $container.querySelector(\".panzoom__content\");\n\n    // Make sure content element exists\n    if (!$content) {\n      throw new Error(\"Panzoom: Content not found\");\n    }\n\n    this.$content = $content;\n\n    let $viewport = this.option(\"viewport\") || $container.querySelector(\".panzoom__viewport\");\n\n    if (!$viewport && this.option(\"wrapInner\") !== false) {\n      $viewport = document.createElement(\"div\");\n      $viewport.classList.add(\"panzoom__viewport\");\n\n      $viewport.append(...$container.childNodes);\n\n      $container.appendChild($viewport);\n    }\n\n    this.$viewport = $viewport || $content.parentNode;\n  }\n\n  /**\n   * Restore instance variables to default values\n   */\n  resetValues() {\n    this.updateRate = this.option(\"updateRate\", /iPhone|iPad|iPod|Android/i.test(navigator.userAgent) ? 250 : 24);\n\n    this.container = {\n      width: 0,\n      height: 0,\n    };\n\n    this.viewport = {\n      width: 0,\n      height: 0,\n    };\n\n    this.content = {\n      // Full content dimensions (naturalWidth/naturalHeight for images)\n      origWidth: 0,\n      origHeight: 0,\n\n      // Current dimensions of the content\n      width: 0,\n      height: 0,\n\n      // Current position; these values reflect CSS `transform` value\n      x: this.option(\"x\", 0),\n      y: this.option(\"y\", 0),\n\n      // Current scale; does not reflect CSS `transform` value\n      scale: this.option(\"baseScale\"),\n    };\n\n    // End values of current pan / zoom animation\n    this.transform = {\n      x: 0,\n      y: 0,\n      scale: 1,\n    };\n\n    this.resetDragPosition();\n  }\n\n  /**\n   * Handle `load` event\n   * @param {Event} event\n   */\n  onLoad(event) {\n    this.updateMetrics();\n\n    this.panTo({ scale: this.option(\"baseScale\"), friction: 0 });\n\n    this.trigger(\"load\", event);\n  }\n\n  /**\n   * Handle `click` event\n   * @param {Event} event\n   */\n  onClick(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    if (document.activeElement && document.activeElement.closest(\"[contenteditable]\")) {\n      return;\n    }\n\n    // Skip if text is selected\n    if (\n      this.option(\"textSelection\") &&\n      window.getSelection().toString().length &&\n      !(event.target && event.target.hasAttribute(\"data-fancybox-close\"))\n    ) {\n      event.stopPropagation();\n      return;\n    }\n\n    const rect = this.$content.getClientRects()[0];\n\n    // Check if container has changed position (for example, when current instance is inside another one)\n    if (this.state !== \"ready\") {\n      if (\n        this.dragPosition.midPoint ||\n        Math.abs(rect.top - this.dragStart.rect.top) > 1 ||\n        Math.abs(rect.left - this.dragStart.rect.left) > 1\n      ) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        return;\n      }\n    }\n\n    if (this.trigger(\"click\", event) === false) {\n      return;\n    }\n\n    if (this.option(\"zoom\") && this.option(\"click\") === \"toggleZoom\") {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.zoomWithClick(event);\n    }\n  }\n\n  /**\n   * Handle `wheel` event\n   * @param {Event} event\n   */\n  onWheel(event) {\n    if (this.trigger(\"wheel\", event) === false) {\n      return;\n    }\n\n    if (this.option(\"zoom\") && this.option(\"wheel\")) {\n      this.zoomWithWheel(event);\n    }\n  }\n\n  /**\n   * Change zoom level depending on scroll direction\n   * @param {Event} event `wheel` event\n   */\n  zoomWithWheel(event) {\n    if (this.changedDelta === undefined) {\n      this.changedDelta = 0;\n    }\n\n    const delta = Math.max(-1, Math.min(1, -event.deltaY || -event.deltaX || event.wheelDelta || -event.detail));\n    const scale = this.content.scale;\n\n    let newScale = (scale * (100 + delta * this.option(\"wheelFactor\"))) / 100;\n\n    if (\n      (delta < 0 && Math.abs(scale - this.option(\"minScale\")) < 0.01) ||\n      (delta > 0 && Math.abs(scale - this.option(\"maxScale\")) < 0.01)\n    ) {\n      this.changedDelta += Math.abs(delta);\n      newScale = scale;\n    } else {\n      this.changedDelta = 0;\n      newScale = Math.max(Math.min(newScale, this.option(\"maxScale\")), this.option(\"minScale\"));\n    }\n\n    if (this.changedDelta > this.option(\"wheelLimit\")) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (newScale === scale) {\n      return;\n    }\n\n    const rect = this.$content.getBoundingClientRect();\n\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n\n    this.zoomTo(newScale, { x, y });\n  }\n\n  /**\n   * Change zoom level depending on click coordinates\n   * @param {Event} event `click` event\n   */\n  zoomWithClick(event) {\n    const rect = this.$content.getClientRects()[0];\n\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n\n    this.toggleZoom({ x, y });\n  }\n\n  /**\n   * Attach load, wheel and click event listeners, initialize `resizeObserver` and `PointerTracker`\n   */\n  attachEvents() {\n    this.$content.addEventListener(\"load\", this.onLoad);\n\n    this.$container.addEventListener(\"wheel\", this.onWheel, { passive: false });\n    this.$container.addEventListener(\"click\", this.onClick, { passive: false });\n\n    this.initObserver();\n\n    const pointerTracker = new PointerTracker(this.$container, {\n      start: (pointer, event) => {\n        if (!this.option(\"touch\")) {\n          return false;\n        }\n\n        if (this.velocity.scale < 0) {\n          return false;\n        }\n\n        const target = event.composedPath()[0];\n\n        if (!pointerTracker.currentPointers.length) {\n          const ignoreClickedElement =\n            [\"BUTTON\", \"TEXTAREA\", \"OPTION\", \"INPUT\", \"SELECT\", \"VIDEO\"].indexOf(target.nodeName) !== -1;\n\n          if (ignoreClickedElement) {\n            return false;\n          }\n\n          // Allow text selection\n          if (this.option(\"textSelection\") && getTextNodeFromPoint(target, pointer.clientX, pointer.clientY)) {\n            return false;\n          }\n        }\n\n        if (isScrollable(target)) {\n          return false;\n        }\n\n        if (this.trigger(\"touchStart\", event) === false) {\n          return false;\n        }\n\n        if (event.type === \"mousedown\") {\n          event.preventDefault();\n        }\n\n        this.state = \"pointerdown\";\n\n        this.resetDragPosition();\n\n        this.dragPosition.midPoint = null;\n        this.dragPosition.time = Date.now();\n\n        return true;\n      },\n      move: (previousPointers, currentPointers, event) => {\n        if (this.state !== \"pointerdown\") {\n          return;\n        }\n\n        if (this.trigger(\"touchMove\", event) === false) {\n          event.preventDefault();\n          return;\n        }\n\n        // Disable touch action if current zoom level is below base level\n        if (\n          currentPointers.length < 2 &&\n          this.option(\"panOnlyZoomed\") === true &&\n          this.content.width <= this.viewport.width &&\n          this.content.height <= this.viewport.height &&\n          this.transform.scale <= this.option(\"baseScale\")\n        ) {\n          return;\n        }\n\n        if (currentPointers.length > 1 && (!this.option(\"zoom\") || this.option(\"pinchToZoom\") === false)) {\n          return;\n        }\n\n        const prevMidpoint = getMidpoint(previousPointers[0], previousPointers[1]);\n        const newMidpoint = getMidpoint(currentPointers[0], currentPointers[1]);\n\n        const panX = newMidpoint.clientX - prevMidpoint.clientX;\n        const panY = newMidpoint.clientY - prevMidpoint.clientY;\n\n        const prevDistance = getDistance(previousPointers[0], previousPointers[1]);\n        const newDistance = getDistance(currentPointers[0], currentPointers[1]);\n\n        const scaleDiff = prevDistance && newDistance ? newDistance / prevDistance : 1;\n\n        this.dragOffset.x += panX;\n        this.dragOffset.y += panY;\n\n        this.dragOffset.scale *= scaleDiff;\n\n        this.dragOffset.time = Date.now() - this.dragPosition.time;\n\n        const axisToLock = this.dragStart.scale === 1 && this.option(\"lockAxis\");\n\n        if (axisToLock && !this.lockAxis) {\n          if (Math.abs(this.dragOffset.x) < 6 && Math.abs(this.dragOffset.y) < 6) {\n            event.preventDefault();\n            return;\n          }\n\n          const angle = Math.abs((Math.atan2(this.dragOffset.y, this.dragOffset.x) * 180) / Math.PI);\n\n          this.lockAxis = angle > 45 && angle < 135 ? \"y\" : \"x\";\n        }\n\n        if (axisToLock !== \"xy\" && this.lockAxis === \"y\") {\n          return;\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        event.stopImmediatePropagation();\n\n        if (this.lockAxis) {\n          this.dragOffset[this.lockAxis === \"x\" ? \"y\" : \"x\"] = 0;\n        }\n\n        this.$container.classList.add(this.option(\"draggingClass\"));\n\n        if (!(this.transform.scale === this.option(\"baseScale\") && this.lockAxis === \"y\")) {\n          this.dragPosition.x = this.dragStart.x + this.dragOffset.x;\n        }\n\n        if (!(this.transform.scale === this.option(\"baseScale\") && this.lockAxis === \"x\")) {\n          this.dragPosition.y = this.dragStart.y + this.dragOffset.y;\n        }\n\n        this.dragPosition.scale = this.dragStart.scale * this.dragOffset.scale;\n\n        if (currentPointers.length > 1) {\n          const startPoint = getMidpoint(pointerTracker.startPointers[0], pointerTracker.startPointers[1]);\n\n          const xPos = startPoint.clientX - this.dragStart.rect.x;\n          const yPos = startPoint.clientY - this.dragStart.rect.y;\n\n          const { deltaX, deltaY } = this.getZoomDelta(this.content.scale * this.dragOffset.scale, xPos, yPos);\n\n          this.dragPosition.x -= deltaX;\n          this.dragPosition.y -= deltaY;\n\n          this.dragPosition.midPoint = newMidpoint;\n        } else {\n          this.setDragResistance();\n        }\n\n        // Update final position\n        this.transform = {\n          x: this.dragPosition.x,\n          y: this.dragPosition.y,\n          scale: this.dragPosition.scale,\n        };\n\n        this.startAnimation();\n      },\n      end: (pointer, event) => {\n        if (this.state !== \"pointerdown\") {\n          return;\n        }\n\n        this._dragOffset = { ...this.dragOffset };\n\n        if (pointerTracker.currentPointers.length) {\n          this.resetDragPosition();\n\n          return;\n        }\n\n        this.state = \"decel\";\n        this.friction = this.option(\"decelFriction\");\n\n        this.recalculateTransform();\n\n        this.$container.classList.remove(this.option(\"draggingClass\"));\n\n        if (this.trigger(\"touchEnd\", event) === false) {\n          return;\n        }\n\n        if (this.state !== \"decel\") {\n          return;\n        }\n\n        // * Check if scaled content past limits\n\n        // Below minimum\n        const minScale = this.option(\"minScale\");\n\n        if (this.transform.scale < minScale) {\n          this.zoomTo(minScale, { friction: 0.64 });\n\n          return;\n        }\n\n        // Exceed maximum\n        const maxScale = this.option(\"maxScale\");\n\n        if (this.transform.scale - maxScale > 0.01) {\n          const last = this.dragPosition.midPoint || pointer;\n          const rect = this.$content.getClientRects()[0];\n\n          this.zoomTo(maxScale, {\n            friction: 0.64,\n            x: last.clientX - rect.left,\n            y: last.clientY - rect.top,\n          });\n\n          return;\n        }\n      },\n    });\n\n    this.pointerTracker = pointerTracker;\n  }\n\n  initObserver() {\n    if (this.resizeObserver) {\n      return;\n    }\n\n    this.resizeObserver = new ResizeObserver(() => {\n      if (this.updateTimer) {\n        return;\n      }\n\n      this.updateTimer = setTimeout(() => {\n        const rect = this.$container.getBoundingClientRect();\n\n        if (!(rect.width && rect.height)) {\n          this.updateTimer = null;\n          return;\n        }\n\n        // Check to see if there are any changes\n        if (Math.abs(rect.width - this.container.width) > 1 || Math.abs(rect.height - this.container.height) > 1) {\n          if (this.isAnimating()) {\n            this.endAnimation(true);\n          }\n\n          this.updateMetrics();\n\n          this.panTo({\n            x: this.content.x,\n            y: this.content.y,\n            scale: this.option(\"baseScale\"),\n            friction: 0,\n          });\n        }\n\n        this.updateTimer = null;\n      }, this.updateRate);\n    });\n\n    this.resizeObserver.observe(this.$container);\n  }\n\n  /**\n   * Restore drag related variables to default values\n   */\n  resetDragPosition() {\n    this.lockAxis = null;\n    this.friction = this.option(\"friction\");\n\n    this.velocity = {\n      x: 0,\n      y: 0,\n      scale: 0,\n    };\n\n    const { x, y, scale } = this.content;\n\n    this.dragStart = {\n      rect: this.$content.getBoundingClientRect(),\n      x,\n      y,\n      scale,\n    };\n\n    this.dragPosition = {\n      ...this.dragPosition,\n      x,\n      y,\n      scale,\n    };\n\n    this.dragOffset = {\n      x: 0,\n      y: 0,\n      scale: 1,\n      time: 0,\n    };\n  }\n\n  /**\n   * Trigger update events before/after resizing content and viewport\n   * @param {Boolean} silently Should trigger `afterUpdate` event at the end\n   */\n  updateMetrics(silently) {\n    if (silently !== true) {\n      this.trigger(\"beforeUpdate\");\n    }\n\n    const $container = this.$container;\n    const $content = this.$content;\n    const $viewport = this.$viewport;\n\n    const contentIsImage = $content instanceof HTMLImageElement;\n    const contentIsZoomable = this.option(\"zoom\");\n    const shouldResizeParent = this.option(\"resizeParent\", contentIsZoomable);\n\n    let width = this.option(\"width\");\n    let height = this.option(\"height\");\n\n    let origWidth = width || getFullWidth($content);\n    let origHeight = height || getFullHeight($content);\n\n    Object.assign($content.style, {\n      width: width ? `${width}px` : \"\",\n      height: height ? `${height}px` : \"\",\n      maxWidth: \"\",\n      maxHeight: \"\",\n    });\n\n    if (shouldResizeParent) {\n      Object.assign($viewport.style, { width: \"\", height: \"\" });\n    }\n\n    const ratio = this.option(\"ratio\");\n\n    origWidth = round(origWidth * ratio);\n    origHeight = round(origHeight * ratio);\n\n    width = origWidth;\n    height = origHeight;\n\n    const contentRect = $content.getBoundingClientRect();\n    const viewportRect = $viewport.getBoundingClientRect();\n\n    const containerRect = $viewport == $container ? viewportRect : $container.getBoundingClientRect();\n\n    let viewportWidth = Math.max($viewport.offsetWidth, round(viewportRect.width));\n    let viewportHeight = Math.max($viewport.offsetHeight, round(viewportRect.height));\n\n    let viewportStyles = window.getComputedStyle($viewport);\n    viewportWidth -= parseFloat(viewportStyles.paddingLeft) + parseFloat(viewportStyles.paddingRight);\n    viewportHeight -= parseFloat(viewportStyles.paddingTop) + parseFloat(viewportStyles.paddingBottom);\n\n    this.viewport.width = viewportWidth;\n    this.viewport.height = viewportHeight;\n\n    if (contentIsZoomable) {\n      if (Math.abs(origWidth - contentRect.width) > 0.1 || Math.abs(origHeight - contentRect.height) > 0.1) {\n        const rez = calculateAspectRatioFit(\n          origWidth,\n          origHeight,\n          Math.min(origWidth, contentRect.width),\n          Math.min(origHeight, contentRect.height)\n        );\n\n        width = round(rez.width);\n        height = round(rez.height);\n      }\n\n      Object.assign($content.style, {\n        width: `${width}px`,\n        height: `${height}px`,\n        transform: \"\",\n      });\n    }\n\n    if (shouldResizeParent) {\n      Object.assign($viewport.style, { width: `${width}px`, height: `${height}px` });\n\n      this.viewport = { ...this.viewport, width, height };\n    }\n\n    if (contentIsImage && contentIsZoomable && typeof this.options.maxScale !== \"function\") {\n      const maxScale = this.option(\"maxScale\");\n\n      this.options.maxScale = function () {\n        return this.content.origWidth > 0 && this.content.fitWidth > 0\n          ? this.content.origWidth / this.content.fitWidth\n          : maxScale;\n      };\n    }\n\n    this.content = {\n      ...this.content,\n      origWidth,\n      origHeight,\n      fitWidth: width,\n      fitHeight: height,\n      width,\n      height,\n      scale: 1,\n      isZoomable: contentIsZoomable,\n    };\n\n    this.container = { width: containerRect.width, height: containerRect.height };\n\n    if (silently !== true) {\n      this.trigger(\"afterUpdate\");\n    }\n  }\n\n  /**\n   * Increase zoom level\n   * @param {Number} [step] Zoom ratio; `0.5` would increase scale from 1 to 1.5\n   */\n  zoomIn(step) {\n    this.zoomTo(this.content.scale + (step || this.option(\"step\")));\n  }\n\n  /**\n   * Decrease zoom level\n   * @param {Number} [step] Zoom ratio; `0.5` would decrease scale from 1.5 to 1\n   */\n  zoomOut(step) {\n    this.zoomTo(this.content.scale - (step || this.option(\"step\")));\n  }\n\n  /**\n   * Toggles zoom level between max and base levels\n   * @param {Object} [options] Additional options\n   */\n  toggleZoom(props = {}) {\n    const maxScale = this.option(\"maxScale\");\n    const baseScale = this.option(\"baseScale\");\n\n    const scale = this.content.scale > baseScale + (maxScale - baseScale) * 0.5 ? baseScale : maxScale;\n\n    this.zoomTo(scale, props);\n  }\n\n  /**\n   * Animate to given zoom level\n   * @param {Number} scale New zoom level\n   * @param {Object} [options] Additional options\n   */\n  zoomTo(scale = this.option(\"baseScale\"), { x = null, y = null } = {}) {\n    scale = Math.max(Math.min(scale, this.option(\"maxScale\")), this.option(\"minScale\"));\n\n    // Adjust zoom position\n    const currentScale = round(this.content.scale / (this.content.width / this.content.fitWidth), 10000000);\n\n    if (x === null) {\n      x = this.content.width * currentScale * 0.5;\n    }\n\n    if (y === null) {\n      y = this.content.height * currentScale * 0.5;\n    }\n\n    const { deltaX, deltaY } = this.getZoomDelta(scale, x, y);\n\n    x = this.content.x - deltaX;\n    y = this.content.y - deltaY;\n\n    this.panTo({ x, y, scale, friction: this.option(\"zoomFriction\") });\n  }\n\n  /**\n   * Calculate difference for top/left values if content would scale at given coordinates\n   * @param {Number} scale\n   * @param {Number} x\n   * @param {Number} y\n   * @returns {Object}\n   */\n  getZoomDelta(scale, x = 0, y = 0) {\n    const currentWidth = this.content.fitWidth * this.content.scale;\n    const currentHeight = this.content.fitHeight * this.content.scale;\n\n    const percentXInCurrentBox = x > 0 && currentWidth ? x / currentWidth : 0;\n    const percentYInCurrentBox = y > 0 && currentHeight ? y / currentHeight : 0;\n\n    const nextWidth = this.content.fitWidth * scale;\n    const nextHeight = this.content.fitHeight * scale;\n\n    const deltaX = (nextWidth - currentWidth) * percentXInCurrentBox;\n    const deltaY = (nextHeight - currentHeight) * percentYInCurrentBox;\n\n    return { deltaX, deltaY };\n  }\n\n  /**\n   * Animate to given positon and/or zoom level\n   * @param {Object} [options] Additional options\n   */\n  panTo({\n    x = this.content.x,\n    y = this.content.y,\n    scale,\n    friction = this.option(\"friction\"),\n    ignoreBounds = false,\n  } = {}) {\n    scale = scale || this.content.scale || 1;\n\n    if (!ignoreBounds) {\n      const { boundX, boundY } = this.getBounds(scale);\n\n      if (boundX) {\n        x = Math.max(Math.min(x, boundX.to), boundX.from);\n      }\n\n      if (boundY) {\n        y = Math.max(Math.min(y, boundY.to), boundY.from);\n      }\n    }\n\n    this.friction = friction;\n\n    this.transform = {\n      ...this.transform,\n      x,\n      y,\n      scale,\n    };\n\n    if (friction) {\n      this.state = \"panning\";\n\n      this.velocity = {\n        x: (1 / this.friction - 1) * (x - this.content.x),\n        y: (1 / this.friction - 1) * (y - this.content.y),\n        scale: (1 / this.friction - 1) * (scale - this.content.scale),\n      };\n\n      this.startAnimation();\n    } else {\n      this.endAnimation();\n    }\n  }\n\n  /**\n   * Start animation loop\n   */\n  startAnimation() {\n    if (!this.rAF) {\n      this.trigger(\"startAnimation\");\n    } else {\n      cancelAnimationFrame(this.rAF);\n    }\n\n    this.rAF = requestAnimationFrame(() => this.animate());\n  }\n\n  /**\n   * Process animation frame\n   */\n  animate() {\n    this.setEdgeForce();\n    this.setDragForce();\n\n    this.velocity.x *= this.friction;\n    this.velocity.y *= this.friction;\n\n    this.velocity.scale *= this.friction;\n\n    this.content.x += this.velocity.x;\n    this.content.y += this.velocity.y;\n\n    this.content.scale += this.velocity.scale;\n\n    if (this.isAnimating()) {\n      this.setTransform();\n    } else if (this.state !== \"pointerdown\") {\n      this.endAnimation();\n\n      return;\n    }\n\n    this.rAF = requestAnimationFrame(() => this.animate());\n  }\n\n  /**\n   * Calculate boundaries\n   */\n  getBounds(scale) {\n    let boundX = this.boundX;\n    let boundY = this.boundY;\n\n    if (boundX !== undefined && boundY !== undefined) {\n      return { boundX, boundY };\n    }\n\n    boundX = { from: 0, to: 0 };\n    boundY = { from: 0, to: 0 };\n\n    scale = scale || this.transform.scale;\n\n    const width = this.content.fitWidth * scale;\n    const height = this.content.fitHeight * scale;\n\n    const viewportWidth = this.viewport.width;\n    const viewportHeight = this.viewport.height;\n\n    if (width < viewportWidth) {\n      const deltaX = round((viewportWidth - width) * 0.5);\n\n      boundX.from = deltaX;\n      boundX.to = deltaX;\n    } else {\n      boundX.from = round(viewportWidth - width);\n    }\n\n    if (height < viewportHeight) {\n      const deltaY = (viewportHeight - height) * 0.5;\n\n      boundY.from = deltaY;\n      boundY.to = deltaY;\n    } else {\n      boundY.from = round(viewportHeight - height);\n    }\n\n    return { boundX, boundY };\n  }\n\n  /**\n   * Change animation velocity if boundary is reached\n   */\n  setEdgeForce() {\n    if (this.state !== \"decel\") {\n      return;\n    }\n\n    const bounceForce = this.option(\"bounceForce\");\n\n    const { boundX, boundY } = this.getBounds(Math.max(this.transform.scale, this.content.scale));\n\n    let pastLeft, pastRight, pastTop, pastBottom;\n\n    if (boundX) {\n      pastLeft = this.content.x < boundX.from;\n      pastRight = this.content.x > boundX.to;\n    }\n\n    if (boundY) {\n      pastTop = this.content.y < boundY.from;\n      pastBottom = this.content.y > boundY.to;\n    }\n\n    if (pastLeft || pastRight) {\n      const bound = pastLeft ? boundX.from : boundX.to;\n      const distance = bound - this.content.x;\n\n      let force = distance * bounceForce;\n\n      const restX = this.content.x + (this.velocity.x + force) / this.friction;\n\n      if (restX >= boundX.from && restX <= boundX.to) {\n        force += this.velocity.x;\n      }\n\n      this.velocity.x = force;\n\n      this.recalculateTransform();\n    }\n\n    if (pastTop || pastBottom) {\n      const bound = pastTop ? boundY.from : boundY.to;\n      const distance = bound - this.content.y;\n\n      let force = distance * bounceForce;\n\n      const restY = this.content.y + (force + this.velocity.y) / this.friction;\n\n      if (restY >= boundY.from && restY <= boundY.to) {\n        force += this.velocity.y;\n      }\n\n      this.velocity.y = force;\n\n      this.recalculateTransform();\n    }\n  }\n\n  /**\n   * Change dragging position if boundary is reached\n   */\n  setDragResistance() {\n    if (this.state !== \"pointerdown\") {\n      return;\n    }\n\n    const { boundX, boundY } = this.getBounds(this.dragPosition.scale);\n\n    let pastLeft, pastRight, pastTop, pastBottom;\n\n    if (boundX) {\n      pastLeft = this.dragPosition.x < boundX.from;\n      pastRight = this.dragPosition.x > boundX.to;\n    }\n\n    if (boundY) {\n      pastTop = this.dragPosition.y < boundY.from;\n      pastBottom = this.dragPosition.y > boundY.to;\n    }\n\n    if ((pastLeft || pastRight) && !(pastLeft && pastRight)) {\n      const bound = pastLeft ? boundX.from : boundX.to;\n      const distance = bound - this.dragPosition.x;\n\n      this.dragPosition.x = bound - distance * 0.3;\n    }\n\n    if ((pastTop || pastBottom) && !(pastTop && pastBottom)) {\n      const bound = pastTop ? boundY.from : boundY.to;\n      const distance = bound - this.dragPosition.y;\n\n      this.dragPosition.y = bound - distance * 0.3;\n    }\n  }\n\n  /**\n   * Set velocity to move content to drag position\n   */\n  setDragForce() {\n    if (this.state === \"pointerdown\") {\n      this.velocity.x = this.dragPosition.x - this.content.x;\n      this.velocity.y = this.dragPosition.y - this.content.y;\n      this.velocity.scale = this.dragPosition.scale - this.content.scale;\n    }\n  }\n\n  /**\n   * Update end values based on current velocity and friction;\n   */\n  recalculateTransform() {\n    this.transform.x = this.content.x + this.velocity.x / (1 / this.friction - 1);\n    this.transform.y = this.content.y + this.velocity.y / (1 / this.friction - 1);\n    this.transform.scale = this.content.scale + this.velocity.scale / (1 / this.friction - 1);\n  }\n\n  /**\n   * Check if content is currently animating\n   * @returns {Boolean}\n   */\n  isAnimating() {\n    return !!(\n      this.friction &&\n      (Math.abs(this.velocity.x) > 0.05 || Math.abs(this.velocity.y) > 0.05 || Math.abs(this.velocity.scale) > 0.05)\n    );\n  }\n\n  /**\n   * Set content `style.transform` value based on current animation frame\n   */\n  setTransform(final) {\n    let x, y, scale;\n\n    if (final) {\n      x = round(this.transform.x);\n      y = round(this.transform.y);\n\n      scale = this.transform.scale;\n\n      this.content = { ...this.content, x, y, scale };\n    } else {\n      x = round(this.content.x);\n      y = round(this.content.y);\n\n      scale = this.content.scale / (this.content.width / this.content.fitWidth);\n\n      this.content = { ...this.content, x, y };\n    }\n\n    this.trigger(\"beforeTransform\");\n\n    x = round(this.content.x);\n    y = round(this.content.y);\n\n    if (final && this.option(\"zoom\")) {\n      let width;\n      let height;\n\n      width = round(this.content.fitWidth * scale);\n      height = round(this.content.fitHeight * scale);\n\n      this.content.width = width;\n      this.content.height = height;\n\n      this.transform = { ...this.transform, width, height, scale };\n\n      Object.assign(this.$content.style, {\n        width: `${width}px`,\n        height: `${height}px`,\n        maxWidth: \"none\",\n        maxHeight: \"none\",\n        transform: `translate3d(${x}px, ${y}px, 0) scale(1)`,\n      });\n    } else {\n      this.$content.style.transform = `translate3d(${x}px, ${y}px, 0) scale(${scale})`;\n    }\n\n    this.trigger(\"afterTransform\");\n  }\n\n  /**\n   * Stop animation loop\n   */\n  endAnimation(silently) {\n    cancelAnimationFrame(this.rAF);\n    this.rAF = null;\n\n    this.velocity = {\n      x: 0,\n      y: 0,\n      scale: 0,\n    };\n\n    this.setTransform(true);\n\n    this.state = \"ready\";\n\n    this.handleCursor();\n\n    if (silently !== true) {\n      this.trigger(\"endAnimation\");\n    }\n  }\n\n  /**\n   * Update the class name depending on whether the content is scaled\n   */\n  handleCursor() {\n    const draggableClass = this.option(\"draggableClass\");\n\n    if (!draggableClass || !this.option(\"touch\")) {\n      return;\n    }\n\n    if (\n      this.option(\"panOnlyZoomed\") == true &&\n      this.content.width <= this.viewport.width &&\n      this.content.height <= this.viewport.height &&\n      this.transform.scale <= this.option(\"baseScale\")\n    ) {\n      this.$container.classList.remove(draggableClass);\n    } else {\n      this.$container.classList.add(draggableClass);\n    }\n  }\n\n  /**\n   * Remove observation and detach event listeners\n   */\n  detachEvents() {\n    this.$content.removeEventListener(\"load\", this.onLoad);\n\n    this.$container.removeEventListener(\"wheel\", this.onWheel, { passive: false });\n    this.$container.removeEventListener(\"click\", this.onClick, { passive: false });\n\n    if (this.pointerTracker) {\n      this.pointerTracker.stop();\n      this.pointerTracker = null;\n    }\n\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n      this.resizeObserver = null;\n    }\n  }\n\n  /**\n   * Clean up\n   */\n  destroy() {\n    if (this.state === \"destroy\") {\n      return;\n    }\n\n    this.state = \"destroy\";\n\n    clearTimeout(this.updateTimer);\n    this.updateTimer = null;\n\n    cancelAnimationFrame(this.rAF);\n    this.rAF = null;\n\n    this.detachEvents();\n\n    this.detachPlugins();\n\n    this.resetDragPosition();\n  }\n}\n\n// Expose version\nPanzoom.version = \"__VERSION__\";\n\n// Static properties are a recent addition that dont work in all browsers yet\nPanzoom.Plugins = Plugins;\n","export const Plugins = {};\n","/**\n * Throttling enforces a maximum number of times a function can be called over time\n * @param {Function} func Callback function\n * @param {Integer} limit Milliseconds\n * @returns {Function}\n */\nexport const throttle = (func, limit) => {\n  let lastCall = 0;\n\n  return function (...args) {\n    const now = new Date().getTime();\n\n    if (now - lastCall < limit) {\n      return;\n    }\n\n    lastCall = now;\n\n    return func(...args);\n  };\n};\n","const defaults = {\n  prevTpl: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" tabindex=\"-1\"><path d=\"M15 3l-9 9 9 9\"/></svg>',\n  nextTpl: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" tabindex=\"-1\"><path d=\"M9 3l9 9-9 9\"/></svg>',\n\n  classNames: {\n    main: \"carousel__nav\",\n    button: \"carousel__button\",\n\n    next: \"is-next\",\n    prev: \"is-prev\",\n  },\n};\n\nexport class Navigation {\n  constructor(carousel) {\n    this.$container = null;\n\n    this.$prev = null;\n    this.$next = null;\n\n    this.carousel = carousel;\n\n    this.onRefresh = this.onRefresh.bind(this);\n  }\n\n  /**\n   * Shortcut to get option for this plugin\n   * @param {String} name option name\n   * @returns option value\n   */\n  option(name) {\n    return this.carousel.option(`Navigation.${name}`);\n  }\n\n  /**\n   * Creates and returns new button element with default class names and click event\n   * @param {String} type\n   */\n  createButton(type) {\n    const $btn = document.createElement(\"button\");\n\n    $btn.setAttribute(\"title\", this.carousel.localize(`{{${type.toUpperCase()}}}`));\n\n    const classNames = this.option(\"classNames.button\") + \" \" + this.option(`classNames.${type}`);\n\n    $btn.classList.add(...classNames.split(\" \"));\n    $btn.setAttribute(\"tabindex\", \"0\");\n    $btn.innerHTML = this.carousel.localize(this.option(`${type}Tpl`));\n\n    $btn.addEventListener(\"click\", (event) => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.carousel[`slide${type === \"next\" ? \"Next\" : \"Prev\"}`]();\n    });\n\n    return $btn;\n  }\n\n  /**\n   * Build necessary DOM elements\n   */\n  build() {\n    if (!this.$container) {\n      this.$container = document.createElement(\"div\");\n      this.$container.classList.add(...this.option(\"classNames.main\").split(\" \"));\n\n      this.carousel.$container.appendChild(this.$container);\n    }\n\n    if (!this.$next) {\n      this.$next = this.createButton(\"next\");\n\n      this.$container.appendChild(this.$next);\n    }\n\n    if (!this.$prev) {\n      this.$prev = this.createButton(\"prev\");\n\n      this.$container.appendChild(this.$prev);\n    }\n  }\n\n  /**\n   *  Process carousel `refresh` and `change` events to enable/disable buttons if needed\n   */\n  onRefresh() {\n    const pageCount = this.carousel.pages.length;\n\n    if (\n      pageCount <= 1 ||\n      (pageCount > 1 &&\n        this.carousel.elemDimWidth < this.carousel.wrapDimWidth &&\n        !Number.isInteger(this.carousel.option(\"slidesPerPage\")))\n    ) {\n      this.cleanup();\n\n      return;\n    }\n\n    this.build();\n\n    this.$prev.removeAttribute(\"disabled\");\n    this.$next.removeAttribute(\"disabled\");\n\n    if (this.carousel.option(\"infiniteX\", this.carousel.option(\"infinite\"))) {\n      return;\n    }\n\n    if (this.carousel.page <= 0) {\n      this.$prev.setAttribute(\"disabled\", \"\");\n    }\n\n    if (this.carousel.page >= pageCount - 1) {\n      this.$next.setAttribute(\"disabled\", \"\");\n    }\n  }\n\n  cleanup() {\n    if (this.$prev) {\n      this.$prev.remove();\n    }\n\n    this.$prev = null;\n\n    if (this.$next) {\n      this.$next.remove();\n    }\n\n    this.$next = null;\n\n    if (this.$container) {\n      this.$container.remove();\n    }\n\n    this.$container = null;\n  }\n\n  attach() {\n    this.carousel.on(\"refresh change\", this.onRefresh);\n  }\n\n  detach() {\n    this.carousel.off(\"refresh change\", this.onRefresh);\n\n    this.cleanup();\n  }\n}\n\n// Expose defaults\nNavigation.defaults = defaults;\n","const defaults = {\n  friction: 0.92,\n};\n\nexport class Sync {\n  constructor(carousel) {\n    this.carousel = carousel;\n\n    this.selectedIndex = null;\n    this.friction = 0;\n\n    this.onNavReady = this.onNavReady.bind(this);\n    this.onNavClick = this.onNavClick.bind(this);\n    this.onNavCreateSlide = this.onNavCreateSlide.bind(this);\n\n    this.onTargetChange = this.onTargetChange.bind(this);\n  }\n\n  /**\n   * Make this one as main carousel and selected carousel as navigation\n   * @param {Object} nav Carousel\n   */\n  addAsTargetFor(nav) {\n    this.target = this.carousel;\n    this.nav = nav;\n\n    this.attachEvents();\n  }\n\n  /**\n   * Make this one as navigation carousel for selected carousel\n   * @param {Object} target\n   */\n  addAsNavFor(target) {\n    this.target = target;\n    this.nav = this.carousel;\n\n    this.attachEvents();\n  }\n\n  /**\n   * Attach event listeners on both carousels\n   */\n  attachEvents() {\n    this.nav.options.initialSlide = this.target.options.initialPage;\n\n    this.nav.on(\"ready\", this.onNavReady);\n    this.nav.on(\"createSlide\", this.onNavCreateSlide);\n    this.nav.on(\"Panzoom.click\", this.onNavClick);\n\n    this.target.on(\"change\", this.onTargetChange);\n    this.target.on(\"Panzoom.afterUpdate\", this.onTargetChange);\n  }\n\n  /**\n   * Process main carousel `ready` event; bind events and set initial page\n   */\n  onNavReady() {\n    this.onTargetChange(true);\n  }\n\n  /**\n   * Process main carousel `click` event\n   * @param {Object} panzoom\n   * @param {Object} event\n   */\n  onNavClick(carousel, panzoom, event) {\n    const clickedNavSlide = event.target.closest(\".carousel__slide\");\n\n    if (!clickedNavSlide) {\n      return;\n    }\n\n    event.stopPropagation();\n\n    const selectedNavIndex = parseInt(clickedNavSlide.dataset.index, 10);\n    const selectedSyncPage = this.target.findPageForSlide(selectedNavIndex);\n\n    if (this.target.page !== selectedSyncPage) {\n      this.target.slideTo(selectedSyncPage, { friction: this.friction });\n    }\n\n    this.markSelectedSlide(selectedNavIndex);\n  }\n\n  /**\n   * Process main carousel `createSlide` event\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onNavCreateSlide(carousel, slide) {\n    if (slide.index === this.selectedIndex) {\n      this.markSelectedSlide(slide.index);\n    }\n  }\n\n  /**\n   * Process target carousel `change` event\n   * @param {Object} target\n   */\n  onTargetChange() {\n    const targetIndex = this.target.pages[this.target.page].indexes[0];\n    const selectedNavPage = this.nav.findPageForSlide(targetIndex);\n\n    this.nav.slideTo(selectedNavPage);\n\n    this.markSelectedSlide(targetIndex);\n  }\n\n  /**\n   * Toggle classname for slides that marks currently selected slides\n   * @param {Number} selectedIndex\n   */\n  markSelectedSlide(selectedIndex) {\n    this.selectedIndex = selectedIndex;\n\n    [...this.nav.slides].filter((slide) => slide.$el && slide.$el.classList.remove(\"is-nav-selected\"));\n\n    const slide = this.nav.slides[selectedIndex];\n\n    if (slide && slide.$el) slide.$el.classList.add(\"is-nav-selected\");\n  }\n\n  attach(carousel) {\n    const sync = carousel.options.Sync;\n\n    if (!sync.target && !sync.nav) {\n      return;\n    }\n\n    if (sync.target) {\n      this.addAsNavFor(sync.target);\n    } else if (sync.nav) {\n      this.addAsTargetFor(sync.nav);\n    }\n\n    this.friction = sync.friction;\n  }\n\n  detach() {\n    if (this.nav) {\n      this.nav.off(\"ready\", this.onNavReady);\n      this.nav.off(\"Panzoom.click\", this.onNavClick);\n      this.nav.off(\"createSlide\", this.onNavCreateSlide);\n    }\n\n    if (this.target) {\n      this.target.off(\"Panzoom.afterUpdate\", this.onTargetChange);\n      this.target.off(\"change\", this.onTargetChange);\n    }\n  }\n}\n\n// Expose defaults\nSync.defaults = defaults;\n","import { Navigation } from \"./Navigation/Navigation.js\";\nimport { Dots } from \"./Dots/Dots.js\";\nimport { Sync } from \"./Sync/Sync.js\";\n\nexport const Plugins = { Navigation, Dots, Sync };\n","const defaults = {\n  // The minimum number of slides to display dots\n  minSlideCount: 2,\n};\n\nexport class Dots {\n  constructor(carousel) {\n    this.carousel = carousel;\n\n    this.$list = null;\n\n    this.events = {\n      change: this.onChange.bind(this),\n      refresh: this.onRefresh.bind(this),\n    };\n  }\n\n  /**\n   * Build wrapping DOM element containing all dots\n   */\n  buildList() {\n    if (this.carousel.pages.length < this.carousel.option(\"Dots.minSlideCount\")) {\n      return;\n    }\n\n    const $list = document.createElement(\"ol\");\n\n    $list.classList.add(\"carousel__dots\");\n\n    $list.addEventListener(\"click\", (e) => {\n      if (!(\"page\" in e.target.dataset)) {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      const page = parseInt(e.target.dataset.page, 10);\n      const carousel = this.carousel;\n\n      if (page === carousel.page) {\n        return;\n      }\n\n      if (carousel.pages.length < 3 && carousel.option(\"infinite\")) {\n        carousel[page == 0 ? \"slidePrev\" : \"slideNext\"]();\n      } else {\n        carousel.slideTo(page);\n      }\n    });\n\n    this.$list = $list;\n\n    this.carousel.$container.appendChild($list);\n    this.carousel.$container.classList.add(\"has-dots\");\n\n    return $list;\n  }\n\n  /**\n   * Remove wrapping DOM element\n   */\n  removeList() {\n    if (this.$list) {\n      this.$list.parentNode.removeChild(this.$list);\n      this.$list = null;\n    }\n\n    this.carousel.$container.classList.remove(\"has-dots\");\n  }\n\n  /**\n   * Remove existing dots and create fresh ones\n   */\n  rebuildDots() {\n    let $list = this.$list;\n\n    const listExists = !!$list;\n    const pagesCount = this.carousel.pages.length;\n\n    if (pagesCount < 2) {\n      if (listExists) {\n        this.removeList();\n      }\n\n      return;\n    }\n\n    if (!listExists) {\n      $list = this.buildList();\n    }\n\n    // Remove existing dots\n    const dotCount = this.$list.children.length;\n\n    if (dotCount > pagesCount) {\n      for (let i = pagesCount; i < dotCount; i++) {\n        this.$list.removeChild(this.$list.lastChild);\n      }\n\n      return;\n    }\n\n    // Create fresh DOM elements (dots) for each page\n    for (let index = dotCount; index < pagesCount; index++) {\n      const $dot = document.createElement(\"li\");\n\n      $dot.classList.add(\"carousel__dot\");\n      $dot.dataset.page = index;\n\n      $dot.setAttribute(\"role\", \"button\");\n      $dot.setAttribute(\"tabindex\", \"0\");\n      $dot.setAttribute(\"title\", this.carousel.localize(\"{{GOTO}}\", [[\"%d\", index + 1]]));\n\n      $dot.addEventListener(\"keydown\", (event) => {\n        const code = event.code;\n\n        let $el;\n\n        if (code === \"Enter\" || code === \"NumpadEnter\") {\n          $el = $dot;\n        } else if (code === \"ArrowRight\") {\n          $el = $dot.nextSibling;\n        } else if (code === \"ArrowLeft\") {\n          $el = $dot.previousSibling;\n        }\n\n        $el && $el.click();\n      });\n\n      this.$list.appendChild($dot);\n    }\n\n    this.setActiveDot();\n  }\n\n  /**\n   * Mark active dot by toggling class name\n   */\n  setActiveDot() {\n    if (!this.$list) {\n      return;\n    }\n\n    this.$list.childNodes.forEach(($dot) => {\n      $dot.classList.remove(\"is-selected\");\n    });\n\n    const $activeDot = this.$list.childNodes[this.carousel.page];\n\n    if ($activeDot) {\n      $activeDot.classList.add(\"is-selected\");\n    }\n  }\n\n  /**\n   * Process carousel `change` event\n   */\n  onChange() {\n    this.setActiveDot();\n  }\n\n  /**\n   * Process carousel `refresh` event\n   */\n  onRefresh() {\n    this.rebuildDots();\n  }\n\n  attach() {\n    this.carousel.on(this.events);\n  }\n\n  detach() {\n    this.removeList();\n\n    this.carousel.off(this.events);\n    this.carousel = null;\n  }\n}\n","import { Base } from \"../shared/Base/Base.js\";\r\nimport { Panzoom } from \"../Panzoom/Panzoom.js\";\r\n\r\nimport { extend } from \"../shared/utils/extend.js\";\r\nimport { round } from \"../shared/utils/round.js\";\r\nimport { throttle } from \"../shared/utils/throttle.js\";\r\n\r\nimport { Plugins } from \"./plugins/index.js\";\r\n\r\n// Default language\r\nimport en from \"./l10n/en.js\";\r\n\r\nconst defaults = {\r\n  // Virtual slides. Each object should have at least `html` property that will be used to set content,\r\n  // example: `slides: [{html: 'First slide'}, {html: 'Second slide'}]`\r\n  slides: [],\r\n\r\n  // Number of slides to preload before/after visible slides\r\n  preload: 0,\r\n\r\n  // Number of slides to group into the page,\r\n  // if `auto` - group all slides that fit into the viewport\r\n  slidesPerPage: \"auto\",\r\n\r\n  // Index of initial page\r\n  initialPage: null,\r\n\r\n  // Index of initial slide\r\n  initialSlide: null,\r\n\r\n  // Panzoom friction while changing page\r\n  friction: 0.92,\r\n\r\n  // Should center active page\r\n  center: true,\r\n\r\n  // Should carousel scroll infinitely\r\n  infinite: true,\r\n\r\n  // Should the gap be filled before first and after last slide if `infinite: false`\r\n  fill: true,\r\n\r\n  // Should Carousel settle at any position after a swipe.\r\n  dragFree: false,\r\n\r\n  // Prefix for CSS classes, must be the same as the  SCSS `$carousel-prefix` variable\r\n  prefix: \"\",\r\n\r\n  // Class names for DOM elements (without prefix)\r\n  classNames: {\r\n    viewport: \"carousel__viewport\",\r\n    track: \"carousel__track\",\r\n    slide: \"carousel__slide\",\r\n\r\n    // Classname toggled for slides inside current page\r\n    slideSelected: \"is-selected\",\r\n  },\r\n\r\n  // Localization of strings\r\n  l10n: en,\r\n};\r\n\r\nexport class Carousel extends Base {\r\n  /**\r\n   * Carousel constructor\r\n   * @constructs Carousel\r\n   * @param {HTMLElement} $container - Carousel container\r\n   * @param {Object} [options] - Options for Carousel\r\n   */\r\n  constructor($container, options = {}) {\r\n    options = extend(true, {}, defaults, options);\r\n\r\n    super(options);\r\n\r\n    this.state = \"init\";\r\n\r\n    this.$container = $container;\r\n\r\n    if (!(this.$container instanceof HTMLElement)) {\r\n      throw new Error(\"No root element provided\");\r\n    }\r\n\r\n    this.slideNext = throttle(this.slideNext.bind(this), 250, true);\r\n    this.slidePrev = throttle(this.slidePrev.bind(this), 250, true);\r\n\r\n    this.init();\r\n\r\n    $container.__Carousel = this;\r\n  }\r\n\r\n  /**\r\n   * Perform initialization\r\n   */\r\n  init() {\r\n    this.pages = [];\r\n    this.page = this.pageIndex = null;\r\n    this.prevPage = this.prevPageIndex = null;\r\n\r\n    this.attachPlugins(Carousel.Plugins);\r\n\r\n    this.trigger(\"init\");\r\n\r\n    this.initLayout();\r\n\r\n    this.initSlides();\r\n\r\n    this.updateMetrics();\r\n\r\n    if (this.$track && this.pages.length) {\r\n      this.$track.style.transform = `translate3d(${this.pages[this.page].left * -1}px, 0px, 0) scale(1)`;\r\n    }\r\n\r\n    this.manageSlideVisiblity();\r\n\r\n    this.initPanzoom();\r\n\r\n    this.state = \"ready\";\r\n\r\n    this.trigger(\"ready\");\r\n  }\r\n\r\n  /**\r\n   * Initialize layout; create necessary elements\r\n   */\r\n  initLayout() {\r\n    const prefix = this.option(\"prefix\");\r\n    const classNames = this.option(\"classNames\");\r\n\r\n    this.$viewport = this.option(\"viewport\") || this.$container.querySelector(`.${prefix}${classNames.viewport}`);\r\n\r\n    if (!this.$viewport) {\r\n      this.$viewport = document.createElement(\"div\");\r\n      this.$viewport.classList.add(...(prefix + classNames.viewport).split(\" \"));\r\n\r\n      this.$viewport.append(...this.$container.childNodes);\r\n\r\n      this.$container.appendChild(this.$viewport);\r\n    }\r\n\r\n    this.$track = this.option(\"track\") || this.$container.querySelector(`.${prefix}${classNames.track}`);\r\n\r\n    if (!this.$track) {\r\n      this.$track = document.createElement(\"div\");\r\n      this.$track.classList.add(...(prefix + classNames.track).split(\" \"));\r\n\r\n      this.$track.append(...this.$viewport.childNodes);\r\n\r\n      this.$viewport.appendChild(this.$track);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fill `slides` array with objects from existing nodes and/or `slides` option\r\n   */\r\n  initSlides() {\r\n    this.slides = [];\r\n\r\n    // Get existing slides from the DOM\r\n    const elems = this.$viewport.querySelectorAll(`.${this.option(\"prefix\")}${this.option(\"classNames.slide\")}`);\r\n\r\n    elems.forEach((el) => {\r\n      const slide = {\r\n        $el: el,\r\n        isDom: true,\r\n      };\r\n\r\n      this.slides.push(slide);\r\n\r\n      this.trigger(\"createSlide\", slide, this.slides.length);\r\n    });\r\n\r\n    // Add virtual slides, but do not create DOM elements yet,\r\n    // because they will be created dynamically based on current carousel position\r\n    if (Array.isArray(this.options.slides)) {\r\n      this.slides = extend(true, [...this.slides], this.options.slides);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do all calculations related to slide size and paging\r\n   */\r\n  updateMetrics() {\r\n    // Calculate content width, viewport width\r\n    // ===\r\n    let contentWidth = 0;\r\n    let indexes = [];\r\n    let lastSlideWidth;\r\n\r\n    this.slides.forEach((slide, index) => {\r\n      const $el = slide.$el;\r\n      const slideWidth = slide.isDom || !lastSlideWidth ? this.getSlideMetrics($el) : lastSlideWidth;\r\n\r\n      slide.index = index;\r\n      slide.width = slideWidth;\r\n      slide.left = contentWidth;\r\n\r\n      lastSlideWidth = slideWidth;\r\n      contentWidth += slideWidth;\r\n\r\n      indexes.push(index);\r\n    });\r\n\r\n    let viewportWidth = Math.max(this.$track.offsetWidth, round(this.$track.getBoundingClientRect().width));\r\n\r\n    let viewportStyles = getComputedStyle(this.$track);\r\n    viewportWidth = viewportWidth - (parseFloat(viewportStyles.paddingLeft) + parseFloat(viewportStyles.paddingRight));\r\n\r\n    this.contentWidth = contentWidth;\r\n    this.viewportWidth = viewportWidth;\r\n\r\n    // Split slides into pages\r\n    // ===\r\n    const pages = [];\r\n    const slidesPerPage = this.option(\"slidesPerPage\");\r\n\r\n    if (Number.isInteger(slidesPerPage) && contentWidth > viewportWidth) {\r\n      // Fixed number of slides in the page\r\n      for (let i = 0; i < this.slides.length; i += slidesPerPage) {\r\n        pages.push({\r\n          indexes: indexes.slice(i, i + slidesPerPage),\r\n          slides: this.slides.slice(i, i + slidesPerPage),\r\n        });\r\n      }\r\n    } else {\r\n      // Slides that fit inside viewport\r\n      let currentPage = 0;\r\n      let currentWidth = 0;\r\n\r\n      for (let i = 0; i < this.slides.length; i += 1) {\r\n        let slide = this.slides[i];\r\n\r\n        // Add next page\r\n        if (!pages.length || currentWidth + slide.width > viewportWidth) {\r\n          pages.push({\r\n            indexes: [],\r\n            slides: [],\r\n          });\r\n\r\n          currentPage = pages.length - 1;\r\n          currentWidth = 0;\r\n        }\r\n\r\n        currentWidth += slide.width;\r\n\r\n        pages[currentPage].indexes.push(i);\r\n        pages[currentPage].slides.push(slide);\r\n      }\r\n    }\r\n\r\n    const shouldCenter = this.option(\"center\");\r\n    const shouldFill = this.option(\"fill\");\r\n\r\n    // Calculate width and start position for each page\r\n    // ===\r\n    pages.forEach((page, index) => {\r\n      page.index = index;\r\n      page.width = page.slides.reduce((sum, slide) => sum + slide.width, 0);\r\n\r\n      page.left = page.slides[0].left;\r\n\r\n      if (shouldCenter) {\r\n        page.left += (viewportWidth - page.width) * 0.5 * -1;\r\n      }\r\n\r\n      if (shouldFill && !this.option(\"infiniteX\", this.option(\"infinite\")) && contentWidth > viewportWidth) {\r\n        page.left = Math.max(page.left, 0);\r\n        page.left = Math.min(page.left, contentWidth - viewportWidth);\r\n      }\r\n    });\r\n\r\n    // Merge pages\r\n    // ===\r\n    const rez = [];\r\n    let prevPage;\r\n\r\n    pages.forEach((page2) => {\r\n      const page = { ...page2 };\r\n\r\n      if (prevPage && page.left === prevPage.left) {\r\n        prevPage.width += page.width;\r\n\r\n        prevPage.slides = [...prevPage.slides, ...page.slides];\r\n        prevPage.indexes = [...prevPage.indexes, ...page.indexes];\r\n      } else {\r\n        page.index = rez.length;\r\n\r\n        prevPage = page;\r\n\r\n        rez.push(page);\r\n      }\r\n    });\r\n\r\n    this.pages = rez;\r\n\r\n    let page = this.page;\r\n\r\n    if (page === null) {\r\n      const initialSlide = this.option(\"initialSlide\");\r\n\r\n      if (initialSlide !== null) {\r\n        page = this.findPageForSlide(initialSlide);\r\n      } else {\r\n        page = parseInt(this.option(\"initialPage\", 0), 10) || 0;\r\n      }\r\n\r\n      if (!rez[page]) {\r\n        page = rez.length && page > rez.length ? rez[rez.length - 1].index : 0;\r\n      }\r\n\r\n      this.page = page;\r\n      this.pageIndex = page;\r\n    }\r\n\r\n    this.updatePanzoom();\r\n\r\n    this.trigger(\"refresh\");\r\n  }\r\n\r\n  /**\r\n   * Calculate slide element width (including left, right margins)\r\n   * @param {Object} node\r\n   * @returns {Number} Width in px\r\n   */\r\n  getSlideMetrics(node) {\r\n    if (!node) {\r\n      const firstSlide = this.slides[0];\r\n\r\n      node = document.createElement(\"div\");\r\n\r\n      node.dataset.isTestEl = 1;\r\n      node.style.visibility = \"hidden\";\r\n      node.classList.add(...(this.option(\"prefix\") + this.option(\"classNames.slide\")).split(\" \"));\r\n\r\n      // Assume all slides have the same custom class, if any\r\n      if (firstSlide.customClass) {\r\n        node.classList.add(...firstSlide.customClass.split(\" \"));\r\n      }\r\n\r\n      this.$track.prepend(node);\r\n    }\r\n\r\n    let width = Math.max(node.offsetWidth, round(node.getBoundingClientRect().width));\r\n\r\n    // Add left/right margin\r\n    const style = node.currentStyle || window.getComputedStyle(node);\r\n    width = width + (parseFloat(style.marginLeft) || 0) + (parseFloat(style.marginRight) || 0);\r\n\r\n    if (node.dataset.isTestEl) {\r\n      node.remove();\r\n    }\r\n\r\n    return width;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Integer} index Index of the slide\r\n   * @returns {Integer|null} Index of the page if found, or null\r\n   */\r\n  findPageForSlide(index) {\r\n    index = parseInt(index, 10) || 0;\r\n\r\n    const page = this.pages.find((page) => {\r\n      return page.indexes.indexOf(index) > -1;\r\n    });\r\n\r\n    return page ? page.index : null;\r\n  }\r\n\r\n  /**\r\n   * Slide to next page, if possible\r\n   */\r\n  slideNext() {\r\n    this.slideTo(this.pageIndex + 1);\r\n  }\r\n\r\n  /**\r\n   * Slide to previous page, if possible\r\n   */\r\n  slidePrev() {\r\n    this.slideTo(this.pageIndex - 1);\r\n  }\r\n\r\n  /**\r\n   * Slides carousel to given page\r\n   * @param {Number} page - New index of active page\r\n   * @param {Object} [params] - Additional options\r\n   */\r\n  slideTo(page, params = {}) {\r\n    const { x = this.setPage(page, true) * -1, y = 0, friction = this.option(\"friction\") } = params;\r\n\r\n    if (this.Panzoom.content.x === x && !this.Panzoom.velocity.x && friction) {\r\n      return;\r\n    }\r\n\r\n    this.Panzoom.panTo({\r\n      x,\r\n      y,\r\n      friction,\r\n      ignoreBounds: true,\r\n    });\r\n\r\n    if (this.state === \"ready\" && this.Panzoom.state === \"ready\") {\r\n      this.trigger(\"settle\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialise main Panzoom instance\r\n   */\r\n  initPanzoom() {\r\n    if (this.Panzoom) {\r\n      this.Panzoom.destroy();\r\n    }\r\n\r\n    // Create fresh object containing options for Pazoom instance\r\n    const options = extend(\r\n      true,\r\n      {},\r\n      {\r\n        // Track element will be set as Panzoom $content\r\n        content: this.$track,\r\n        wrapInner: false,\r\n        resizeParent: false,\r\n\r\n        // Disable any user interaction\r\n        zoom: false,\r\n        click: false,\r\n\r\n        // Right now, only horizontal navigation is supported\r\n        lockAxis: \"x\",\r\n\r\n        x: this.pages.length ? this.pages[this.page].left * -1 : 0,\r\n        centerOnStart: false,\r\n\r\n        // Make `textSelection` option more easy to customize\r\n        textSelection: () => this.option(\"textSelection\", false),\r\n\r\n        // Disable dragging if content (e.g. all slides) fits inside viewport\r\n        panOnlyZoomed: function () {\r\n          return this.content.width <= this.viewport.width;\r\n        },\r\n      },\r\n      this.option(\"Panzoom\")\r\n    );\r\n\r\n    // Create new Panzoom instance\r\n    this.Panzoom = new Panzoom(this.$container, options);\r\n\r\n    this.Panzoom.on({\r\n      // Bubble events\r\n      \"*\": (name, ...details) => this.trigger(`Panzoom.${name}`, ...details),\r\n      // The rest of events to be processed\r\n      afterUpdate: () => {\r\n        this.updatePage();\r\n      },\r\n      beforeTransform: this.onBeforeTransform.bind(this),\r\n      touchEnd: this.onTouchEnd.bind(this),\r\n      endAnimation: () => {\r\n        this.trigger(\"settle\");\r\n      },\r\n    });\r\n\r\n    // The contents of the slides may cause the page scroll bar to appear, so the carousel width may change\r\n    // and slides have to be repositioned\r\n    this.updateMetrics();\r\n    this.manageSlideVisiblity();\r\n  }\r\n\r\n  updatePanzoom() {\r\n    if (!this.Panzoom) {\r\n      return;\r\n    }\r\n\r\n    this.Panzoom.content = {\r\n      ...this.Panzoom.content,\r\n      fitWidth: this.contentWidth,\r\n      origWidth: this.contentWidth,\r\n      width: this.contentWidth,\r\n    };\r\n\r\n    if (this.pages.length > 1 && this.option(\"infiniteX\", this.option(\"infinite\"))) {\r\n      this.Panzoom.boundX = null;\r\n    } else if (this.pages.length) {\r\n      this.Panzoom.boundX = {\r\n        from: this.pages[this.pages.length - 1].left * -1,\r\n        to: this.pages[0].left * -1,\r\n      };\r\n    }\r\n\r\n    if (this.option(\"infiniteY\", this.option(\"infinite\"))) {\r\n      this.Panzoom.boundY = null;\r\n    } else {\r\n      this.Panzoom.boundY = {\r\n        from: 0,\r\n        to: 0,\r\n      };\r\n    }\r\n\r\n    this.Panzoom.handleCursor();\r\n  }\r\n\r\n  manageSlideVisiblity() {\r\n    const contentWidth = this.contentWidth;\r\n    const viewportWidth = this.viewportWidth;\r\n\r\n    let currentX = this.Panzoom ? this.Panzoom.content.x * -1 : this.pages.length ? this.pages[this.page].left : 0;\r\n\r\n    const preload = this.option(\"preload\");\r\n    const infinite = this.option(\"infiniteX\", this.option(\"infinite\"));\r\n\r\n    const paddingLeft = parseFloat(getComputedStyle(this.$viewport, null).getPropertyValue(\"padding-left\"));\r\n    const paddingRight = parseFloat(getComputedStyle(this.$viewport, null).getPropertyValue(\"padding-right\"));\r\n\r\n    // Check visibility of each slide\r\n    this.slides.forEach((slide) => {\r\n      let leftBoundary, rightBoundary;\r\n\r\n      let hasDiff = 0;\r\n\r\n      // #1 - slides in current viewport; this does not include infinite items\r\n      leftBoundary = currentX - paddingLeft;\r\n      rightBoundary = currentX + viewportWidth + paddingRight;\r\n\r\n      leftBoundary -= preload * (viewportWidth + paddingLeft + paddingRight);\r\n      rightBoundary += preload * (viewportWidth + paddingLeft + paddingRight);\r\n\r\n      const insideCurrentInterval = slide.left + slide.width > leftBoundary && slide.left < rightBoundary;\r\n\r\n      // #2 - infinite items inside current viewport; from previous interval\r\n      leftBoundary = currentX + contentWidth - paddingLeft;\r\n      rightBoundary = currentX + contentWidth + viewportWidth + paddingRight;\r\n\r\n      // Include slides that have to be preloaded\r\n      leftBoundary -= preload * (viewportWidth + paddingLeft + paddingRight);\r\n\r\n      const insidePrevInterval = infinite && slide.left + slide.width > leftBoundary && slide.left < rightBoundary;\r\n\r\n      // #2 - infinite items inside current viewport; from next interval\r\n      leftBoundary = currentX - contentWidth - paddingLeft;\r\n      rightBoundary = currentX - contentWidth + viewportWidth + paddingRight;\r\n\r\n      // Include slides that have to be preloaded\r\n      leftBoundary -= preload * (viewportWidth + paddingLeft + paddingRight);\r\n\r\n      const insideNextInterval = infinite && slide.left + slide.width > leftBoundary && slide.left < rightBoundary;\r\n\r\n      // Create virtual slides that should be visible or preloaded, remove others\r\n      if (insidePrevInterval || insideCurrentInterval || insideNextInterval) {\r\n        this.createSlideEl(slide);\r\n\r\n        if (insideCurrentInterval) {\r\n          hasDiff = 0;\r\n        }\r\n\r\n        if (insidePrevInterval) {\r\n          hasDiff = -1;\r\n        }\r\n\r\n        if (insideNextInterval) {\r\n          hasDiff = 1;\r\n        }\r\n\r\n        // Bring preloaded slides back to viewport, if needed\r\n        if (slide.left + slide.width > currentX && slide.left <= currentX + viewportWidth + paddingRight) {\r\n          hasDiff = 0;\r\n        }\r\n      } else {\r\n        this.removeSlideEl(slide);\r\n      }\r\n\r\n      slide.hasDiff = hasDiff;\r\n    });\r\n\r\n    // Reposition slides for continuity\r\n    let nextIndex = 0;\r\n    let nextPos = 0;\r\n\r\n    this.slides.forEach((slide, index) => {\r\n      let updatedX = 0;\r\n\r\n      if (slide.$el) {\r\n        if (index !== nextIndex || slide.hasDiff) {\r\n          updatedX = nextPos + slide.hasDiff * contentWidth;\r\n        } else {\r\n          nextPos = 0;\r\n        }\r\n\r\n        slide.$el.style.left = Math.abs(updatedX) > 0.1 ? `${nextPos + slide.hasDiff * contentWidth}px` : \"\";\r\n\r\n        nextIndex++;\r\n      } else {\r\n        nextPos += slide.width;\r\n      }\r\n    });\r\n\r\n    this.markSelectedSlides();\r\n  }\r\n\r\n  /**\r\n   * Creates main DOM element for virtual slides,\r\n   * lazy loads images inside regular slides\r\n   * @param {Object} slide\r\n   */\r\n  createSlideEl(slide) {\r\n    if (!slide) {\r\n      return;\r\n    }\r\n\r\n    if (slide.$el) {\r\n      let curentIndex = slide.$el.dataset.index;\r\n\r\n      if (!curentIndex || parseInt(curentIndex, 10) !== slide.index) {\r\n        slide.$el.dataset.index = slide.index;\r\n\r\n        // Lazy load images\r\n        // ===\r\n        slide.$el.querySelectorAll(\"[data-lazy-srcset]\").forEach((node) => {\r\n          node.srcset = node.dataset.lazySrcset;\r\n        });\r\n\r\n        slide.$el.querySelectorAll(\"[data-lazy-src]\").forEach((node) => {\r\n          let lazySrc = node.dataset.lazySrc;\r\n\r\n          if (node instanceof HTMLImageElement) {\r\n            node.src = lazySrc;\r\n          } else {\r\n            node.style.backgroundImage = `url('${lazySrc}')`;\r\n          }\r\n        });\r\n\r\n        // Lazy load slide background image\r\n        // ===\r\n        let lazySrc;\r\n\r\n        if ((lazySrc = slide.$el.dataset.lazySrc)) {\r\n          slide.$el.style.backgroundImage = `url('${lazySrc}')`;\r\n        }\r\n\r\n        slide.state = \"ready\";\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    const div = document.createElement(\"div\");\r\n\r\n    div.dataset.index = slide.index;\r\n    div.classList.add(...(this.option(\"prefix\") + this.option(\"classNames.slide\")).split(\" \"));\r\n\r\n    if (slide.customClass) {\r\n      div.classList.add(...slide.customClass.split(\" \"));\r\n    }\r\n\r\n    if (slide.html) {\r\n      div.innerHTML = slide.html;\r\n    }\r\n\r\n    const allElelements = [];\r\n\r\n    this.slides.forEach((slide, index) => {\r\n      if (slide.$el) {\r\n        allElelements.push(index);\r\n      }\r\n    });\r\n\r\n    // Find a place in DOM to insert an element\r\n    const goal = slide.index;\r\n    let refSlide = null;\r\n\r\n    if (allElelements.length) {\r\n      let refIndex = allElelements.reduce((prev, curr) =>\r\n        Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev\r\n      );\r\n      refSlide = this.slides[refIndex];\r\n    }\r\n\r\n    this.$track.insertBefore(\r\n      div,\r\n      refSlide && refSlide.$el ? (refSlide.index < slide.index ? refSlide.$el.nextSibling : refSlide.$el) : null\r\n    );\r\n\r\n    slide.$el = div;\r\n\r\n    this.trigger(\"createSlide\", slide, goal);\r\n\r\n    return slide;\r\n  }\r\n\r\n  /**\r\n   * Removes main DOM element of given slide\r\n   * @param {Object} slide\r\n   */\r\n  removeSlideEl(slide) {\r\n    if (slide.$el && !slide.isDom) {\r\n      this.trigger(\"removeSlide\", slide);\r\n\r\n      slide.$el.remove();\r\n      slide.$el = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggles selected class name and aria-hidden attribute for slides based on visibility\r\n   */\r\n  markSelectedSlides() {\r\n    const selectedClass = this.option(\"classNames.slideSelected\");\r\n    const attr = \"aria-hidden\";\r\n\r\n    this.slides.forEach((slide, index) => {\r\n      const $el = slide.$el;\r\n\r\n      if (!$el) {\r\n        return;\r\n      }\r\n\r\n      const page = this.pages[this.page];\r\n\r\n      if (page && page.indexes && page.indexes.indexOf(index) > -1) {\r\n        if (selectedClass && !$el.classList.contains(selectedClass)) {\r\n          $el.classList.add(selectedClass);\r\n          this.trigger(\"selectSlide\", slide);\r\n        }\r\n\r\n        $el.removeAttribute(attr);\r\n      } else {\r\n        if (selectedClass && $el.classList.contains(selectedClass)) {\r\n          $el.classList.remove(selectedClass);\r\n          this.trigger(\"unselectSlide\", slide);\r\n        }\r\n\r\n        $el.setAttribute(attr, true);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Perform all calculations and center current page\r\n   */\r\n  updatePage() {\r\n    this.updateMetrics();\r\n\r\n    this.slideTo(this.page, { friction: 0 });\r\n  }\r\n\r\n  /**\r\n   * Process `Panzoom.beforeTransform` event to remove slides moved out of viewport and\r\n   * to create necessary ones\r\n   */\r\n  onBeforeTransform() {\r\n    if (this.option(\"infiniteX\", this.option(\"infinite\"))) {\r\n      this.manageInfiniteTrack();\r\n    }\r\n\r\n    this.manageSlideVisiblity();\r\n  }\r\n\r\n  /**\r\n   * Seamlessly flip position of infinite carousel, if needed; this way x position stays low\r\n   */\r\n  manageInfiniteTrack() {\r\n    const contentWidth = this.contentWidth;\r\n    const viewportWidth = this.viewportWidth;\r\n\r\n    if (!this.option(\"infiniteX\", this.option(\"infinite\")) || this.pages.length < 2 || contentWidth < viewportWidth) {\r\n      return;\r\n    }\r\n\r\n    const panzoom = this.Panzoom;\r\n\r\n    let isFlipped = false;\r\n\r\n    if (panzoom.content.x < (contentWidth - viewportWidth) * -1) {\r\n      panzoom.content.x += contentWidth;\r\n\r\n      this.pageIndex = this.pageIndex - this.pages.length;\r\n\r\n      isFlipped = true;\r\n    }\r\n\r\n    if (panzoom.content.x > viewportWidth) {\r\n      panzoom.content.x -= contentWidth;\r\n\r\n      this.pageIndex = this.pageIndex + this.pages.length;\r\n\r\n      isFlipped = true;\r\n    }\r\n\r\n    if (isFlipped && panzoom.state === \"pointerdown\") {\r\n      panzoom.resetDragPosition();\r\n    }\r\n\r\n    return isFlipped;\r\n  }\r\n\r\n  /**\r\n   * Process `Panzoom.touchEnd` event; slide to next/prev page if needed\r\n   * @param {object} panzoom\r\n   */\r\n  onTouchEnd(panzoom, event) {\r\n    const dragFree = this.option(\"dragFree\");\r\n\r\n    // If this is a quick horizontal flick, slide to next/prev slide\r\n    if (\r\n      !dragFree &&\r\n      this.pages.length > 1 &&\r\n      panzoom.dragOffset.time < 350 &&\r\n      Math.abs(panzoom.dragOffset.y) < 1 &&\r\n      Math.abs(panzoom.dragOffset.x) > 5\r\n    ) {\r\n      this[panzoom.dragOffset.x < 0 ? \"slideNext\" : \"slidePrev\"]();\r\n      return;\r\n    }\r\n\r\n    // Set the slide at the end of the animation as the current one,\r\n    // or slide to closest page\r\n    if (dragFree) {\r\n      const [, nextPageIndex] = this.getPageFromPosition(panzoom.transform.x * -1);\r\n      this.setPage(nextPageIndex);\r\n    } else {\r\n      this.slideToClosest();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Slides to the closest page (useful, if carousel is changed manually)\r\n   * @param {Object} [params] - Object containing additional options\r\n   */\r\n  slideToClosest(params = {}) {\r\n    let [, nextPageIndex] = this.getPageFromPosition(this.Panzoom.content.x * -1);\r\n\r\n    this.slideTo(nextPageIndex, params);\r\n  }\r\n\r\n  /**\r\n   * Returns index of closest page to given x position\r\n   * @param {Number} xPos\r\n   */\r\n  getPageFromPosition(xPos) {\r\n    const pageCount = this.pages.length;\r\n    const center = this.option(\"center\");\r\n\r\n    if (center) {\r\n      xPos += this.viewportWidth * 0.5;\r\n    }\r\n\r\n    const interval = Math.floor(xPos / this.contentWidth);\r\n\r\n    xPos -= interval * this.contentWidth;\r\n\r\n    let slide = this.slides.find((slide) => slide.left <= xPos && slide.left + slide.width > xPos);\r\n\r\n    if (slide) {\r\n      let pageIndex = this.findPageForSlide(slide.index);\r\n\r\n      return [pageIndex, pageIndex + interval * pageCount];\r\n    }\r\n\r\n    return [0, 0];\r\n  }\r\n\r\n  /**\r\n   * Changes active page\r\n   * @param {Number} page - New index of active page\r\n   * @param {Boolean} toClosest - to closest page based on scroll distance (for infinite navigation)\r\n   */\r\n  setPage(page, toClosest) {\r\n    let nextPosition = 0;\r\n    let pageIndex = parseInt(page, 10) || 0;\r\n\r\n    const prevPage = this.page,\r\n      prevPageIndex = this.pageIndex,\r\n      pageCount = this.pages.length;\r\n\r\n    const contentWidth = this.contentWidth;\r\n    const viewportWidth = this.viewportWidth;\r\n\r\n    page = ((pageIndex % pageCount) + pageCount) % pageCount;\r\n\r\n    if (this.option(\"infiniteX\", this.option(\"infinite\")) && contentWidth > viewportWidth) {\r\n      const nextInterval = Math.floor(pageIndex / pageCount) || 0,\r\n        elemDimWidth = contentWidth;\r\n\r\n      nextPosition = this.pages[page].left + nextInterval * elemDimWidth;\r\n\r\n      if (toClosest === true && pageCount > 2) {\r\n        let currPosition = this.Panzoom.content.x * -1;\r\n\r\n        // * Find closest interval\r\n        const decreasedPosition = nextPosition - elemDimWidth,\r\n          increasedPosition = nextPosition + elemDimWidth,\r\n          diff1 = Math.abs(currPosition - nextPosition),\r\n          diff2 = Math.abs(currPosition - decreasedPosition),\r\n          diff3 = Math.abs(currPosition - increasedPosition);\r\n\r\n        if (diff3 < diff1 && diff3 <= diff2) {\r\n          nextPosition = increasedPosition;\r\n          pageIndex += pageCount;\r\n        } else if (diff2 < diff1 && diff2 < diff3) {\r\n          nextPosition = decreasedPosition;\r\n          pageIndex -= pageCount;\r\n        }\r\n      }\r\n    } else {\r\n      page = pageIndex = Math.max(0, Math.min(pageIndex, pageCount - 1));\r\n\r\n      nextPosition = this.pages.length ? this.pages[page].left : 0;\r\n    }\r\n\r\n    this.page = page;\r\n    this.pageIndex = pageIndex;\r\n\r\n    if (prevPage !== null && page !== prevPage) {\r\n      this.prevPage = prevPage;\r\n      this.prevPageIndex = prevPageIndex;\r\n\r\n      this.trigger(\"change\", page, prevPage);\r\n    }\r\n\r\n    return nextPosition;\r\n  }\r\n\r\n  /**\r\n   * Clean up\r\n   */\r\n  destroy() {\r\n    this.state = \"destroy\";\r\n\r\n    this.slides.forEach((slide) => {\r\n      this.removeSlideEl(slide);\r\n    });\r\n\r\n    this.slides = [];\r\n\r\n    this.Panzoom.destroy();\r\n\r\n    this.detachPlugins();\r\n  }\r\n}\r\n\r\n// Expose version\r\nCarousel.version = \"__VERSION__\";\r\n\r\n// Static properties are a recent addition that dont work in all browsers yet\r\nCarousel.Plugins = Plugins;\r\n","export default {\r\n  NEXT: \"Next slide\",\r\n  PREV: \"Previous slide\",\r\n  GOTO: \"Go to slide #%d\",\r\n};\r\n","import { extend } from \"../../../shared/utils/extend.js\";\nimport { Carousel } from \"../../../Carousel/Carousel.js\";\n\nconst defaults = {\n  // The minimum number of images in the gallery to display thumbnails\n  minSlideCount: 2,\n\n  // Minimum screen height to display thumbnails\n  minScreenHeight: 500,\n\n  // Automatically show thumbnails when opened\n  autoStart: true,\n\n  // Keyboard shortcut to toggle thumbnail container\n  key: \"t\",\n\n  // Customize Carousel instance\n  Carousel: {},\n\n  tpl: `<div class=\"fancybox__thumb\" style=\"background-image:url('{{src}}')\"></div>`,\n};\n\nexport class Thumbs {\n  constructor(fancybox) {\n    this.fancybox = fancybox;\n\n    this.$container = null;\n    this.state = \"init\";\n\n    for (const methodName of [\"onPrepare\", \"onClosing\", \"onKeydown\"]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n\n    this.events = {\n      prepare: this.onPrepare,\n      closing: this.onClosing,\n      keydown: this.onKeydown,\n    };\n  }\n\n  /**\n   * Process `prepare` event to build the layout\n   */\n  onPrepare() {\n    // Get slides, skip if the total number is less than the minimum\n    const slides = this.getSlides();\n\n    if (slides.length < this.fancybox.option(\"Thumbs.minSlideCount\")) {\n      this.state = \"disabled\";\n      return;\n    }\n\n    if (\n      this.fancybox.option(\"Thumbs.autoStart\") === true &&\n      this.fancybox.Carousel.Panzoom.content.height >= this.fancybox.option(\"Thumbs.minScreenHeight\")\n    ) {\n      this.build();\n    }\n  }\n\n  /**\n   * Process `closing` event to disable all events\n   */\n  onClosing() {\n    if (this.Carousel) {\n      this.Carousel.Panzoom.detachEvents();\n    }\n  }\n\n  /**\n   * Process `keydown` event to enable thumbnail list toggling using keyboard key\n   * @param {Object} fancybox\n   * @param {String} key\n   */\n  onKeydown(fancybox, key) {\n    if (key === fancybox.option(\"Thumbs.key\")) {\n      this.toggle();\n    }\n  }\n\n  /**\n   * Build layout and init thumbnail Carousel\n   */\n  build() {\n    if (this.$container) {\n      return;\n    }\n\n    // Create wrapping element and append to layout\n    const $container = document.createElement(\"div\");\n\n    $container.classList.add(\"fancybox__thumbs\");\n\n    this.fancybox.$carousel.parentNode.insertBefore($container, this.fancybox.$carousel.nextSibling);\n\n    // Initialise thumbnail carousel with all slides\n    this.Carousel = new Carousel(\n      $container,\n      extend(\n        true,\n        {\n          Dots: false,\n          Navigation: false,\n          Sync: {\n            friction: 0,\n          },\n          infinite: false,\n          center: true,\n          fill: true,\n          dragFree: true,\n          slidesPerPage: 1,\n          preload: 1,\n        },\n        this.fancybox.option(\"Thumbs.Carousel\"),\n        {\n          Sync: {\n            target: this.fancybox.Carousel,\n          },\n          slides: this.getSlides(),\n        }\n      )\n    );\n\n    // Slide carousel on wheel event\n    this.Carousel.Panzoom.on(\"wheel\", (panzoom, event) => {\n      event.preventDefault();\n\n      this.fancybox[event.deltaY < 0 ? \"prev\" : \"next\"]();\n    });\n\n    this.$container = $container;\n\n    this.state = \"visible\";\n  }\n\n  /**\n   * Process all fancybox slides to get all thumbnail images\n   */\n  getSlides() {\n    const slides = [];\n\n    for (const slide of this.fancybox.items) {\n      const thumb = slide.thumb;\n\n      if (thumb) {\n        slides.push({\n          html: this.fancybox.option(\"Thumbs.tpl\").replace(/\\{\\{src\\}\\}/gi, thumb),\n          customClass: `has-thumb has-${slide.type || \"image\"}`,\n        });\n      }\n    }\n\n    return slides;\n  }\n\n  /**\n   * Toggle visibility of thumbnail list\n   * Tip: you can use `Fancybox.getInstance().plugins.Thumbs.toggle()` from anywhere in your code\n   */\n  toggle() {\n    if (this.state === \"visible\") {\n      this.hide();\n    } else if (this.state === \"hidden\") {\n      this.show();\n    } else {\n      this.build();\n    }\n  }\n\n  /**\n   * Show thumbnail list\n   */\n  show() {\n    if (this.state === \"hidden\") {\n      this.$container.style.display = \"\";\n\n      this.Carousel.Panzoom.attachEvents();\n\n      this.state = \"visible\";\n    }\n  }\n\n  /**\n   * Hide thumbnail list\n   */\n  hide() {\n    if (this.state === \"visible\") {\n      this.Carousel.Panzoom.detachEvents();\n\n      this.$container.style.display = \"none\";\n\n      this.state = \"hidden\";\n    }\n  }\n\n  /**\n   * Reset the state\n   */\n  cleanup() {\n    if (this.Carousel) {\n      this.Carousel.destroy();\n      this.Carousel = null;\n    }\n\n    if (this.$container) {\n      this.$container.remove();\n      this.$container = null;\n    }\n\n    this.state = \"init\";\n  }\n\n  attach() {\n    this.fancybox.on(this.events);\n  }\n\n  detach() {\n    this.fancybox.off(this.events);\n\n    this.cleanup();\n  }\n}\n\n// Expose defaults\nThumbs.defaults = defaults;\n","import { extend } from \"../../../shared/utils/extend.js\";\n\nconst buildURLQuery = (src, obj) => {\n  const url = new URL(src);\n  const params = new URLSearchParams(url.search);\n\n  let rez = new URLSearchParams();\n\n  for (const [key, value] of [...params, ...Object.entries(obj)]) {\n    // Youtube\n    if (key === \"t\") {\n      rez.set(\"start\", parseInt(value));\n    } else {\n      rez.set(key, value);\n    }\n  }\n\n  // Convert to 'foo=1&bar=2&baz=3'\n  rez = rez.toString();\n\n  // Vimeo\n  // https://vimeo.zendesk.com/hc/en-us/articles/360000121668-Starting-playback-at-a-specific-timecode\n  let matches = src.match(/#t=((.*)?\\d+s)/);\n\n  if (matches) {\n    rez += `#t=${matches[1]}`;\n  }\n\n  return rez;\n};\n\nconst defaults = {\n  // General options for any video content (Youtube, Vimeo, HTML5 video)\n  video: {\n    autoplay: true,\n    ratio: 16 / 9,\n  },\n  // Youtube embed parameters\n  youtube: {\n    autohide: 1,\n    fs: 1,\n    rel: 0,\n    hd: 1,\n    wmode: \"transparent\",\n    enablejsapi: 1,\n    html5: 1,\n  },\n  // Vimeo embed parameters\n  vimeo: {\n    hd: 1,\n    show_title: 1,\n    show_byline: 1,\n    show_portrait: 0,\n    fullscreen: 1,\n  },\n  // HTML5 video parameters\n  html5video: {\n    tpl: `<video class=\"fancybox__html5video\" playsinline controls controlsList=\"nodownload\" poster=\"{{poster}}\">\n  <source src=\"{{src}}\" type=\"{{format}}\" />Sorry, your browser doesn't support embedded videos.</video>`,\n    format: \"\",\n  },\n};\n\nexport class Html {\n  constructor(fancybox) {\n    this.fancybox = fancybox;\n\n    for (const methodName of [\n      \"onInit\",\n      \"onReady\",\n\n      \"onCreateSlide\",\n      \"onRemoveSlide\",\n\n      \"onSelectSlide\",\n      \"onUnselectSlide\",\n\n      \"onRefresh\",\n\n      // For communication with iframed video (youtube/vimeo)\n      \"onMessage\",\n    ]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n\n    this.events = {\n      init: this.onInit,\n      ready: this.onReady,\n\n      \"Carousel.createSlide\": this.onCreateSlide,\n      \"Carousel.removeSlide\": this.onRemoveSlide,\n\n      \"Carousel.selectSlide\": this.onSelectSlide,\n      \"Carousel.unselectSlide\": this.onUnselectSlide,\n\n      \"Carousel.refresh\": this.onRefresh,\n    };\n  }\n\n  /**\n   * Check if each gallery item has type when fancybox starts\n   */\n  onInit() {\n    for (const slide of this.fancybox.items) {\n      this.processType(slide);\n    }\n  }\n\n  /**\n   * Set content type for the slide\n   * @param {Object} slide\n   */\n  processType(slide) {\n    // Add support for `new Fancybox({items : [{html : 'smth'}]});`\n    if (slide.html) {\n      slide.src = slide.html;\n      slide.type = \"html\";\n\n      delete slide.html;\n\n      return;\n    }\n\n    const src = slide.src || \"\";\n\n    let type = slide.type || this.fancybox.options.type,\n      rez = null;\n\n    if (src && typeof src !== \"string\") {\n      return;\n    }\n\n    if (\n      (rez = src.match(\n        /(?:youtube\\.com|youtu\\.be|youtube\\-nocookie\\.com)\\/(?:watch\\?(?:.*&)?v=|v\\/|u\\/|embed\\/?)?(videoseries\\?list=(?:.*)|[\\w-]{11}|\\?listType=(?:.*)&list=(?:.*))(?:.*)/i\n      ))\n    ) {\n      const params = buildURLQuery(src, this.fancybox.option(\"Html.youtube\"));\n      const videoId = encodeURIComponent(rez[1]);\n\n      slide.videoId = videoId;\n      slide.src = `https://www.youtube-nocookie.com/embed/${videoId}?${params}`;\n      slide.thumb = slide.thumb || `https://i.ytimg.com/vi/${videoId}/mqdefault.jpg`;\n      slide.vendor = \"youtube\";\n\n      type = \"video\";\n    } else if ((rez = src.match(/^.+vimeo.com\\/(?:\\/)?([\\d]+)(.*)?/))) {\n      const params = buildURLQuery(src, this.fancybox.option(\"Html.vimeo\"));\n      const videoId = encodeURIComponent(rez[1]);\n\n      slide.videoId = videoId;\n      slide.src = `https://player.vimeo.com/video/${videoId}?${params}`;\n      slide.vendor = \"vimeo\";\n\n      type = \"video\";\n    } else if (\n      (rez = src.match(\n        /(?:maps\\.)?google\\.([a-z]{2,3}(?:\\.[a-z]{2})?)\\/(?:(?:(?:maps\\/(?:place\\/(?:.*)\\/)?\\@(.*),(\\d+.?\\d+?)z))|(?:\\?ll=))(.*)?/i\n      ))\n    ) {\n      slide.src = `//maps.google.${rez[1]}/?ll=${(rez[2]\n        ? rez[2] + \"&z=\" + Math.floor(rez[3]) + (rez[4] ? rez[4].replace(/^\\//, \"&\") : \"\")\n        : rez[4] + \"\"\n      ).replace(/\\?/, \"&\")}&output=${rez[4] && rez[4].indexOf(\"layer=c\") > 0 ? \"svembed\" : \"embed\"}`;\n\n      type = \"map\";\n    } else if ((rez = src.match(/(?:maps\\.)?google\\.([a-z]{2,3}(?:\\.[a-z]{2})?)\\/(?:maps\\/search\\/)(.*)/i))) {\n      slide.src = `//maps.google.${rez[1]}/maps?q=${rez[2].replace(\"query=\", \"q=\").replace(\"api=1\", \"\")}&output=embed`;\n\n      type = \"map\";\n    }\n\n    // Guess content type\n    if (!type) {\n      if (src.charAt(0) === \"#\") {\n        type = \"inline\";\n      } else if ((rez = src.match(/\\.(mp4|mov|ogv|webm)((\\?|#).*)?$/i))) {\n        type = \"html5video\";\n\n        slide.format = slide.format || \"video/\" + (rez[1] === \"ogv\" ? \"ogg\" : rez[1]);\n      } else if (src.match(/(^data:image\\/[a-z0-9+\\/=]*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\\?|#).*)?$)/i)) {\n        type = \"image\";\n      } else if (src.match(/\\.(pdf)((\\?|#).*)?$/i)) {\n        type = \"pdf\";\n      }\n    }\n\n    slide.type = type || this.fancybox.option(\"defaultType\", \"image\");\n\n    if (type === \"html5video\" || type === \"video\") {\n      slide.video = extend({}, this.fancybox.option(\"Html.video\"), slide.video);\n\n      if (slide._width && slide._height) {\n        slide.ratio = parseFloat(slide._width) / parseFloat(slide._height);\n      } else {\n        slide.ratio = slide.ratio || slide.video.ratio || defaults.video.ratio;\n      }\n    }\n  }\n\n  /**\n   * Start loading content when Fancybox is ready\n   */\n  onReady() {\n    this.fancybox.Carousel.slides.forEach((slide) => {\n      if (slide.$el) {\n        this.setContent(slide);\n\n        if (slide.index === this.fancybox.getSlide().index) {\n          this.playVideo(slide);\n        }\n      }\n    });\n  }\n\n  /**\n   * Process `Carousel.createSlide` event to create image content\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onCreateSlide(fancybox, carousel, slide) {\n    if (this.fancybox.state !== \"ready\") {\n      return;\n    }\n\n    this.setContent(slide);\n  }\n\n  /**\n   * Retrieve and set slide content\n   * @param {Object} slide\n   */\n  loadInlineContent(slide) {\n    let $content;\n\n    if (slide.src instanceof HTMLElement) {\n      $content = slide.src;\n    } else if (typeof slide.src === \"string\") {\n      const tmp = slide.src.split(\"#\", 2);\n      const id = tmp.length === 2 && tmp[0] === \"\" ? tmp[1] : tmp[0];\n\n      $content = document.getElementById(id);\n    }\n\n    if ($content) {\n      if (slide.type === \"clone\" || $content.$placeHolder) {\n        $content = $content.cloneNode(true);\n        let attrId = $content.getAttribute(\"id\");\n\n        attrId = attrId ? `${attrId}--clone` : `clone-${this.fancybox.id}-${slide.index}`;\n\n        $content.setAttribute(\"id\", attrId);\n      } else {\n        const $placeHolder = document.createElement(\"div\");\n        $placeHolder.classList.add(\"fancybox-placeholder\");\n        $content.parentNode.insertBefore($placeHolder, $content);\n        $content.$placeHolder = $placeHolder;\n      }\n\n      this.fancybox.setContent(slide, $content);\n    } else {\n      this.fancybox.setError(slide, \"{{ELEMENT_NOT_FOUND}}\");\n    }\n  }\n\n  /**\n   * Makes AJAX request and sets response as slide content\n   * @param {Object} slide\n   */\n  loadAjaxContent(slide) {\n    const fancybox = this.fancybox;\n    const xhr = new XMLHttpRequest();\n\n    fancybox.showLoading(slide);\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === XMLHttpRequest.DONE) {\n        if (fancybox.state === \"ready\") {\n          fancybox.hideLoading(slide);\n\n          if (xhr.status === 200) {\n            fancybox.setContent(slide, xhr.responseText);\n          } else {\n            fancybox.setError(slide, xhr.status === 404 ? \"{{AJAX_NOT_FOUND}}\" : \"{{AJAX_FORBIDDEN}}\");\n          }\n        }\n      }\n    };\n\n    const data = slide.ajax || null;\n\n    xhr.open(data ? \"POST\" : \"GET\", slide.src);\n    xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n    xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n    xhr.send(data);\n\n    slide.xhr = xhr;\n  }\n\n  /**\n   * Creates iframe as slide content, preloads if needed before displaying\n   * @param {Object} slide\n   */\n  loadIframeContent(slide) {\n    const fancybox = this.fancybox;\n    const $iframe = document.createElement(\"iframe\");\n\n    $iframe.className = \"fancybox__iframe\";\n\n    $iframe.setAttribute(\"id\", `fancybox__iframe_${fancybox.id}_${slide.index}`);\n\n    $iframe.setAttribute(\"allow\", \"autoplay; fullscreen\");\n    $iframe.setAttribute(\"scrolling\", \"auto\");\n\n    slide.$iframe = $iframe;\n\n    if (slide.type !== \"iframe\" || slide.preload === false) {\n      $iframe.setAttribute(\"src\", slide.src);\n\n      this.fancybox.setContent(slide, $iframe);\n\n      this.resizeIframe(slide);\n\n      return;\n    }\n\n    fancybox.showLoading(slide);\n\n    const $content = document.createElement(\"div\");\n    $content.style.visibility = \"hidden\";\n\n    this.fancybox.setContent(slide, $content);\n\n    $content.appendChild($iframe);\n\n    $iframe.onerror = () => {\n      fancybox.setError(slide, \"{{IFRAME_ERROR}}\");\n    };\n\n    $iframe.onload = () => {\n      fancybox.hideLoading(slide);\n\n      let isFirstLoad = false;\n\n      if (!$iframe.isReady) {\n        $iframe.isReady = true;\n        isFirstLoad = true;\n      }\n\n      if (!$iframe.src.length) {\n        return;\n      }\n\n      $iframe.parentNode.style.visibility = \"\";\n\n      this.resizeIframe(slide);\n\n      if (isFirstLoad) {\n        fancybox.revealContent(slide);\n      }\n    };\n\n    $iframe.setAttribute(\"src\", slide.src);\n  }\n\n  /**\n   * Set CSS max/min width/height properties of the content to have the correct aspect ratio\n   * @param {Object} slide\n   */\n  setAspectRatio(slide) {\n    const $content = slide.$content;\n    const ratio = slide.ratio;\n\n    if (!$content) {\n      return;\n    }\n\n    let width = slide._width;\n    let height = slide._height;\n\n    if (ratio || (width && height)) {\n      Object.assign($content.style, {\n        width: width && height ? \"100%\" : \"\",\n        height: width && height ? \"100%\" : \"\",\n        maxWidth: \"\",\n        maxHeight: \"\",\n      });\n\n      let maxWidth = $content.offsetWidth;\n      let maxHeight = $content.offsetHeight;\n\n      width = width || maxWidth;\n      height = height || maxHeight;\n\n      // Resize to fit\n      if (width > maxWidth || height > maxHeight) {\n        let maxRatio = Math.min(maxWidth / width, maxHeight / height);\n\n        width = width * maxRatio;\n        height = height * maxRatio;\n      }\n\n      // Recheck ratio\n      if (Math.abs(width / height - ratio) > 0.01) {\n        if (ratio < width / height) {\n          width = height * ratio;\n        } else {\n          height = width / ratio;\n        }\n      }\n\n      Object.assign($content.style, {\n        width: `${width}px`,\n        height: `${height}px`,\n      });\n    }\n  }\n\n  /**\n   * Adjust the width and height of the iframe according to the content dimensions, or defined sizes\n   * @param {Object} slide\n   */\n  resizeIframe(slide) {\n    const $iframe = slide.$iframe;\n\n    if (!$iframe) {\n      return;\n    }\n\n    let width_ = slide._width || 0;\n    let height_ = slide._height || 0;\n\n    if (width_ && height_) {\n      slide.autoSize = false;\n    }\n\n    const $parent = $iframe.parentNode;\n    const parentStyle = $parent && $parent.style;\n\n    if (slide.preload !== false && slide.autoSize !== false && parentStyle) {\n      try {\n        const compStyles = window.getComputedStyle($parent),\n          paddingX = parseFloat(compStyles.paddingLeft) + parseFloat(compStyles.paddingRight),\n          paddingY = parseFloat(compStyles.paddingTop) + parseFloat(compStyles.paddingBottom);\n\n        const document = $iframe.contentWindow.document,\n          $html = document.getElementsByTagName(\"html\")[0],\n          $body = document.body;\n\n        // Allow content to expand horizontally\n        parentStyle.width = \"\";\n\n        // Get rid of vertical scrollbar\n        $body.style.overflow = \"hidden\";\n\n        width_ = width_ || $html.scrollWidth + paddingX;\n\n        parentStyle.width = `${width_}px`;\n\n        $body.style.overflow = \"\";\n\n        parentStyle.flex = \"0 0 auto\";\n        parentStyle.height = `${$body.scrollHeight}px`;\n\n        height_ = $html.scrollHeight + paddingY;\n      } catch (error) {\n        //\n      }\n    }\n\n    if (width_ || height_) {\n      const newStyle = {\n        flex: \"0 1 auto\",\n      };\n\n      if (width_) {\n        newStyle.width = `${width_}px`;\n      }\n\n      if (height_) {\n        newStyle.height = `${height_}px`;\n      }\n\n      Object.assign(parentStyle, newStyle);\n    }\n  }\n\n  /**\n   * Process `Carousel.onRefresh` event,\n   * trigger iframe autosizing and set content aspect ratio for each slide\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   */\n  onRefresh(fancybox, carousel) {\n    carousel.slides.forEach((slide) => {\n      if (!slide.$el) {\n        return;\n      }\n\n      if (slide.$iframe) {\n        this.resizeIframe(slide);\n      }\n\n      if (slide.ratio) {\n        this.setAspectRatio(slide);\n      }\n    });\n  }\n\n  /**\n   * Process `Carousel.onCreateSlide` event to set content\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  setContent(slide) {\n    if (!slide || slide.isDom) {\n      return;\n    }\n\n    switch (slide.type) {\n      case \"html\":\n        this.fancybox.setContent(slide, slide.src);\n        break;\n\n      case \"html5video\":\n        this.fancybox.setContent(\n          slide,\n          this.fancybox\n            .option(\"Html.html5video.tpl\")\n            .replace(/\\{\\{src\\}\\}/gi, slide.src)\n            .replace(\"{{format}}\", slide.format || (slide.html5video && slide.html5video.format) || \"\")\n            .replace(\"{{poster}}\", slide.poster || slide.thumb || \"\")\n        );\n\n        break;\n\n      case \"inline\":\n      case \"clone\":\n        this.loadInlineContent(slide);\n        break;\n\n      case \"ajax\":\n        this.loadAjaxContent(slide);\n        break;\n\n      case \"pdf\":\n      case \"video\":\n      case \"map\":\n        slide.preload = false;\n\n      case \"iframe\":\n        this.loadIframeContent(slide);\n\n        break;\n    }\n\n    if (slide.ratio) {\n      this.setAspectRatio(slide);\n    }\n  }\n\n  /**\n   * Process `Carousel.onSelectSlide` event to start video\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onSelectSlide(fancybox, carousel, slide) {\n    if (fancybox.state === \"ready\") {\n      this.playVideo(slide);\n    }\n  }\n\n  /**\n   * Attempts to begin playback of the media\n   * @param {Object} slide\n   */\n  playVideo(slide) {\n    if (slide.type === \"html5video\" && slide.video.autoplay) {\n      try {\n        const $video = slide.$el.querySelector(\"video\");\n\n        if ($video) {\n          const promise = $video.play();\n\n          if (promise !== undefined) {\n            promise\n              .then(() => {\n                // Autoplay started\n              })\n              .catch((error) => {\n                // Autoplay was prevented.\n                $video.muted = true;\n                $video.play();\n              });\n          }\n        }\n      } catch (err) {}\n    }\n\n    if (slide.type !== \"video\" || !(slide.$iframe && slide.$iframe.contentWindow)) {\n      return;\n    }\n\n    // This function will be repeatedly called to check\n    // if video iframe has been loaded to send message to start the video\n    const poller = () => {\n      if (slide.state === \"done\" && slide.$iframe && slide.$iframe.contentWindow) {\n        let command;\n\n        if (slide.$iframe.isReady) {\n          if (slide.video && slide.video.autoplay) {\n            if (slide.vendor == \"youtube\") {\n              command = {\n                event: \"command\",\n                func: \"playVideo\",\n              };\n            } else {\n              command = {\n                method: \"play\",\n                value: \"true\",\n              };\n            }\n          }\n\n          if (command) {\n            slide.$iframe.contentWindow.postMessage(JSON.stringify(command), \"*\");\n          }\n\n          return;\n        }\n\n        if (slide.vendor === \"youtube\") {\n          command = {\n            event: \"listening\",\n            id: slide.$iframe.getAttribute(\"id\"),\n          };\n\n          slide.$iframe.contentWindow.postMessage(JSON.stringify(command), \"*\");\n        }\n      }\n\n      slide.poller = setTimeout(poller, 250);\n    };\n\n    poller();\n  }\n\n  /**\n   * Process `Carousel.onUnselectSlide` event to pause video\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onUnselectSlide(fancybox, carousel, slide) {\n    if (slide.type === \"html5video\") {\n      try {\n        slide.$el.querySelector(\"video\").pause();\n      } catch (error) {}\n\n      return;\n    }\n\n    let command = false;\n\n    if (slide.vendor == \"vimeo\") {\n      command = {\n        method: \"pause\",\n        value: \"true\",\n      };\n    } else if (slide.vendor === \"youtube\") {\n      command = {\n        event: \"command\",\n        func: \"pauseVideo\",\n      };\n    }\n\n    if (command && slide.$iframe && slide.$iframe.contentWindow) {\n      slide.$iframe.contentWindow.postMessage(JSON.stringify(command), \"*\");\n    }\n\n    clearTimeout(slide.poller);\n  }\n\n  /**\n   * Process `Carousel.onRemoveSlide` event to do clean up\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   * @param {Object} slide\n   */\n  onRemoveSlide(fancybox, carousel, slide) {\n    // Abort ajax request if exists\n    if (slide.xhr) {\n      slide.xhr.abort();\n      slide.xhr = null;\n    }\n\n    // Unload iframe content if exists\n    if (slide.$iframe) {\n      slide.$iframe.onload = slide.$iframe.onerror = null;\n\n      slide.$iframe.src = \"//about:blank\";\n      slide.$iframe = null;\n    }\n\n    // Clear inline content\n    const $content = slide.$content;\n\n    if (slide.type === \"inline\" && $content) {\n      $content.classList.remove(\"fancybox__content\");\n\n      if ($content.style.display !== \"none\") {\n        $content.style.display = \"none\";\n      }\n    }\n\n    if (slide.$closeButton) {\n      slide.$closeButton.remove();\n      slide.$closeButton = null;\n    }\n\n    const $placeHolder = $content && $content.$placeHolder;\n\n    if ($placeHolder) {\n      $placeHolder.parentNode.insertBefore($content, $placeHolder);\n      $placeHolder.remove();\n      $content.$placeHolder = null;\n    }\n  }\n\n  /**\n   * Process `window.message` event to mark video iframe element as `ready`\n   * @param {Object} e - Event\n   */\n  onMessage(e) {\n    try {\n      let data = JSON.parse(e.data);\n\n      if (e.origin === \"https://player.vimeo.com\") {\n        if (data.event === \"ready\") {\n          for (let $iframe of document.getElementsByClassName(\"fancybox__iframe\")) {\n            if ($iframe.contentWindow === e.source) {\n              $iframe.isReady = 1;\n            }\n          }\n        }\n      } else if (e.origin === \"https://www.youtube-nocookie.com\") {\n        if (data.event === \"onReady\") {\n          document.getElementById(data.id).isReady = 1;\n        }\n      }\n    } catch (ex) {}\n  }\n\n  attach() {\n    this.fancybox.on(this.events);\n\n    window.addEventListener(\"message\", this.onMessage, false);\n  }\n\n  detach() {\n    this.fancybox.off(this.events);\n\n    window.removeEventListener(\"message\", this.onMessage, false);\n  }\n}\n\n// Expose defaults\nHtml.defaults = defaults;\n","import { extend } from \"../../../shared/utils/extend.js\";\r\n\r\nimport { Panzoom } from \"../../../Panzoom/Panzoom.js\";\r\n\r\nconst defaults = {\r\n  // Class name for slide element indicating that content can be zoomed in\r\n  canZoomInClass: \"can-zoom_in\",\r\n\r\n  // Class name for slide element indicating that content can be zoomed out\r\n  canZoomOutClass: \"can-zoom_out\",\r\n\r\n  // Do zoom animation from thumbnail image when starting or closing fancybox\r\n  zoom: true,\r\n\r\n  // Animate opacity while zooming\r\n  zoomOpacity: \"auto\", // \"auto\" | true | false,\r\n\r\n  // Zoom animation friction\r\n  zoomFriction: 0.82,\r\n\r\n  // Disable zoom animation if thumbnail is visible only partly\r\n  ignoreCoveredThumbnail: false,\r\n\r\n  // Enable guestures\r\n  touch: true,\r\n\r\n  // Action to be performed when user clicks on the image\r\n  click: \"toggleZoom\", // \"toggleZoom\" | \"next\" | \"close\" | null\r\n\r\n  // Action to be performed when double-click event is detected on the image\r\n  doubleClick: null, // \"toggleZoom\" | null\r\n\r\n  // Action to be performed when user rotates a wheel button on a pointing device\r\n  wheel: \"zoom\", // \"zoom\" | \"slide\" | \"close\" | null\r\n\r\n  // How image should be resized to fit its container\r\n  fit: \"contain\", // \"contain\" | \"contain-w\" | \"cover\"\r\n\r\n  // Should create wrapping element around the image\r\n  wrap: false,\r\n\r\n  // Custom Panzoom options\r\n  Panzoom: {\r\n    ratio: 1,\r\n  },\r\n};\r\n\r\nexport class Image {\r\n  constructor(fancybox) {\r\n    this.fancybox = fancybox;\r\n\r\n    for (const methodName of [\r\n      // Fancybox\r\n      \"onReady\",\r\n      \"onClosing\",\r\n      \"onDone\",\r\n\r\n      // Fancybox.Carousel\r\n      \"onPageChange\",\r\n      \"onCreateSlide\",\r\n      \"onRemoveSlide\",\r\n\r\n      // Image load/error\r\n      \"onImageStatusChange\",\r\n    ]) {\r\n      this[methodName] = this[methodName].bind(this);\r\n    }\r\n\r\n    this.events = {\r\n      ready: this.onReady,\r\n      closing: this.onClosing,\r\n      done: this.onDone,\r\n\r\n      \"Carousel.change\": this.onPageChange,\r\n      \"Carousel.createSlide\": this.onCreateSlide,\r\n      \"Carousel.removeSlide\": this.onRemoveSlide,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Handle `ready` event to start loading content\r\n   */\r\n  onReady() {\r\n    this.fancybox.Carousel.slides.forEach((slide) => {\r\n      if (slide.$el) {\r\n        this.setContent(slide);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle `done` event to update cursor\r\n   * @param {Object} fancybox\r\n   * @param {Object} slide\r\n   */\r\n  onDone(fancybox, slide) {\r\n    this.handleCursor(slide);\r\n  }\r\n\r\n  /**\r\n   * Handle `closing` event to clean up all slides and to start zoom-out animation\r\n   * @param {Object} fancybox\r\n   */\r\n  onClosing(fancybox) {\r\n    clearTimeout(this.clickTimer);\r\n    this.clickTimer = null;\r\n\r\n    // Remove events\r\n    fancybox.Carousel.slides.forEach((slide) => {\r\n      if (slide.$image) {\r\n        slide.state = \"destroy\";\r\n      }\r\n\r\n      if (slide.Panzoom) {\r\n        slide.Panzoom.detachEvents();\r\n      }\r\n    });\r\n\r\n    // If possible, start the zoom animation, it will interrupt the default closing process\r\n    if (this.fancybox.state === \"closing\" && this.canZoom(fancybox.getSlide())) {\r\n      this.zoomOut();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Process `Carousel.createSlide` event to create image content\r\n   * @param {Object} fancybox\r\n   * @param {Object} carousel\r\n   * @param {Object} slide\r\n   */\r\n  onCreateSlide(fancybox, carousel, slide) {\r\n    if (this.fancybox.state !== \"ready\") {\r\n      return;\r\n    }\r\n\r\n    this.setContent(slide);\r\n  }\r\n\r\n  /**\r\n   * Handle `Carousel.removeSlide` event to do clean up the slide\r\n   * @param {Object} fancybox\r\n   * @param {Object} carousel\r\n   * @param {Object} slide\r\n   */\r\n  onRemoveSlide(fancybox, carousel, slide) {\r\n    if (slide.$image) {\r\n      slide.$el.classList.remove(fancybox.option(\"Image.canZoomInClass\"));\r\n\r\n      slide.$image.remove();\r\n      slide.$image = null;\r\n    }\r\n\r\n    if (slide.Panzoom) {\r\n      slide.Panzoom.destroy();\r\n      slide.Panzoom = null;\r\n    }\r\n\r\n    if (slide.$el && slide.$el.dataset) {\r\n      delete slide.$el.dataset.imageFit;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Build DOM elements and add event listeners\r\n   * @param {Object} slide\r\n   */\r\n  setContent(slide) {\r\n    // Check if this slide should contain an image\r\n    if (slide.isDom || slide.html || (slide.type && slide.type !== \"image\")) {\r\n      return;\r\n    }\r\n\r\n    if (slide.$image) {\r\n      return;\r\n    }\r\n\r\n    slide.type = \"image\";\r\n    slide.state = \"loading\";\r\n\r\n    // * Build layout\r\n    // Container\r\n    const $content = document.createElement(\"div\");\r\n    $content.style.visibility = \"hidden\";\r\n\r\n    // Image element\r\n    const $image = document.createElement(\"img\");\r\n\r\n    $image.addEventListener(\"load\", (event) => {\r\n      event.stopImmediatePropagation();\r\n\r\n      this.onImageStatusChange(slide);\r\n    });\r\n\r\n    $image.addEventListener(\"error\", () => {\r\n      this.onImageStatusChange(slide);\r\n    });\r\n\r\n    $image.src = slide.src;\r\n    $image.alt = \"\";\r\n    $image.draggable = false;\r\n\r\n    $image.classList.add(\"fancybox__image\");\r\n\r\n    if (slide.srcset) {\r\n      $image.setAttribute(\"srcset\", slide.srcset);\r\n    }\r\n\r\n    if (slide.sizes) {\r\n      $image.setAttribute(\"sizes\", slide.sizes);\r\n    }\r\n\r\n    slide.$image = $image;\r\n\r\n    const shouldWrap = this.fancybox.option(\"Image.wrap\");\r\n\r\n    if (shouldWrap) {\r\n      const $wrap = document.createElement(\"div\");\r\n      $wrap.classList.add(typeof shouldWrap === \"string\" ? shouldWrap : \"fancybox__image-wrap\");\r\n\r\n      $wrap.appendChild($image);\r\n\r\n      $content.appendChild($wrap);\r\n\r\n      slide.$wrap = $wrap;\r\n    } else {\r\n      $content.appendChild($image);\r\n    }\r\n\r\n    // Set data attribute if other that default\r\n    // for example, set `[data-image-fit=\"contain-w\"]`\r\n    slide.$el.dataset.imageFit = this.fancybox.option(\"Image.fit\");\r\n\r\n    // Append content\r\n    this.fancybox.setContent(slide, $content);\r\n\r\n    // Display loading icon\r\n    if ($image.complete || $image.error) {\r\n      this.onImageStatusChange(slide);\r\n    } else {\r\n      this.fancybox.showLoading(slide);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle image state change, display error or start revealing image\r\n   * @param {Object} slide\r\n   */\r\n  onImageStatusChange(slide) {\r\n    const $image = slide.$image;\r\n\r\n    if (!$image || slide.state !== \"loading\") {\r\n      return;\r\n    }\r\n\r\n    if (!($image.complete && $image.naturalWidth && $image.naturalHeight)) {\r\n      this.fancybox.setError(slide, \"{{IMAGE_ERROR}}\");\r\n\r\n      return;\r\n    }\r\n\r\n    this.fancybox.hideLoading(slide);\r\n\r\n    if (this.fancybox.option(\"Image.fit\") === \"contain\") {\r\n      this.initSlidePanzoom(slide);\r\n    }\r\n\r\n    // Add `wheel` and `click` event handler\r\n    slide.$el.addEventListener(\"wheel\", (event) => this.onWheel(slide, event), { passive: false });\r\n    slide.$content.addEventListener(\"click\", (event) => this.onClick(slide, event), { passive: false });\r\n\r\n    this.revealContent(slide);\r\n  }\r\n\r\n  /**\r\n   * Make image zoomable and draggable using Panzoom\r\n   * @param {Object} slide\r\n   */\r\n  initSlidePanzoom(slide) {\r\n    if (slide.Panzoom) {\r\n      return;\r\n    }\r\n\r\n    //* Initialize Panzoom\r\n    slide.Panzoom = new Panzoom(\r\n      slide.$el,\r\n      extend(true, this.fancybox.option(\"Image.Panzoom\", {}), {\r\n        viewport: slide.$wrap,\r\n        content: slide.$image,\r\n\r\n        width: slide._width,\r\n        height: slide._height,\r\n\r\n        wrapInner: false,\r\n\r\n        // Allow to select caption text\r\n        textSelection: true,\r\n\r\n        // Toggle gestures\r\n        touch: this.fancybox.option(\"Image.touch\"),\r\n\r\n        // This will prevent click conflict with fancybox main carousel\r\n        panOnlyZoomed: true,\r\n\r\n        // Disable default click / wheel events as custom event listeners will replace them,\r\n        // because click and wheel events should work without Panzoom\r\n        click: false,\r\n        wheel: false,\r\n      })\r\n    );\r\n\r\n    slide.Panzoom.on(\"startAnimation\", () => {\r\n      this.fancybox.trigger(\"Image.startAnimation\", slide);\r\n    });\r\n\r\n    slide.Panzoom.on(\"endAnimation\", () => {\r\n      if (slide.state === \"zoomIn\") {\r\n        this.fancybox.done(slide);\r\n      }\r\n\r\n      this.handleCursor(slide);\r\n\r\n      this.fancybox.trigger(\"Image.endAnimation\", slide);\r\n    });\r\n\r\n    slide.Panzoom.on(\"afterUpdate\", () => {\r\n      this.handleCursor(slide);\r\n\r\n      this.fancybox.trigger(\"Image.afterUpdate\", slide);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Start zoom-in animation if possible, or simply reveal content\r\n   * @param {Object} slide\r\n   */\r\n  revealContent(slide) {\r\n    // Animate only on first run\r\n    if (\r\n      this.fancybox.Carousel.prevPage === null &&\r\n      slide.index === this.fancybox.options.startIndex &&\r\n      this.canZoom(slide)\r\n    ) {\r\n      this.zoomIn();\r\n    } else {\r\n      this.fancybox.revealContent(slide);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get zoom info for selected slide\r\n   * @param {Object} slide\r\n   */\r\n  getZoomInfo(slide) {\r\n    const $thumb = slide.$thumb,\r\n      thumbRect = $thumb.getBoundingClientRect(),\r\n      thumbWidth = thumbRect.width,\r\n      thumbHeight = thumbRect.height,\r\n      //\r\n      contentRect = slide.$content.getBoundingClientRect(),\r\n      contentWidth = contentRect.width,\r\n      contentHeight = contentRect.height,\r\n      //\r\n      shiftedTop = contentRect.top - thumbRect.top,\r\n      shiftedLeft = contentRect.left - thumbRect.left;\r\n\r\n    // Check if need to update opacity\r\n    let opacity = this.fancybox.option(\"Image.zoomOpacity\");\r\n\r\n    if (opacity === \"auto\") {\r\n      opacity = Math.abs(thumbWidth / thumbHeight - contentWidth / contentHeight) > 0.1;\r\n    }\r\n\r\n    return {\r\n      top: shiftedTop,\r\n      left: shiftedLeft,\r\n      scale: contentWidth && thumbWidth ? thumbWidth / contentWidth : 1,\r\n      opacity: opacity,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Determine if it is possible to do zoom-in animation\r\n   */\r\n  canZoom(slide) {\r\n    const fancybox = this.fancybox,\r\n      $container = fancybox.$container;\r\n\r\n    if (window.visualViewport && window.visualViewport.scale !== 1) {\r\n      return false;\r\n    }\r\n\r\n    if (slide.Panzoom && !slide.Panzoom.content.width) {\r\n      return false;\r\n    }\r\n\r\n    if (!fancybox.option(\"Image.zoom\") || fancybox.option(\"Image.fit\") !== \"contain\") {\r\n      return false;\r\n    }\r\n\r\n    const $thumb = slide.$thumb;\r\n\r\n    if (!$thumb || slide.state === \"loading\") {\r\n      return false;\r\n    }\r\n\r\n    // * Check if thumbnail image is really visible\r\n    $container.classList.add(\"fancybox__no-click\");\r\n\r\n    const rect = $thumb.getBoundingClientRect();\r\n\r\n    let rez;\r\n\r\n    // Check if thumbnail image is actually visible on the screen\r\n    if (this.fancybox.option(\"Image.ignoreCoveredThumbnail\")) {\r\n      const visibleTopLeft = document.elementFromPoint(rect.left + 1, rect.top + 1) === $thumb;\r\n      const visibleBottomRight = document.elementFromPoint(rect.right - 1, rect.bottom - 1) === $thumb;\r\n\r\n      rez = visibleTopLeft && visibleBottomRight;\r\n    } else {\r\n      rez = document.elementFromPoint(rect.left + rect.width * 0.5, rect.top + rect.height * 0.5) === $thumb;\r\n    }\r\n\r\n    $container.classList.remove(\"fancybox__no-click\");\r\n\r\n    return rez;\r\n  }\r\n\r\n  /**\r\n   * Perform zoom-in animation\r\n   */\r\n  zoomIn() {\r\n    const fancybox = this.fancybox,\r\n      slide = fancybox.getSlide(),\r\n      Panzoom = slide.Panzoom;\r\n\r\n    const { top, left, scale, opacity } = this.getZoomInfo(slide);\r\n\r\n    fancybox.trigger(\"reveal\", slide);\r\n\r\n    // Scale and move to start position\r\n    Panzoom.panTo({\r\n      x: left * -1,\r\n      y: top * -1,\r\n      scale: scale,\r\n      friction: 0,\r\n      ignoreBounds: true,\r\n    });\r\n\r\n    slide.$content.style.visibility = \"\";\r\n\r\n    slide.state = \"zoomIn\";\r\n\r\n    if (opacity === true) {\r\n      Panzoom.on(\"afterTransform\", (panzoom) => {\r\n        if (slide.state === \"zoomIn\" || slide.state === \"zoomOut\") {\r\n          panzoom.$content.style.opacity = Math.min(1, 1 - (1 - panzoom.content.scale) / (1 - scale));\r\n        }\r\n      });\r\n    }\r\n\r\n    // Animate back to original position\r\n    Panzoom.panTo({\r\n      x: 0,\r\n      y: 0,\r\n      scale: 1,\r\n      friction: this.fancybox.option(\"Image.zoomFriction\"),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Perform zoom-out animation\r\n   */\r\n  zoomOut() {\r\n    const fancybox = this.fancybox,\r\n      slide = fancybox.getSlide(),\r\n      Panzoom = slide.Panzoom;\r\n\r\n    if (!Panzoom) {\r\n      return;\r\n    }\r\n\r\n    slide.state = \"zoomOut\";\r\n    fancybox.state = \"customClosing\";\r\n\r\n    if (slide.$caption) {\r\n      slide.$caption.style.visibility = \"hidden\";\r\n    }\r\n\r\n    let friction = this.fancybox.option(\"Image.zoomFriction\");\r\n\r\n    const animatePosition = (event) => {\r\n      const { top, left, scale, opacity } = this.getZoomInfo(slide);\r\n\r\n      // Increase speed on the first run if opacity is not animated\r\n      if (!event && !opacity) {\r\n        friction *= 0.82;\r\n      }\r\n\r\n      Panzoom.panTo({\r\n        x: left * -1,\r\n        y: top * -1,\r\n        scale,\r\n        friction,\r\n        ignoreBounds: true,\r\n      });\r\n\r\n      // Gradually increase speed\r\n      friction *= 0.98;\r\n    };\r\n\r\n    // Page scrolling will cause thumbnail to change position on the display,\r\n    // therefore animation end position has to be recalculated after each page scroll\r\n    window.addEventListener(\"scroll\", animatePosition);\r\n\r\n    Panzoom.once(\"endAnimation\", () => {\r\n      window.removeEventListener(\"scroll\", animatePosition);\r\n      fancybox.destroy();\r\n    });\r\n\r\n    animatePosition();\r\n  }\r\n\r\n  /**\r\n   * Set the type of mouse cursor to indicate if content is zoomable\r\n   * @param {Object} slide\r\n   */\r\n  handleCursor(slide) {\r\n    if (slide.type !== \"image\" || !slide.$el) {\r\n      return;\r\n    }\r\n\r\n    const panzoom = slide.Panzoom;\r\n    const clickAction = this.fancybox.option(\"Image.click\", false, slide);\r\n    const touchIsEnabled = this.fancybox.option(\"Image.touch\");\r\n\r\n    const classList = slide.$el.classList;\r\n\r\n    const zoomInClass = this.fancybox.option(\"Image.canZoomInClass\");\r\n    const zoomOutClass = this.fancybox.option(\"Image.canZoomOutClass\");\r\n\r\n    classList.remove(zoomOutClass);\r\n    classList.remove(zoomInClass);\r\n\r\n    if (panzoom && clickAction === \"toggleZoom\") {\r\n      const canZoomIn =\r\n        panzoom && panzoom.content.scale === 1 && panzoom.option(\"maxScale\") - panzoom.content.scale > 0.01;\r\n\r\n      if (canZoomIn) {\r\n        classList.add(zoomInClass);\r\n      } else if (panzoom.content.scale > 1 && !touchIsEnabled) {\r\n        classList.add(zoomOutClass);\r\n      }\r\n    } else if (clickAction === \"close\") {\r\n      classList.add(zoomOutClass);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle `wheel` event\r\n   * @param {Object} slide\r\n   * @param {Object} event\r\n   */\r\n  onWheel(slide, event) {\r\n    if (this.fancybox.state !== \"ready\") {\r\n      return;\r\n    }\r\n\r\n    if (this.fancybox.trigger(\"Image.wheel\", event) === false) {\r\n      return;\r\n    }\r\n\r\n    switch (this.fancybox.option(\"Image.wheel\")) {\r\n      case \"zoom\":\r\n        if (slide.state === \"done\") {\r\n          slide.Panzoom && slide.Panzoom.zoomWithWheel(event);\r\n        }\r\n\r\n        break;\r\n\r\n      case \"close\":\r\n        this.fancybox.close();\r\n\r\n        break;\r\n\r\n      case \"slide\":\r\n        this.fancybox[event.deltaY < 0 ? \"prev\" : \"next\"]();\r\n\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle `click` and `dblclick` events\r\n   * @param {Object} slide\r\n   * @param {Object} event\r\n   */\r\n  onClick(slide, event) {\r\n    // Check that clicks should be allowed\r\n    if (this.fancybox.state !== \"ready\") {\r\n      return;\r\n    }\r\n\r\n    const panzoom = slide.Panzoom;\r\n\r\n    if (\r\n      panzoom &&\r\n      (panzoom.dragPosition.midPoint ||\r\n        panzoom.dragOffset.x !== 0 ||\r\n        panzoom.dragOffset.y !== 0 ||\r\n        panzoom.dragOffset.scale !== 1)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (this.fancybox.Carousel.Panzoom.lockAxis) {\r\n      return false;\r\n    }\r\n\r\n    const process = (action) => {\r\n      switch (action) {\r\n        case \"toggleZoom\":\r\n          event.stopPropagation();\r\n\r\n          slide.Panzoom && slide.Panzoom.zoomWithClick(event);\r\n\r\n          break;\r\n\r\n        case \"close\":\r\n          this.fancybox.close();\r\n\r\n          break;\r\n\r\n        case \"next\":\r\n          event.stopPropagation();\r\n\r\n          this.fancybox.next();\r\n\r\n          break;\r\n      }\r\n    };\r\n\r\n    const clickAction = this.fancybox.option(\"Image.click\");\r\n    const dblclickAction = this.fancybox.option(\"Image.doubleClick\");\r\n\r\n    if (dblclickAction) {\r\n      if (this.clickTimer) {\r\n        clearTimeout(this.clickTimer);\r\n        this.clickTimer = null;\r\n\r\n        process(dblclickAction);\r\n      } else {\r\n        this.clickTimer = setTimeout(() => {\r\n          this.clickTimer = null;\r\n          process(clickAction);\r\n        }, 300);\r\n      }\r\n    } else {\r\n      process(clickAction);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle `Carousel.change` event to reset zoom level for any zoomed in/out content\r\n   * and to revel content of the current page\r\n   * @param {Object} fancybox\r\n   * @param {Object} carousel\r\n   */\r\n  onPageChange(fancybox, carousel) {\r\n    const currSlide = fancybox.getSlide();\r\n\r\n    carousel.slides.forEach((slide) => {\r\n      if (!slide.Panzoom || slide.state !== \"done\") {\r\n        return;\r\n      }\r\n\r\n      if (slide.index !== currSlide.index) {\r\n        slide.Panzoom.panTo({\r\n          x: 0,\r\n          y: 0,\r\n          scale: 1,\r\n          friction: 0.8,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  attach() {\r\n    this.fancybox.on(this.events);\r\n  }\r\n\r\n  detach() {\r\n    this.fancybox.off(this.events);\r\n  }\r\n}\r\n\r\n// Expose defaults\r\nImage.defaults = defaults;\r\n","import { canUseDOM } from \"../../../shared/utils/canUseDOM.js\";\n\nexport class Hash {\n  constructor(fancybox) {\n    this.fancybox = fancybox;\n\n    for (const methodName of [\"onChange\", \"onClosing\"]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n\n    this.events = {\n      initCarousel: this.onChange,\n      \"Carousel.change\": this.onChange,\n      closing: this.onClosing,\n    };\n\n    this.hasCreatedHistory = false;\n    this.origHash = \"\";\n    this.timer = null;\n  }\n\n  /**\n   * Process `Carousel.ready` and `Carousel.change` events to update URL hash\n   * @param {Object} fancybox\n   * @param {Object} carousel\n   */\n  onChange(fancybox) {\n    const carousel = fancybox.Carousel;\n\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n\n    const firstRun = carousel.prevPage === null;\n    const currentSlide = fancybox.getSlide();\n\n    const currentHash = new URL(document.URL).hash;\n\n    let newHash = false;\n\n    if (currentSlide.slug) {\n      newHash = \"#\" + currentSlide.slug;\n    } else {\n      const dataset = currentSlide.$trigger && currentSlide.$trigger.dataset;\n      const slug = fancybox.option(\"slug\") || (dataset && dataset.fancybox);\n\n      if (slug && slug.length && slug !== \"true\") {\n        newHash = \"#\" + slug + (carousel.slides.length > 1 ? \"-\" + (currentSlide.index + 1) : \"\");\n      }\n    }\n\n    if (firstRun) {\n      this.origHash = currentHash !== newHash ? currentHash : \"\";\n    }\n\n    if (newHash && currentHash !== newHash) {\n      this.timer = setTimeout(() => {\n        try {\n          window.history[firstRun ? \"pushState\" : \"replaceState\"](\n            {},\n            document.title,\n            window.location.pathname + window.location.search + newHash\n          );\n\n          if (firstRun) {\n            this.hasCreatedHistory = true;\n          }\n        } catch (e) {}\n      }, 300);\n    }\n  }\n\n  /**\n   * Process `closing` event to clean up\n   */\n  onClosing() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n\n    // Skip if closing is triggered by pressing  browser back button or by changing hash manually\n    if (this.hasSilentClose === true) {\n      return;\n    }\n\n    // Restore original url\n    try {\n      window.history.replaceState(\n        {},\n        document.title,\n        window.location.pathname + window.location.search + (this.origHash || \"\")\n      );\n\n      return;\n    } catch (e) {}\n  }\n\n  attach(fancybox) {\n    fancybox.on(this.events);\n  }\n\n  detach(fancybox) {\n    fancybox.off(this.events);\n  }\n\n  /**\n   * Start fancybox from current URL hash,\n   * this will be called on page load OR/AND after changing URL hash\n   * @param {Class} Fancybox\n   */\n  static startFromUrl() {\n    const Fancybox = Hash.Fancybox;\n\n    if (!Fancybox || Fancybox.getInstance() || Fancybox.defaults.Hash === false) {\n      return;\n    }\n\n    const { hash, slug, index } = Hash.getParsedURL();\n\n    if (!slug) {\n      return;\n    }\n\n    // Support custom slug\n    // ===\n    let selectedElem = document.querySelector(`[data-slug=\"${hash}\"]`);\n\n    if (selectedElem) {\n      selectedElem.dispatchEvent(new CustomEvent(\"click\", { bubbles: true, cancelable: true }));\n    }\n\n    if (Fancybox.getInstance()) {\n      return;\n    }\n\n    // If elements are not found by custom slug, use URL hash value as group name\n    // ===\n    const groupElems = document.querySelectorAll(`[data-fancybox=\"${slug}\"]`);\n\n    if (!groupElems.length) {\n      return;\n    }\n\n    if (index === null && groupElems.length === 1) {\n      selectedElem = groupElems[0];\n    } else if (index) {\n      selectedElem = groupElems[index - 1];\n    }\n\n    if (selectedElem) {\n      selectedElem.dispatchEvent(new CustomEvent(\"click\", { bubbles: true, cancelable: true }));\n    }\n  }\n\n  /**\n   * Handle `hash` change, change gallery item to current index or start/close current instance\n   */\n  static onHashChange() {\n    const { slug, index } = Hash.getParsedURL();\n\n    const Fancybox = Hash.Fancybox;\n    const instance = Fancybox && Fancybox.getInstance();\n\n    if (instance && instance.plugins.Hash) {\n      // Check if hash matches currently active gallery\n      if (slug) {\n        const carousel = instance.Carousel;\n\n        /**\n         * Support manually opened gallery\n         */\n        if (slug === instance.option(\"slug\")) {\n          return carousel.slideTo(index - 1);\n        }\n\n        /**\n         * Check if URL hash matches `data-slug` value of active element\n         */\n        for (let slide of carousel.slides) {\n          if (slide.slug && slide.slug === slug) {\n            return carousel.slideTo(slide.index);\n          }\n        }\n\n        /**\n         * Check if URL hash matches `data-fancybox` value of active element\n         */\n        const slide = instance.getSlide();\n        const dataset = slide.$trigger && slide.$trigger.dataset;\n\n        if (dataset && dataset.fancybox === slug) {\n          return carousel.slideTo(index - 1);\n        }\n      }\n\n      /**\n       * Close if no matching element found\n       */\n      instance.plugins.Hash.hasSilentClose = true;\n\n      instance.close();\n    }\n\n    /**\n     * Attempt to start\n     */\n    Hash.startFromUrl();\n  }\n\n  /**\n   * Add event bindings that will start new Fancybox instance based in the current URL\n   */\n  static create(Fancybox) {\n    Hash.Fancybox = Fancybox;\n\n    function proceed() {\n      window.addEventListener(\"hashchange\", Hash.onHashChange, false);\n\n      Hash.startFromUrl();\n    }\n\n    if (canUseDOM) {\n      window.requestAnimationFrame(() => {\n        if (/complete|interactive|loaded/.test(document.readyState)) {\n          proceed();\n        } else {\n          document.addEventListener(\"DOMContentLoaded\", proceed);\n        }\n      });\n    }\n  }\n\n  static destroy() {\n    window.removeEventListener(\"hashchange\", Hash.onHashChange, false);\n  }\n\n  /**\n   * Helper method to split URL hash into useful pieces\n   */\n  static getParsedURL() {\n    const hash = window.location.hash.substr(1),\n      tmp = hash.split(\"-\"),\n      index = tmp.length > 1 && /^\\+?\\d+$/.test(tmp[tmp.length - 1]) ? parseInt(tmp.pop(-1), 10) || null : null,\n      slug = tmp.join(\"-\");\n\n    return {\n      hash,\n      slug,\n      index,\n    };\n  }\n}\n","export const Fullscreen = {\r\n  pageXOffset: 0,\r\n  pageYOffset: 0,\r\n\r\n  element() {\r\n    return document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement;\r\n  },\r\n\r\n  activate(element) {\r\n    Fullscreen.pageXOffset = window.pageXOffset;\r\n    Fullscreen.pageYOffset = window.pageYOffset;\r\n\r\n    if (element.requestFullscreen) {\r\n      element.requestFullscreen(); // W3C spec\r\n    } else if (element.mozRequestFullScreen) {\r\n      element.mozRequestFullScreen(); // Firefox\r\n    } else if (element.webkitRequestFullscreen) {\r\n      element.webkitRequestFullscreen(); // Safari\r\n    } else if (element.msRequestFullscreen) {\r\n      element.msRequestFullscreen(); // IE/Edge\r\n    }\r\n  },\r\n\r\n  deactivate() {\r\n    if (document.exitFullscreen) {\r\n      document.exitFullscreen();\r\n    } else if (document.mozCancelFullScreen) {\r\n      document.mozCancelFullScreen();\r\n    } else if (document.webkitExitFullscreen) {\r\n      document.webkitExitFullscreen();\r\n    }\r\n  },\r\n};\r\n","export class Slideshow {\r\n  constructor(fancybox) {\r\n    this.fancybox = fancybox;\r\n    this.active = false;\r\n\r\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\r\n  }\r\n\r\n  isActive() {\r\n    return this.active;\r\n  }\r\n\r\n  setTimer() {\r\n    if (!this.active || this.timer) {\r\n      return;\r\n    }\r\n\r\n    const delay = this.fancybox.option(\"slideshow.delay\", 3000);\r\n\r\n    this.timer = setTimeout(() => {\r\n      this.timer = null;\r\n\r\n      if (\r\n        !this.fancybox.option(\"infinite\") &&\r\n        this.fancybox.getSlide().index === this.fancybox.Carousel.slides.length - 1\r\n      ) {\r\n        this.fancybox.jumpTo(0, { friction: 0 });\r\n      } else {\r\n        this.fancybox.next();\r\n      }\r\n    }, delay);\r\n\r\n    let $progress = this.$progress;\r\n\r\n    if (!$progress) {\r\n      $progress = document.createElement(\"div\");\r\n      $progress.classList.add(\"fancybox__progress\");\r\n\r\n      this.fancybox.$carousel.parentNode.insertBefore($progress, this.fancybox.$carousel);\r\n\r\n      this.$progress = $progress;\r\n\r\n      $progress.offsetHeight; /* trigger reflow */\r\n    }\r\n\r\n    $progress.style.transitionDuration = `${delay}ms`;\r\n    $progress.style.transform = \"scaleX(1)\";\r\n  }\r\n\r\n  clearTimer() {\r\n    clearTimeout(this.timer);\r\n    this.timer = null;\r\n\r\n    if (this.$progress) {\r\n      this.$progress.style.transitionDuration = \"\";\r\n      this.$progress.style.transform = \"\";\r\n\r\n      this.$progress.offsetHeight; /* trigger reflow */\r\n    }\r\n  }\r\n\r\n  activate() {\r\n    if (this.active) {\r\n      return;\r\n    }\r\n\r\n    this.active = true;\r\n    this.fancybox.$container.classList.add(\"has-slideshow\");\r\n\r\n    if (this.fancybox.getSlide().state === \"done\") {\r\n      this.setTimer();\r\n    }\r\n\r\n    document.addEventListener(\"visibilitychange\", this.handleVisibilityChange, false);\r\n  }\r\n\r\n  handleVisibilityChange() {\r\n    this.deactivate();\r\n  }\r\n\r\n  deactivate() {\r\n    this.active = false;\r\n\r\n    this.clearTimer();\r\n\r\n    this.fancybox.$container.classList.remove(\"has-slideshow\");\r\n\r\n    document.removeEventListener(\"visibilitychange\", this.handleVisibilityChange, false);\r\n  }\r\n\r\n  toggle() {\r\n    if (this.active) {\r\n      this.deactivate();\r\n    } else if (this.fancybox.Carousel.slides.length > 1) {\r\n      this.activate();\r\n    }\r\n  }\r\n}\r\n","import { isPlainObject } from \"../../../shared/utils/isPlainObject.js\";\r\nimport { extend } from \"../../../shared/utils/extend.js\";\r\n\r\nimport { Fullscreen } from \"../../../shared/utils/Fullscreen.js\";\r\nimport { Slideshow } from \"../../../shared/utils/Slideshow.js\";\r\n\r\nconst defaults = {\r\n  // What toolbar items to display\r\n  display: [\r\n    \"counter\",\r\n    //\"prev\",\r\n    //\"next\",\r\n    //\"download\",\r\n    \"zoom\",\r\n    \"slideshow\",\r\n    \"fullscreen\",\r\n    \"thumbs\",\r\n    \"close\",\r\n  ],\r\n\r\n  // Only create a toolbar item if there is at least one image in the group\r\n  autoEnable: true,\r\n\r\n  // Toolbar items; can be links, buttons or `div` elements\r\n  items: {\r\n    counter: {\r\n      position: \"left\",\r\n      type: \"div\",\r\n      class: \"fancybox__counter\",\r\n      html: '<span data-fancybox-index=\"\"></span>&nbsp;/&nbsp;<span data-fancybox-count=\"\"></span>',\r\n      attr: { tabindex: -1 },\r\n    },\r\n    prev: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--prev\",\r\n      label: \"PREV\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><path d=\"M15 4l-8 8 8 8\"/></svg>',\r\n      attr: { \"data-fancybox-prev\": \"\" },\r\n    },\r\n    next: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--next\",\r\n      label: \"NEXT\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><path d=\"M8 4l8 8-8 8\"/></svg>',\r\n      attr: { \"data-fancybox-next\": \"\" },\r\n    },\r\n    fullscreen: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--fullscreen\",\r\n      label: \"TOGGLE_FULLSCREEN\",\r\n      html: `<svg viewBox=\"0 0 24 24\">\r\n                <g><path d=\"M3 8 V3h5\"></path><path d=\"M21 8V3h-5\"></path><path d=\"M8 21H3v-5\"></path><path d=\"M16 21h5v-5\"></path></g>\r\n                <g><path d=\"M7 2v5H2M17 2v5h5M2 17h5v5M22 17h-5v5\"/></g>\r\n            </svg>`,\r\n      click: function (event) {\r\n        event.preventDefault();\r\n\r\n        if (Fullscreen.element()) {\r\n          Fullscreen.deactivate();\r\n        } else {\r\n          Fullscreen.activate(this.fancybox.$container);\r\n        }\r\n      },\r\n    },\r\n    slideshow: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--slideshow\",\r\n      label: \"TOGGLE_SLIDESHOW\",\r\n      html: `<svg viewBox=\"0 0 24 24\">\r\n                <g><path d=\"M6 4v16\"/><path d=\"M20 12L6 20\"/><path d=\"M20 12L6 4\"/></g>\r\n                <g><path d=\"M7 4v15M17 4v15\"/></g>\r\n            </svg>`,\r\n      click: function (event) {\r\n        event.preventDefault();\r\n\r\n        this.Slideshow.toggle();\r\n      },\r\n    },\r\n    zoom: {\r\n      type: \"button\",\r\n      class: \"fancybox__button--zoom\",\r\n      label: \"TOGGLE_ZOOM\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><circle cx=\"10\" cy=\"10\" r=\"7\"></circle><path d=\"M16 16 L21 21\"></svg>',\r\n      click: function (event) {\r\n        event.preventDefault();\r\n\r\n        const panzoom = this.fancybox.getSlide().Panzoom;\r\n\r\n        if (panzoom) {\r\n          panzoom.toggleZoom();\r\n        }\r\n      },\r\n    },\r\n    download: {\r\n      type: \"link\",\r\n      label: \"DOWNLOAD\",\r\n      class: \"fancybox__button--download\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><path d=\"M12 15V3m0 12l-4-4m4 4l4-4M2 17l.62 2.48A2 2 0 004.56 21h14.88a2 2 0 001.94-1.51L22 17\"/></svg>',\r\n      click: function (event) {\r\n        event.stopPropagation();\r\n      },\r\n    },\r\n    thumbs: {\r\n      type: \"button\",\r\n      label: \"TOGGLE_THUMBS\",\r\n      class: \"fancybox__button--thumbs\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><circle cx=\"4\" cy=\"4\" r=\"1\" /><circle cx=\"12\" cy=\"4\" r=\"1\" transform=\"rotate(90 12 4)\"/><circle cx=\"20\" cy=\"4\" r=\"1\" transform=\"rotate(90 20 4)\"/><circle cx=\"4\" cy=\"12\" r=\"1\" transform=\"rotate(90 4 12)\"/><circle cx=\"12\" cy=\"12\" r=\"1\" transform=\"rotate(90 12 12)\"/><circle cx=\"20\" cy=\"12\" r=\"1\" transform=\"rotate(90 20 12)\"/><circle cx=\"4\" cy=\"20\" r=\"1\" transform=\"rotate(90 4 20)\"/><circle cx=\"12\" cy=\"20\" r=\"1\" transform=\"rotate(90 12 20)\"/><circle cx=\"20\" cy=\"20\" r=\"1\" transform=\"rotate(90 20 20)\"/></svg>',\r\n      click: function (event) {\r\n        event.stopPropagation();\r\n\r\n        const thumbs = this.fancybox.plugins.Thumbs;\r\n\r\n        if (thumbs) {\r\n          thumbs.toggle();\r\n        }\r\n      },\r\n    },\r\n    close: {\r\n      type: \"button\",\r\n      label: \"CLOSE\",\r\n      class: \"fancybox__button--close\",\r\n      html: '<svg viewBox=\"0 0 24 24\"><path d=\"M20 20L4 4m16 0L4 20\"></path></svg>',\r\n      attr: { \"data-fancybox-close\": \"\", tabindex: 0 },\r\n    },\r\n  },\r\n};\r\n\r\nexport class Toolbar {\r\n  constructor(fancybox) {\r\n    this.fancybox = fancybox;\r\n\r\n    this.$container = null;\r\n    this.state = \"init\";\r\n\r\n    for (const methodName of [\r\n      \"onInit\",\r\n      \"onPrepare\",\r\n      \"onDone\",\r\n      \"onKeydown\",\r\n      \"onClosing\",\r\n      \"onChange\",\r\n      \"onSettle\",\r\n      \"onRefresh\",\r\n    ]) {\r\n      this[methodName] = this[methodName].bind(this);\r\n    }\r\n\r\n    this.events = {\r\n      init: this.onInit,\r\n      prepare: this.onPrepare,\r\n      done: this.onDone,\r\n      keydown: this.onKeydown,\r\n      closing: this.onClosing,\r\n\r\n      // Clear Slideshow when user strts to change current slide\r\n      \"Carousel.change\": this.onChange,\r\n\r\n      // Set timer after carousel changes current slide; deactive if last slide is reached\r\n      \"Carousel.settle\": this.onSettle,\r\n\r\n      // Deactivate Slideshow on user interaction\r\n      \"Carousel.Panzoom.touchStart\": () => this.onRefresh(),\r\n\r\n      \"Image.startAnimation\": (fancybox, slide) => this.onRefresh(slide),\r\n      \"Image.afterUpdate\": (fancybox, slide) => this.onRefresh(slide),\r\n    };\r\n  }\r\n\r\n  onInit() {\r\n    // Disable self if current group does not contain at least one image\r\n    if (this.fancybox.option(\"Toolbar.autoEnable\")) {\r\n      let hasImage = false;\r\n\r\n      for (const item of this.fancybox.items) {\r\n        if (item.type === \"image\") {\r\n          hasImage = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!hasImage) {\r\n        this.state = \"disabled\";\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Disable the creation of a close button, if one exists in the toolbar\r\n    for (const key of this.fancybox.option(\"Toolbar.display\")) {\r\n      const id = isPlainObject(key) ? key.id : key;\r\n\r\n      if (id === \"close\") {\r\n        this.fancybox.options.closeButton = false;\r\n\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  onPrepare() {\r\n    const fancybox = this.fancybox;\r\n    // Skip if disabled\r\n    if (this.state !== \"init\") {\r\n      return;\r\n    }\r\n\r\n    this.build();\r\n\r\n    this.update();\r\n\r\n    this.Slideshow = new Slideshow(fancybox);\r\n\r\n    if (!fancybox.Carousel.prevPage) {\r\n      if (fancybox.option(\"slideshow.autoStart\")) {\r\n        this.Slideshow.activate();\r\n      }\r\n\r\n      if (fancybox.option(\"fullscreen.autoStart\") && !Fullscreen.element()) {\r\n        try {\r\n          Fullscreen.activate(fancybox.$container);\r\n        } catch (error) {}\r\n      }\r\n    }\r\n  }\r\n\r\n  onFsChange() {\r\n    window.scrollTo(Fullscreen.pageXOffset, Fullscreen.pageYOffset);\r\n  }\r\n\r\n  onSettle() {\r\n    const fancybox = this.fancybox;\r\n    const slideshow = this.Slideshow;\r\n\r\n    if (slideshow && slideshow.isActive()) {\r\n      if (fancybox.getSlide().index === fancybox.Carousel.slides.length - 1 && !fancybox.option(\"infinite\")) {\r\n        slideshow.deactivate();\r\n      } else if (fancybox.getSlide().state === \"done\") {\r\n        slideshow.setTimer();\r\n      }\r\n    }\r\n  }\r\n\r\n  onChange() {\r\n    this.update();\r\n\r\n    if (this.Slideshow && this.Slideshow.isActive()) {\r\n      this.Slideshow.clearTimer();\r\n    }\r\n  }\r\n\r\n  onDone(fancybox, slide) {\r\n    const slideshow = this.Slideshow;\r\n\r\n    if (slide.index === fancybox.getSlide().index) {\r\n      this.update();\r\n\r\n      if (slideshow && slideshow.isActive()) {\r\n        if (!fancybox.option(\"infinite\") && slide.index === fancybox.Carousel.slides.length - 1) {\r\n          slideshow.deactivate();\r\n        } else {\r\n          slideshow.setTimer();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onRefresh(slide) {\r\n    if (!slide || slide.index === this.fancybox.getSlide().index) {\r\n      this.update();\r\n\r\n      if (this.Slideshow && this.Slideshow.isActive() && (!slide || slide.state === \"done\")) {\r\n        this.Slideshow.deactivate();\r\n      }\r\n    }\r\n  }\r\n\r\n  onKeydown(fancybox, key, event) {\r\n    if (key === \" \" && this.Slideshow) {\r\n      this.Slideshow.toggle();\r\n\r\n      event.preventDefault();\r\n    }\r\n  }\r\n\r\n  onClosing() {\r\n    if (this.Slideshow) {\r\n      this.Slideshow.deactivate();\r\n    }\r\n\r\n    document.removeEventListener(\"fullscreenchange\", this.onFsChange);\r\n  }\r\n\r\n  /**\r\n   * Create link, button or `div` element for the toolbar\r\n   * @param {Object} obj\r\n   * @returns HTMLElement\r\n   */\r\n  createElement(obj) {\r\n    let $el;\r\n\r\n    if (obj.type === \"div\") {\r\n      $el = document.createElement(\"div\");\r\n    } else {\r\n      $el = document.createElement(obj.type === \"link\" ? \"a\" : \"button\");\r\n      $el.classList.add(\"carousel__button\");\r\n    }\r\n\r\n    $el.innerHTML = obj.html;\r\n\r\n    $el.setAttribute(\"tabindex\", obj.tabindex || 0);\r\n\r\n    if (obj.class) {\r\n      $el.classList.add(...obj.class.split(\" \"));\r\n    }\r\n\r\n    for (const prop in obj.attr) {\r\n      $el.setAttribute(prop, obj.attr[prop]);\r\n    }\r\n\r\n    if (obj.label) {\r\n      $el.setAttribute(\"title\", this.fancybox.localize(`{{${obj.label}}}`));\r\n    }\r\n\r\n    if (obj.click) {\r\n      $el.addEventListener(\"click\", obj.click.bind(this));\r\n    }\r\n\r\n    if (obj.id === \"prev\") {\r\n      $el.setAttribute(\"data-fancybox-prev\", \"\");\r\n    }\r\n\r\n    if (obj.id === \"next\") {\r\n      $el.setAttribute(\"data-fancybox-next\", \"\");\r\n    }\r\n\r\n    const $svg = $el.querySelector(\"svg\");\r\n\r\n    if ($svg) {\r\n      $svg.setAttribute(\"role\", \"img\");\r\n      $svg.setAttribute(\"tabindex\", \"-1\");\r\n      $svg.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\r\n    }\r\n\r\n    return $el;\r\n  }\r\n\r\n  /**\r\n   * Create all DOM elements\r\n   */\r\n  build() {\r\n    this.cleanup();\r\n\r\n    const all_items = this.fancybox.option(\"Toolbar.items\");\r\n    const all_groups = [\r\n      {\r\n        position: \"left\",\r\n        items: [],\r\n      },\r\n      {\r\n        position: \"center\",\r\n        items: [],\r\n      },\r\n      {\r\n        position: \"right\",\r\n        items: [],\r\n      },\r\n    ];\r\n\r\n    const thumbs = this.fancybox.plugins.Thumbs;\r\n\r\n    // 1st step - group toolbar elements by position\r\n    for (const key of this.fancybox.option(\"Toolbar.display\")) {\r\n      let id, item;\r\n\r\n      if (isPlainObject(key)) {\r\n        id = key.id;\r\n        item = extend({}, all_items[id], key);\r\n      } else {\r\n        id = key;\r\n        item = all_items[id];\r\n      }\r\n\r\n      if ([\"counter\", \"next\", \"prev\", \"slideshow\"].includes(id) && this.fancybox.items.length < 2) {\r\n        continue;\r\n      }\r\n\r\n      if (id === \"fullscreen\") {\r\n        if (!document.fullscreenEnabled || window.fullScreen) {\r\n          continue;\r\n        }\r\n\r\n        document.addEventListener(\"fullscreenchange\", this.onFsChange);\r\n      }\r\n\r\n      if (id === \"thumbs\" && (!thumbs || thumbs.state === \"disabled\")) {\r\n        continue;\r\n      }\r\n\r\n      if (!item) {\r\n        continue;\r\n      }\r\n\r\n      let position = item.position || \"right\";\r\n\r\n      let group = all_groups.find((obj) => obj.position === position);\r\n\r\n      if (group) {\r\n        group.items.push(item);\r\n      }\r\n    }\r\n\r\n    // 2st step - create DOM elements\r\n    const $container = document.createElement(\"div\");\r\n    $container.classList.add(\"fancybox__toolbar\");\r\n\r\n    for (const group of all_groups) {\r\n      if (group.items.length) {\r\n        const $wrap = document.createElement(\"div\");\r\n        $wrap.classList.add(\"fancybox__toolbar__items\");\r\n        $wrap.classList.add(`fancybox__toolbar__items--${group.position}`);\r\n\r\n        for (const obj of group.items) {\r\n          $wrap.appendChild(this.createElement(obj));\r\n        }\r\n\r\n        $container.appendChild($wrap);\r\n      }\r\n    }\r\n\r\n    // Add toolbar container to DOM\r\n    this.fancybox.$carousel.parentNode.insertBefore($container, this.fancybox.$carousel);\r\n\r\n    this.$container = $container;\r\n  }\r\n\r\n  /**\r\n   * Update element state depending on index of current slide\r\n   */\r\n  update() {\r\n    const slide = this.fancybox.getSlide();\r\n    const idx = slide.index;\r\n    const cnt = this.fancybox.items.length;\r\n\r\n    // Download links\r\n    // ====\r\n    const src = slide.downloadSrc || (slide.type === \"image\" && !slide.error ? slide.src : null);\r\n\r\n    for (const $el of this.fancybox.$container.querySelectorAll(\"a.fancybox__button--download\")) {\r\n      if (src) {\r\n        $el.removeAttribute(\"disabled\");\r\n        $el.removeAttribute(\"tabindex\");\r\n\r\n        $el.setAttribute(\"href\", src);\r\n        $el.setAttribute(\"download\", src);\r\n        $el.setAttribute(\"target\", \"_blank\");\r\n      } else {\r\n        $el.setAttribute(\"disabled\", \"\");\r\n        $el.setAttribute(\"tabindex\", -1);\r\n\r\n        $el.removeAttribute(\"href\");\r\n        $el.removeAttribute(\"download\");\r\n      }\r\n    }\r\n\r\n    // Zoom button\r\n    // ===\r\n    const panzoom = slide.Panzoom;\r\n    const canZoom = panzoom && panzoom.option(\"maxScale\") > panzoom.option(\"baseScale\");\r\n\r\n    for (const $el of this.fancybox.$container.querySelectorAll(\".fancybox__button--zoom\")) {\r\n      if (canZoom) {\r\n        $el.removeAttribute(\"disabled\");\r\n      } else {\r\n        $el.setAttribute(\"disabled\", \"\");\r\n      }\r\n    }\r\n\r\n    // Counter\r\n    // ====\r\n    for (const $el of this.fancybox.$container.querySelectorAll(\"[data-fancybox-index]\")) {\r\n      $el.innerHTML = slide.index + 1;\r\n    }\r\n\r\n    for (const $el of this.fancybox.$container.querySelectorAll(\"[data-fancybox-count]\")) {\r\n      $el.innerHTML = cnt;\r\n    }\r\n\r\n    // Disable previous/next links if gallery is not infinite and has reached start/end\r\n    // ===\r\n    if (!this.fancybox.option(\"infinite\")) {\r\n      for (const $el of this.fancybox.$container.querySelectorAll(\"[data-fancybox-prev]\")) {\r\n        if (idx === 0) {\r\n          $el.setAttribute(\"disabled\", \"\");\r\n        } else {\r\n          $el.removeAttribute(\"disabled\");\r\n        }\r\n      }\r\n\r\n      for (const $el of this.fancybox.$container.querySelectorAll(\"[data-fancybox-next]\")) {\r\n        if (idx === cnt - 1) {\r\n          $el.setAttribute(\"disabled\", \"\");\r\n        } else {\r\n          $el.removeAttribute(\"disabled\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  cleanup() {\r\n    if (this.Slideshow && this.Slideshow.isActive()) {\r\n      this.Slideshow.clearTimer();\r\n    }\r\n\r\n    if (this.$container) {\r\n      this.$container.remove();\r\n    }\r\n\r\n    this.$container = null;\r\n  }\r\n\r\n  attach() {\r\n    this.fancybox.on(this.events);\r\n  }\r\n\r\n  detach() {\r\n    this.fancybox.off(this.events);\r\n\r\n    this.cleanup();\r\n  }\r\n}\r\n\r\n// Expose defaults\r\nToolbar.defaults = defaults;\r\n","import { ScrollLock } from \"./ScrollLock/ScrollLock.js\";\nimport { Thumbs } from \"./Thumbs/Thumbs.js\";\nimport { Html } from \"./Html/Html.js\";\nimport { Image } from \"./Image/Image.js\";\nimport { Hash } from \"./Hash/Hash.js\";\nimport { Toolbar } from \"./Toolbar/Toolbar.js\";\n\nexport const Plugins = {\n  ScrollLock,\n  Thumbs,\n  Html,\n  Toolbar,\n  Image,\n  Hash,\n};\n","import { isScrollable } from \"../../../../src/shared/utils/isScrollable.js\";\n\nexport class ScrollLock {\n  constructor(fancybox) {\n    this.fancybox = fancybox;\n    this.viewport = null;\n\n    this.pendingUpdate = null;\n\n    for (const methodName of [\"onReady\", \"onResize\", \"onTouchstart\", \"onTouchmove\"]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n  }\n\n  /**\n   * Process `initLayout` event to attach event listeners and resize viewport if needed\n   */\n  onReady() {\n    //* Support Visual Viewport API\n    // https://developer.mozilla.org/en-US/docs/Web/API/Visual_Viewport_API\n    const viewport = window.visualViewport;\n\n    if (viewport) {\n      this.viewport = viewport;\n      this.startY = 0;\n\n      viewport.addEventListener(\"resize\", this.onResize);\n\n      this.updateViewport();\n    }\n\n    //* Prevent bouncing while scrolling on mobile devices\n    window.addEventListener(\"touchstart\", this.onTouchstart, { passive: false });\n    window.addEventListener(\"touchmove\", this.onTouchmove, { passive: false });\n\n    //* Prevent window scrolling with mouse wheel\n    window.addEventListener(\"wheel\", this.onWheel, { passive: false });\n  }\n\n  /**\n   * Handle `resize` event to call `updateViewport`\n   */\n  onResize() {\n    this.updateViewport();\n  }\n\n  /**\n   * Scale $container proportionally to actually fit inside browser,\n   * e.g., disable viewport zooming\n   */\n  updateViewport() {\n    const fancybox = this.fancybox,\n      viewport = this.viewport,\n      scale = viewport.scale || 1,\n      $container = fancybox.$container;\n\n    if (!$container) {\n      return;\n    }\n\n    let width = \"\",\n      height = \"\",\n      transform = \"\";\n\n    if (scale - 1 > 0.1) {\n      width = `${viewport.width * scale}px`;\n      height = `${viewport.height * scale}px`;\n      transform = `translate3d(${viewport.offsetLeft}px, ${viewport.offsetTop}px, 0) scale(${1 / scale})`;\n    }\n\n    $container.style.width = width;\n    $container.style.height = height;\n    $container.style.transform = transform;\n  }\n\n  /**\n   * Handle `touchstart` event to mark drag start position\n   * @param {Object} event\n   */\n  onTouchstart(event) {\n    this.startY = event.touches ? event.touches[0].screenY : event.screenY;\n  }\n\n  /**\n   * Handle `touchmove` event to fix scrolling on mobile devices (iOS)\n   * @param {Object} event\n   */\n  onTouchmove(event) {\n    const startY = this.startY;\n    const zoom = window.innerWidth / window.document.documentElement.clientWidth;\n\n    if (!event.cancelable) {\n      return;\n    }\n\n    if (event.touches.length > 1 || zoom !== 1) {\n      return;\n    }\n\n    const el = isScrollable(event.composedPath()[0]);\n\n    if (!el) {\n      event.preventDefault();\n      return;\n    }\n\n    const style = window.getComputedStyle(el);\n    const height = parseInt(style.getPropertyValue(\"height\"), 10);\n\n    const curY = event.touches ? event.touches[0].screenY : event.screenY;\n\n    const isAtTop = startY <= curY && el.scrollTop === 0;\n    const isAtBottom = startY >= curY && el.scrollHeight - el.scrollTop === height;\n\n    if (isAtTop || isAtBottom) {\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * Handle `wheel` event\n   */\n  onWheel(event) {\n    if (!isScrollable(event.composedPath()[0])) {\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * Clean everything up\n   */\n  cleanup() {\n    if (this.pendingUpdate) {\n      cancelAnimationFrame(this.pendingUpdate);\n      this.pendingUpdate = null;\n    }\n\n    const viewport = this.viewport;\n\n    if (viewport) {\n      viewport.removeEventListener(\"resize\", this.onResize);\n      this.viewport = null;\n    }\n\n    window.removeEventListener(\"touchstart\", this.onTouchstart, false);\n    window.removeEventListener(\"touchmove\", this.onTouchmove, false);\n\n    window.removeEventListener(\"wheel\", this.onWheel, { passive: false });\n  }\n\n  attach() {\n    this.fancybox.on(\"initLayout\", this.onReady);\n  }\n\n  detach() {\n    this.fancybox.off(\"initLayout\", this.onReady);\n\n    this.cleanup();\n  }\n}\n","import { extend } from \"../shared/utils/extend.js\";\nimport { canUseDOM } from \"../shared/utils/canUseDOM.js\";\nimport { FOCUSABLE_ELEMENTS, setFocusOn } from \"../shared/utils/setFocusOn.js\";\n\nimport { Base } from \"../shared/Base/Base.js\";\n\nimport { Carousel } from \"../Carousel/Carousel.js\";\n\nimport { Plugins } from \"./plugins/index.js\";\n\n// Default language\nimport en from \"./l10n/en.js\";\n\n// Default settings\nconst defaults = {\n  // Index of active slide on the start\n  startIndex: 0,\n\n  // Number of slides to preload before and after active slide\n  preload: 1,\n\n  // Should navigation be infinite\n  infinite: true,\n\n  // Class name to be applied to the content to reveal it\n  showClass: \"fancybox-zoomInUp\", // \"fancybox-fadeIn\" | \"fancybox-zoomInUp\" | false\n\n  // Class name to be applied to the content to hide it\n  hideClass: \"fancybox-fadeOut\", // \"fancybox-fadeOut\" | \"fancybox-zoomOutDown\" | false\n\n  // Should backdrop and UI elements fade in/out on start/close\n  animated: true,\n\n  // If browser scrollbar should be hidden\n  hideScrollbar: true,\n\n  // Element containing main structure\n  parentEl: null,\n\n  // Custom class name or multiple space-separated class names for the container\n  mainClass: null,\n\n  // Set focus on first focusable element after displaying content\n  autoFocus: true,\n\n  // Trap focus inside Fancybox\n  trapFocus: true,\n\n  // Set focus back to trigger element after closing Fancybox\n  placeFocusBack: true,\n\n  // Action to take when the user clicks on the backdrop\n  click: \"close\", // \"close\" | \"next\" | null\n\n  // Position of the close button - over the content or at top right corner of viewport\n  closeButton: \"inside\", // \"inside\" | \"outside\"\n\n  // Allow user to drag content up/down to close instance\n  dragToClose: true,\n\n  // Enable keyboard navigation\n  keyboard: {\n    Escape: \"close\",\n    Delete: \"close\",\n    Backspace: \"close\",\n    PageUp: \"next\",\n    PageDown: \"prev\",\n    ArrowUp: \"next\",\n    ArrowDown: \"prev\",\n    ArrowRight: \"next\",\n    ArrowLeft: \"prev\",\n  },\n\n  // HTML templates for various elements\n  template: {\n    // Close button icon\n    closeButton:\n      '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" tabindex=\"-1\"><path d=\"M20 20L4 4m16 0L4 20\"/></svg>',\n    // Loading indicator icon\n    spinner:\n      '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"50\" height=\"50\" viewBox=\"25 25 50 50\" tabindex=\"-1\"><circle cx=\"50\" cy=\"50\" r=\"20\"/></svg>',\n\n    // Main container element\n    main: null,\n  },\n\n  /* Note: If the `template.main` option is not provided, the structure is generated as follows by default:\n  <div class=\"fancybox__container\" role=\"dialog\" aria-modal=\"true\" aria-hidden=\"true\" aria-label=\"{{MODAL}}\" tabindex=\"-1\">\n    <div class=\"fancybox__backdrop\"></div>\n    <div class=\"fancybox__carousel\"></div>\n  </div>\n  */\n\n  // Localization of strings\n  l10n: en,\n};\n\n// Object that contains all active instances of Fancybox\nconst instances = new Map();\n\n// Number of Fancybox instances created, it is used to generate new instance \"id\"\nlet called = 0;\n\nclass Fancybox extends Base {\n  /**\n   * Fancybox constructor\n   * @constructs Fancybox\n   * @param {Object} [options] - Options for Fancybox\n   */\n  constructor(items, options = {}) {\n    // Quick hack to fix variable naming collision\n    items = items.map((item) => {\n      if (item.width) item._width = item.width;\n      if (item.height) item._height = item.height;\n\n      return item;\n    });\n\n    super(extend(true, {}, defaults, options));\n\n    this.bindHandlers();\n\n    this.state = \"init\";\n\n    this.setItems(items);\n\n    this.attachPlugins(Fancybox.Plugins);\n\n    // \"init\" event marks the start of initialization and is available to plugins\n    this.trigger(\"init\");\n\n    if (this.option(\"hideScrollbar\") === true) {\n      this.hideScrollbar();\n    }\n\n    this.initLayout();\n\n    this.initCarousel();\n\n    this.attachEvents();\n\n    instances.set(this.id, this);\n\n    // \"prepare\" event will trigger the creation of additional layout elements, such as thumbnails and toolbar\n    this.trigger(\"prepare\");\n\n    this.state = \"ready\";\n\n    // \"ready\" event will trigger the content to load\n    this.trigger(\"ready\");\n\n    // Reveal container\n    this.$container.setAttribute(\"aria-hidden\", \"false\");\n\n    // Set focus on the first focusable element inside this instance\n    if (this.option(\"trapFocus\")) {\n      this.focus();\n    }\n  }\n\n  /**\n   * Override `option` method to get value from the current slide\n   * @param {String} name option name\n   * @param  {...any} rest optional extra parameters\n   * @returns {any}\n   */\n  option(name, ...rest) {\n    const slide = this.getSlide();\n\n    let value = slide ? slide[name] : undefined;\n\n    if (value !== undefined) {\n      if (typeof value === \"function\") {\n        value = value.call(this, this, ...rest);\n      }\n\n      return value;\n    }\n\n    return super.option(name, ...rest);\n  }\n\n  /**\n   * Bind event handlers for referencability\n   */\n  bindHandlers() {\n    for (const methodName of [\n      \"onMousedown\",\n      \"onKeydown\",\n      \"onClick\",\n\n      \"onFocus\",\n\n      \"onCreateSlide\",\n      \"onSettle\",\n\n      \"onTouchMove\",\n      \"onTouchEnd\",\n\n      \"onTransform\",\n    ]) {\n      this[methodName] = this[methodName].bind(this);\n    }\n  }\n\n  /**\n   * Set up a functions that will be called whenever the specified event is delivered\n   */\n  attachEvents() {\n    document.addEventListener(\"mousedown\", this.onMousedown);\n    document.addEventListener(\"keydown\", this.onKeydown, true);\n\n    // Trap keyboard focus inside of the modal\n    if (this.option(\"trapFocus\")) {\n      document.addEventListener(\"focus\", this.onFocus, true);\n    }\n\n    this.$container.addEventListener(\"click\", this.onClick);\n  }\n\n  /**\n   * Removes previously registered event listeners\n   */\n  detachEvents() {\n    document.removeEventListener(\"mousedown\", this.onMousedown);\n    document.removeEventListener(\"keydown\", this.onKeydown, true);\n\n    document.removeEventListener(\"focus\", this.onFocus, true);\n\n    this.$container.removeEventListener(\"click\", this.onClick);\n  }\n\n  /**\n   * Initialize layout; create main container, backdrop nd layout for main carousel\n   */\n  initLayout() {\n    this.$root = this.option(\"parentEl\") || document.body;\n\n    // Container\n    let mainTemplate = this.option(\"template.main\");\n\n    if (mainTemplate) {\n      this.$root.insertAdjacentHTML(\"beforeend\", this.localize(mainTemplate));\n\n      this.$container = this.$root.querySelector(\".fancybox__container\");\n    }\n\n    if (!this.$container) {\n      this.$container = document.createElement(\"div\");\n      this.$root.appendChild(this.$container);\n    }\n\n    // Normally we would not need this, but Safari does not support `preventScroll:false` option for `focus` method\n    // and that causes layout issues\n    this.$container.onscroll = () => {\n      this.$container.scrollLeft = 0;\n      return false;\n    };\n\n    Object.entries({\n      class: \"fancybox__container\",\n      role: \"dialog\",\n      tabIndex: \"-1\",\n      \"aria-modal\": \"true\",\n      \"aria-hidden\": \"true\",\n      \"aria-label\": this.localize(\"{{MODAL}}\"),\n    }).forEach((args) => this.$container.setAttribute(...args));\n\n    if (this.option(\"animated\")) {\n      this.$container.classList.add(\"is-animated\");\n    }\n\n    // Backdrop\n    this.$backdrop = this.$container.querySelector(\".fancybox__backdrop\");\n\n    if (!this.$backdrop) {\n      this.$backdrop = document.createElement(\"div\");\n      this.$backdrop.classList.add(\"fancybox__backdrop\");\n\n      this.$container.appendChild(this.$backdrop);\n    }\n\n    // Carousel\n    this.$carousel = this.$container.querySelector(\".fancybox__carousel\");\n\n    if (!this.$carousel) {\n      this.$carousel = document.createElement(\"div\");\n      this.$carousel.classList.add(\"fancybox__carousel\");\n\n      this.$container.appendChild(this.$carousel);\n    }\n\n    // Make instance reference accessible\n    this.$container.Fancybox = this;\n\n    // Make sure the container has an ID\n    this.id = this.$container.getAttribute(\"id\");\n\n    if (!this.id) {\n      this.id = this.options.id || ++called;\n      this.$container.setAttribute(\"id\", \"fancybox-\" + this.id);\n    }\n\n    // Add custom class name to main element\n    const mainClass = this.option(\"mainClass\");\n\n    if (mainClass) {\n      this.$container.classList.add(...mainClass.split(\" \"));\n    }\n\n    // Add class name for <html> element\n    document.documentElement.classList.add(\"with-fancybox\");\n\n    this.trigger(\"initLayout\");\n\n    return this;\n  }\n\n  /**\n   * Prepares slides for the corousel\n   * @returns {Array} Slides\n   */\n  setItems(items) {\n    const slides = [];\n\n    for (const slide of items) {\n      const $trigger = slide.$trigger;\n\n      if ($trigger) {\n        const dataset = $trigger.dataset || {};\n\n        slide.src = dataset.src || $trigger.getAttribute(\"href\") || slide.src;\n        slide.type = dataset.type || slide.type;\n\n        // Support items without `src`, e.g., when `data-fancybox` attribute added directly to `<img>` element\n        if (!slide.src && $trigger instanceof HTMLImageElement) {\n          slide.src = $trigger.currentSrc || slide.$trigger.src;\n        }\n      }\n\n      // Check for thumbnail element\n      let $thumb = slide.$thumb;\n\n      if (!$thumb) {\n        let origTarget = slide.$trigger && slide.$trigger.origTarget;\n\n        if (origTarget) {\n          if (origTarget instanceof HTMLImageElement) {\n            $thumb = origTarget;\n          } else {\n            $thumb = origTarget.querySelector(\"img:not([aria-hidden])\");\n          }\n        }\n\n        if (!$thumb && slide.$trigger) {\n          $thumb =\n            slide.$trigger instanceof HTMLImageElement\n              ? slide.$trigger\n              : slide.$trigger.querySelector(\"img:not([aria-hidden])\");\n        }\n      }\n\n      slide.$thumb = $thumb || null;\n\n      // Get thumbnail image source\n      let thumb = slide.thumb;\n\n      if (!thumb && $thumb) {\n        thumb = $thumb.currentSrc || $thumb.src;\n\n        if (!thumb && $thumb.dataset) {\n          thumb = $thumb.dataset.lazySrc || $thumb.dataset.src;\n        }\n      }\n\n      // Assume we have image, then use it as thumbnail\n      if (!thumb && slide.type === \"image\") {\n        thumb = slide.src;\n      }\n\n      slide.thumb = thumb || null;\n\n      // Add empty caption to make things simpler\n      slide.caption = slide.caption || \"\";\n\n      slides.push(slide);\n    }\n\n    this.items = slides;\n  }\n\n  /**\n   * Initialize main Carousel that will be used to display the content\n   * @param {Array} slides\n   */\n  initCarousel() {\n    this.Carousel = new Carousel(\n      this.$carousel,\n      extend(\n        true,\n        {},\n        {\n          prefix: \"\",\n\n          classNames: {\n            viewport: \"fancybox__viewport\",\n            track: \"fancybox__track\",\n            slide: \"fancybox__slide\",\n          },\n\n          textSelection: true,\n          preload: this.option(\"preload\"),\n\n          friction: 0.88,\n\n          slides: this.items,\n          initialPage: this.options.startIndex,\n          slidesPerPage: 1,\n\n          infiniteX: this.option(\"infinite\"),\n          infiniteY: true,\n\n          l10n: this.option(\"l10n\"),\n\n          Dots: false,\n          Navigation: {\n            classNames: {\n              main: \"fancybox__nav\",\n              button: \"carousel__button\",\n\n              next: \"is-next\",\n              prev: \"is-prev\",\n            },\n          },\n\n          Panzoom: {\n            textSelection: true,\n\n            panOnlyZoomed: () => {\n              return (\n                this.Carousel && this.Carousel.pages && this.Carousel.pages.length < 2 && !this.option(\"dragToClose\")\n              );\n            },\n\n            lockAxis: () => {\n              if (this.Carousel) {\n                let rez = \"x\";\n\n                if (this.option(\"dragToClose\")) {\n                  rez += \"y\";\n                }\n\n                return rez;\n              }\n            },\n          },\n\n          on: {\n            \"*\": (name, ...details) => this.trigger(`Carousel.${name}`, ...details),\n            init: (carousel) => (this.Carousel = carousel),\n            createSlide: this.onCreateSlide,\n            settle: this.onSettle,\n          },\n        },\n\n        this.option(\"Carousel\")\n      )\n    );\n\n    if (this.option(\"dragToClose\")) {\n      this.Carousel.Panzoom.on({\n        // Stop further touch event handling if content is scaled\n        touchMove: this.onTouchMove,\n\n        // Update backdrop opacity depending on vertical distance\n        afterTransform: this.onTransform,\n\n        // Close instance if drag distance exceeds limit\n        touchEnd: this.onTouchEnd,\n      });\n    }\n\n    this.trigger(\"initCarousel\");\n\n    return this;\n  }\n\n  /**\n   * Process `createSlide` event to create caption element inside new slide\n   */\n  onCreateSlide(carousel, slide) {\n    let caption = slide.caption || \"\";\n\n    if (typeof this.options.caption === \"function\") {\n      caption = this.options.caption.call(this, this, this.Carousel, slide);\n    }\n\n    if (typeof caption === \"string\" && caption.length) {\n      const $caption = document.createElement(\"div\");\n      const id = `fancybox__caption_${this.id}_${slide.index}`;\n\n      $caption.className = \"fancybox__caption\";\n      $caption.innerHTML = caption;\n      $caption.setAttribute(\"id\", id);\n\n      slide.$caption = slide.$el.appendChild($caption);\n\n      slide.$el.classList.add(\"has-caption\");\n      slide.$el.setAttribute(\"aria-labelledby\", id);\n    }\n  }\n\n  /**\n   * Handle Carousel `settle` event\n   */\n  onSettle() {\n    if (this.option(\"autoFocus\")) {\n      this.focus();\n    }\n  }\n\n  /**\n   * Handle focus event\n   * @param {Event} event - Focus event\n   */\n  onFocus(event) {\n    if (!this.isTopmost()) {\n      return;\n    }\n\n    this.focus(event);\n  }\n\n  /**\n   * Handle click event on the container\n   * @param {Event} event - Click event\n   */\n  onClick(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    let eventTarget = event.composedPath()[0];\n\n    if (eventTarget.matches(\"[data-fancybox-close]\")) {\n      event.preventDefault();\n      Fancybox.close(false, event);\n\n      return;\n    }\n\n    if (eventTarget.matches(\"[data-fancybox-next]\")) {\n      event.preventDefault();\n      Fancybox.next();\n\n      return;\n    }\n\n    if (eventTarget.matches(\"[data-fancybox-prev]\")) {\n      event.preventDefault();\n      Fancybox.prev();\n\n      return;\n    }\n\n    const activeElement = document.activeElement;\n\n    if (activeElement) {\n      if (activeElement.closest(\"[contenteditable]\")) {\n        return;\n      }\n\n      if (!eventTarget.matches(FOCUSABLE_ELEMENTS)) {\n        activeElement.blur();\n      }\n    }\n\n    // Skip if clicked inside content area\n    if (eventTarget.closest(\".fancybox__content\")) {\n      return;\n    }\n\n    // Skip if text is selected\n    if (getSelection().toString().length) {\n      return;\n    }\n\n    if (this.trigger(\"click\", event) === false) {\n      return;\n    }\n\n    const action = this.option(\"click\");\n\n    switch (action) {\n      case \"close\":\n        this.close();\n        break;\n      case \"next\":\n        this.next();\n        break;\n    }\n  }\n\n  /**\n   * Handle panzoom `touchMove` event; Disable dragging if content of current slide is scaled\n   */\n  onTouchMove() {\n    const panzoom = this.getSlide().Panzoom;\n\n    return panzoom && panzoom.content.scale !== 1 ? false : true;\n  }\n\n  /**\n   * Handle panzoom `touchEnd` event; close when quick flick up/down is detected\n   * @param {Object} panzoom - Panzoom instance\n   */\n  onTouchEnd(panzoom) {\n    const distanceY = panzoom.dragOffset.y;\n\n    if (Math.abs(distanceY) >= 150 || (Math.abs(distanceY) >= 35 && panzoom.dragOffset.time < 350)) {\n      if (this.option(\"hideClass\")) {\n        this.getSlide().hideClass = `fancybox-throwOut${panzoom.content.y < 0 ? \"Up\" : \"Down\"}`;\n      }\n\n      this.close();\n    } else if (panzoom.lockAxis === \"y\") {\n      panzoom.panTo({ y: 0 });\n    }\n  }\n\n  /**\n   * Handle `afterTransform` event; change backdrop opacity based on current y position of panzoom\n   * @param {Object} panzoom - Panzoom instance\n   */\n  onTransform(panzoom) {\n    const $backdrop = this.$backdrop;\n\n    if ($backdrop) {\n      const yPos = Math.abs(panzoom.content.y);\n      const opacity = yPos < 1 ? \"\" : Math.max(0.33, Math.min(1, 1 - (yPos / panzoom.content.fitHeight) * 1.5));\n\n      this.$container.style.setProperty(\"--fancybox-ts\", opacity ? \"0s\" : \"\");\n      this.$container.style.setProperty(\"--fancybox-opacity\", opacity);\n    }\n  }\n\n  /**\n   * Handle `mousedown` event to mark that the mouse is in use\n   */\n  onMousedown() {\n    if (this.state === \"ready\") {\n      document.body.classList.add(\"is-using-mouse\");\n    }\n  }\n\n  /**\n   * Handle `keydown` event; trap focus\n   * @param {Event} event Keydown event\n   */\n  onKeydown(event) {\n    if (!this.isTopmost()) {\n      return;\n    }\n\n    document.body.classList.remove(\"is-using-mouse\");\n\n    const key = event.key;\n    const keyboard = this.option(\"keyboard\");\n\n    if (!keyboard || event.ctrlKey || event.altKey || event.shiftKey) {\n      return;\n    }\n\n    const target = event.composedPath()[0];\n\n    const classList = document.activeElement && document.activeElement.classList;\n    const isUIElement = classList && classList.contains(\"carousel__button\");\n\n    // Allow to close using Escape button\n    if (key !== \"Escape\" && !isUIElement) {\n      let ignoreElements =\n        event.target.isContentEditable ||\n        [\"BUTTON\", \"TEXTAREA\", \"OPTION\", \"INPUT\", \"SELECT\", \"VIDEO\"].indexOf(target.nodeName) !== -1;\n\n      if (ignoreElements) {\n        return;\n      }\n    }\n\n    if (this.trigger(\"keydown\", key, event) === false) {\n      return;\n    }\n\n    const action = keyboard[key];\n\n    if (typeof this[action] === \"function\") {\n      this[action]();\n    }\n  }\n\n  /**\n   * Get the active slide. This will be the first slide from the current page of the main carousel.\n   */\n  getSlide() {\n    const carousel = this.Carousel;\n\n    if (!carousel) return null;\n\n    const page = carousel.page === null ? carousel.option(\"initialPage\") : carousel.page;\n    const pages = carousel.pages || [];\n\n    if (pages.length && pages[page]) {\n      return pages[page].slides[0];\n    }\n\n    return null;\n  }\n\n  /**\n   * Place focus on the first focusable element inside current slide\n   * @param {Event} [event] - Focus event\n   */\n  focus(event) {\n    if (Fancybox.ignoreFocusChange) {\n      return;\n    }\n\n    if ([\"init\", \"closing\", \"customClosing\", \"destroy\"].indexOf(this.state) > -1) {\n      return;\n    }\n\n    const $container = this.$container;\n    const currentSlide = this.getSlide();\n    const $currentSlide = currentSlide.state === \"done\" ? currentSlide.$el : null;\n\n    // Skip if the DOM element that is currently in focus is already inside the current slide\n    if ($currentSlide && $currentSlide.contains(document.activeElement)) {\n      return;\n    }\n\n    if (event) {\n      event.preventDefault();\n    }\n\n    Fancybox.ignoreFocusChange = true;\n\n    const allFocusableElems = Array.from($container.querySelectorAll(FOCUSABLE_ELEMENTS));\n\n    let enabledElems = [];\n    let $firstEl;\n\n    for (let node of allFocusableElems) {\n      // Enable element if it's visible and\n      // is inside the current slide or is outside main carousel (for example, inside the toolbar)\n      const isNodeVisible = node.offsetParent;\n      const isNodeInsideCurrentSlide = $currentSlide && $currentSlide.contains(node);\n      const isNodeOutsideCarousel = !this.Carousel.$viewport.contains(node);\n\n      if (isNodeVisible && (isNodeInsideCurrentSlide || isNodeOutsideCarousel)) {\n        enabledElems.push(node);\n\n        if (node.dataset.origTabindex !== undefined) {\n          node.tabIndex = node.dataset.origTabindex;\n          node.removeAttribute(\"data-orig-tabindex\");\n        }\n\n        if (\n          node.hasAttribute(\"autoFocus\") ||\n          (!$firstEl && isNodeInsideCurrentSlide && !node.classList.contains(\"carousel__button\"))\n        ) {\n          $firstEl = node;\n        }\n      } else {\n        // Element is either hidden or is inside preloaded slide (e.g., not inside current slide, but next/prev)\n        node.dataset.origTabindex =\n          node.dataset.origTabindex === undefined ? node.getAttribute(\"tabindex\") : node.dataset.origTabindex;\n\n        node.tabIndex = -1;\n      }\n    }\n\n    if (!event) {\n      if (this.option(\"autoFocus\") && $firstEl) {\n        setFocusOn($firstEl);\n      } else if (enabledElems.indexOf(document.activeElement) < 0) {\n        setFocusOn($container);\n      }\n    } else {\n      if (enabledElems.indexOf(event.target) > -1) {\n        this.lastFocus = event.target;\n      } else {\n        if (this.lastFocus === $container) {\n          setFocusOn(enabledElems[enabledElems.length - 1]);\n        } else {\n          setFocusOn($container);\n        }\n      }\n    }\n\n    this.lastFocus = document.activeElement;\n\n    Fancybox.ignoreFocusChange = false;\n  }\n\n  /**\n   * Hide vertical page scrollbar and adjust right padding value of `body` element to prevent content from shifting\n   * (otherwise the `body` element may become wider and the content may expand horizontally).\n   */\n  hideScrollbar() {\n    if (!canUseDOM) {\n      return;\n    }\n\n    const scrollbarWidth = window.innerWidth - document.documentElement.getBoundingClientRect().width;\n    const id = \"fancybox-style-noscroll\";\n\n    let $style = document.getElementById(id);\n\n    if ($style) {\n      return;\n    }\n\n    if (scrollbarWidth > 0) {\n      $style = document.createElement(\"style\");\n\n      $style.id = id;\n      $style.type = \"text/css\";\n      $style.innerHTML = `.compensate-for-scrollbar {padding-right: ${scrollbarWidth}px;}`;\n\n      document.getElementsByTagName(\"head\")[0].appendChild($style);\n\n      document.body.classList.add(\"compensate-for-scrollbar\");\n    }\n  }\n\n  /**\n   * Stop hiding vertical page scrollbar\n   */\n  revealScrollbar() {\n    document.body.classList.remove(\"compensate-for-scrollbar\");\n\n    const el = document.getElementById(\"fancybox-style-noscroll\");\n\n    if (el) {\n      el.remove();\n    }\n  }\n\n  /**\n   * Remove content for given slide\n   * @param {Object} slide - Carousel slide\n   */\n  clearContent(slide) {\n    // * Clear previously added content and class name\n    this.Carousel.trigger(\"removeSlide\", slide);\n\n    if (slide.$content) {\n      slide.$content.remove();\n      slide.$content = null;\n    }\n\n    if (slide.$closeButton) {\n      slide.$closeButton.remove();\n      slide.$closeButton = null;\n    }\n\n    if (slide._className) {\n      slide.$el.classList.remove(slide._className);\n    }\n  }\n\n  /**\n   * Set new content for given slide\n   * @param {Object} slide - Carousel slide\n   * @param {HTMLElement|String} html - HTML element or string containing HTML code\n   * @param {Object} [opts] - Options\n   */\n  setContent(slide, html, opts = {}) {\n    let $content;\n\n    const $el = slide.$el;\n\n    if (html instanceof HTMLElement) {\n      if ([\"img\", \"iframe\", \"video\", \"audio\"].indexOf(html.nodeName.toLowerCase()) > -1) {\n        $content = document.createElement(\"div\");\n        $content.appendChild(html);\n      } else {\n        $content = html;\n      }\n    } else {\n      const $fragment = document.createRange().createContextualFragment(html);\n\n      $content = document.createElement(\"div\");\n      $content.appendChild($fragment);\n    }\n\n    if (slide.filter && !slide.error) {\n      $content = $content.querySelector(slide.filter);\n    }\n\n    if (!($content instanceof Element)) {\n      this.setError(slide, \"{{ELEMENT_NOT_FOUND}}\");\n\n      return;\n    }\n\n    // * Add class name indicating content type, for example `has-image`\n    slide._className = `has-${opts.suffix || slide.type || \"unknown\"}`;\n\n    $el.classList.add(slide._className);\n\n    // * Set content\n    $content.classList.add(\"fancybox__content\");\n\n    // Make sure that content is not hidden and will be visible\n    if ($content.style.display === \"none\" || getComputedStyle($content).getPropertyValue(\"display\") === \"none\") {\n      $content.style.display = slide.display || this.option(\"defaultDisplay\") || \"flex\";\n    }\n\n    if (slide.id) {\n      $content.setAttribute(\"id\", slide.id);\n    }\n\n    slide.$content = $content;\n\n    $el.prepend($content);\n\n    this.manageCloseButton(slide);\n\n    if (slide.state !== \"loading\") {\n      this.revealContent(slide);\n    }\n\n    return $content;\n  }\n\n  /**\n   * Create close button if needed\n   * @param {Object} slide\n   */\n  manageCloseButton(slide) {\n    const position = slide.closeButton === undefined ? this.option(\"closeButton\") : slide.closeButton;\n\n    if (!position || (position === \"top\" && this.$closeButton)) {\n      return;\n    }\n\n    const $btn = document.createElement(\"button\");\n\n    $btn.classList.add(\"carousel__button\", \"is-close\");\n    $btn.setAttribute(\"title\", this.options.l10n.CLOSE);\n    $btn.innerHTML = this.option(\"template.closeButton\");\n\n    $btn.addEventListener(\"click\", (e) => this.close(e));\n\n    if (position === \"inside\") {\n      // Remove existing one to avoid scope issues\n      if (slide.$closeButton) {\n        slide.$closeButton.remove();\n      }\n\n      slide.$closeButton = slide.$content.appendChild($btn);\n    } else {\n      this.$closeButton = this.$container.insertBefore($btn, this.$container.firstChild);\n    }\n  }\n\n  /**\n   * Make content visible for given slide and optionally start CSS animation\n   * @param {Object} slide - Carousel slide\n   */\n  revealContent(slide) {\n    this.trigger(\"reveal\", slide);\n\n    slide.$content.style.visibility = \"\";\n\n    // Add CSS class name that reveals content (default animation is \"fadeIn\")\n    let showClass = false;\n\n    if (\n      !(\n        slide.error ||\n        slide.state === \"loading\" ||\n        this.Carousel.prevPage !== null ||\n        slide.index !== this.options.startIndex\n      )\n    ) {\n      showClass = slide.showClass === undefined ? this.option(\"showClass\") : slide.showClass;\n    }\n\n    if (!showClass) {\n      this.done(slide);\n\n      return;\n    }\n\n    slide.state = \"animating\";\n\n    this.animateCSS(slide.$content, showClass, () => {\n      this.done(slide);\n    });\n  }\n\n  /**\n   * Add class name to given HTML element and wait for `animationend` event to execute callback\n   * @param {HTMLElement} $el\n   * @param {String} className\n   * @param {Function} callback - A callback to run\n   */\n  animateCSS($element, className, callback) {\n    if ($element) {\n      $element.dispatchEvent(new CustomEvent(\"animationend\", { bubbles: true, cancelable: true }));\n    }\n\n    if (!$element || !className) {\n      if (typeof callback === \"function\") {\n        callback();\n      }\n\n      return;\n    }\n\n    const handleAnimationEnd = function (event) {\n      if (event.currentTarget === this) {\n        $element.removeEventListener(\"animationend\", handleAnimationEnd);\n\n        if (callback) {\n          callback();\n        }\n\n        $element.classList.remove(className);\n      }\n    };\n\n    $element.addEventListener(\"animationend\", handleAnimationEnd);\n    $element.classList.add(className);\n  }\n\n  /**\n   * Mark given slide as `done`, e.g., content is loaded and displayed completely\n   * @param {Object} slide - Carousel slide\n   */\n  done(slide) {\n    slide.state = \"done\";\n\n    this.trigger(\"done\", slide);\n\n    // Trigger focus for current slide (and ignore preloaded slides)\n    const currentSlide = this.getSlide();\n\n    if (currentSlide && slide.index === currentSlide.index && this.option(\"autoFocus\")) {\n      this.focus();\n    }\n  }\n\n  /**\n   * Set error message as slide content\n   * @param {Object} slide - Carousel slide\n   * @param {String} message - Error message, can contain HTML code and template variables\n   */\n  setError(slide, message) {\n    slide.error = message;\n\n    this.hideLoading(slide);\n    this.clearContent(slide);\n\n    // Create new content\n    const div = document.createElement(\"div\");\n    div.classList.add(\"fancybox-error\");\n    div.innerHTML = this.localize(message || \"<p>{{ERROR}}</p>\");\n\n    this.setContent(slide, div, { suffix: \"error\" });\n  }\n\n  /**\n   * Create loading indicator inside given slide\n   * @param {Object} slide - Carousel slide\n   */\n  showLoading(slide) {\n    slide.state = \"loading\";\n\n    slide.$el.classList.add(\"is-loading\");\n\n    let $spinner = slide.$el.querySelector(\".fancybox__spinner\");\n\n    if ($spinner) {\n      return;\n    }\n\n    $spinner = document.createElement(\"div\");\n\n    $spinner.classList.add(\"fancybox__spinner\");\n    $spinner.innerHTML = this.option(\"template.spinner\");\n\n    $spinner.addEventListener(\"click\", () => {\n      if (!this.Carousel.Panzoom.velocity) this.close();\n    });\n\n    slide.$el.prepend($spinner);\n  }\n\n  /**\n   * Remove loading indicator from given slide\n   * @param {Object} slide - Carousel slide\n   */\n  hideLoading(slide) {\n    const $spinner = slide.$el && slide.$el.querySelector(\".fancybox__spinner\");\n\n    if ($spinner) {\n      $spinner.remove();\n\n      slide.$el.classList.remove(\"is-loading\");\n    }\n\n    if (slide.state === \"loading\") {\n      this.trigger(\"load\", slide);\n\n      slide.state = \"ready\";\n    }\n  }\n\n  /**\n   * Slide carousel to next page\n   */\n  next() {\n    const carousel = this.Carousel;\n\n    if (carousel && carousel.pages.length > 1) {\n      carousel.slideNext();\n    }\n  }\n\n  /**\n   * Slide carousel to previous page\n   */\n  prev() {\n    const carousel = this.Carousel;\n\n    if (carousel && carousel.pages.length > 1) {\n      carousel.slidePrev();\n    }\n  }\n\n  /**\n   * Slide carousel to selected page with optional parameters\n   * Examples:\n   *    Fancybox.getInstance().jumpTo(2);\n   *    Fancybox.getInstance().jumpTo(3, {friction: 0})\n   * @param  {...any} args - Arguments for Carousel `slideTo` method\n   */\n  jumpTo(...args) {\n    if (this.Carousel) this.Carousel.slideTo(...args);\n  }\n\n  /**\n   * Check if current instance is trying to close or is already closed\n   * @returns {Boolean}\n   */\n  isClosing() {\n    return [\"closing\", \"customClosing\", \"destroy\"].includes(this.state);\n  }\n\n  /**\n   * Check if the current instance is not blocked by another instance\n   * @returns {Boolean}\n   */\n  isTopmost() {\n    return Fancybox.getInstance().id == this.id;\n  }\n\n  /**\n   * Start closing the current instance\n   * @param {Event} [event] - Optional click event\n   */\n  close(event) {\n    if (event) event.preventDefault();\n\n    // First, stop further execution if this instance is already closing\n    // (this can happen if, for example, user clicks close button multiple times really fast)\n    if (this.isClosing()) {\n      return;\n    }\n\n    // Allow callbacks and/or plugins to prevent closing\n    if (this.trigger(\"shouldClose\", event) === false) {\n      return;\n    }\n\n    this.state = \"closing\";\n\n    this.Carousel.Panzoom.destroy();\n\n    this.detachEvents();\n\n    this.trigger(\"closing\", event);\n\n    if (this.state === \"destroy\") {\n      return;\n    }\n\n    // Trigger default CSS closing animation for backdrop and interface elements\n    this.$container.setAttribute(\"aria-hidden\", \"true\");\n\n    this.$container.classList.add(\"is-closing\");\n\n    // Clear inactive slides\n    const currentSlide = this.getSlide();\n\n    this.Carousel.slides.forEach((slide) => {\n      if (slide.$content && slide.index !== currentSlide.index) {\n        this.Carousel.trigger(\"removeSlide\", slide);\n      }\n    });\n\n    // Start default closing animation\n    if (this.state === \"closing\") {\n      const hideClass = currentSlide.hideClass === undefined ? this.option(\"hideClass\") : currentSlide.hideClass;\n\n      this.animateCSS(\n        currentSlide.$content,\n        hideClass,\n        () => {\n          this.destroy();\n        },\n        true\n      );\n    }\n  }\n\n  /**\n   * Clean up after closing fancybox\n   */\n  destroy() {\n    if (this.state === \"destroy\") {\n      return;\n    }\n\n    this.state = \"destroy\";\n\n    this.trigger(\"destroy\");\n\n    const $trigger = this.option(\"placeFocusBack\") ? this.option(\"triggerTarget\", this.getSlide().$trigger) : null;\n\n    // Destroy Carousel and then detach plugins;\n    // * Note: this order allows plugins to receive `removeSlide` event\n    this.Carousel.destroy();\n\n    this.detachPlugins();\n\n    this.Carousel = null;\n\n    this.options = {};\n    this.events = {};\n\n    this.$container.remove();\n\n    this.$container = this.$backdrop = this.$carousel = null;\n\n    if ($trigger) {\n      setFocusOn($trigger);\n    }\n\n    instances.delete(this.id);\n\n    const nextInstance = Fancybox.getInstance();\n\n    if (nextInstance) {\n      nextInstance.focus();\n      return;\n    }\n\n    document.documentElement.classList.remove(\"with-fancybox\");\n    document.body.classList.remove(\"is-using-mouse\");\n\n    this.revealScrollbar();\n  }\n\n  /**\n   * Create new Fancybox instance with provided options\n   * Example:\n   *   Fancybox.show([{ src : 'https://lipsum.app/id/1/300x225' }]);\n   * @param {Array} items - Gallery items\n   * @param {Object} [options] - Optional custom options\n   * @returns {Object} Fancybox instance\n   */\n  static show(items, options = {}) {\n    return new Fancybox(items, options);\n  }\n\n  /**\n   * Starts Fancybox if event target matches any opener or target is `trigger element`\n   * @param {Event} event - Click event\n   * @param {Object} [options] - Optional custom options\n   */\n  static fromEvent(event, options = {}) {\n    //  Allow other scripts to prevent starting fancybox on click\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    // Don't run if right-click\n    if (event.button && event.button !== 0) {\n      return;\n    }\n\n    // Ignore command/control + click\n    if (event.ctrlKey || event.metaKey || event.shiftKey) {\n      return;\n    }\n\n    const origTarget = event.composedPath()[0];\n    let eventTarget = origTarget;\n\n    // Support `trigger` element, e.g., start fancybox from different DOM element, for example,\n    // to have one preview image for hidden image gallery\n    let triggerGroupName;\n\n    if (\n      eventTarget.matches(\"[data-fancybox-trigger]\") ||\n      (eventTarget = eventTarget.closest(\"[data-fancybox-trigger]\"))\n    ) {\n      options.triggerTarget = eventTarget;\n      triggerGroupName = eventTarget && eventTarget.dataset && eventTarget.dataset.fancyboxTrigger;\n    }\n\n    if (triggerGroupName) {\n      const triggerItems = document.querySelectorAll(`[data-fancybox=\"${triggerGroupName}\"]`);\n      const triggerIndex = parseInt(eventTarget.dataset.fancyboxIndex, 10) || 0;\n\n      eventTarget = triggerItems.length ? triggerItems[triggerIndex] : eventTarget;\n    }\n\n    // * Try to find matching openener\n    let matchingOpener;\n    let target;\n\n    Array.from(Fancybox.openers.keys())\n      .reverse()\n      .some((opener) => {\n        target = eventTarget || origTarget;\n\n        let found = false;\n\n        try {\n          if (target instanceof Element && (typeof opener === \"string\" || opener instanceof String)) {\n            // Chain closest() to event.target to find and return the parent element,\n            // regardless if clicking on the child elements (icon, label, etc)\n            found = target.matches(opener) || (target = target.closest(opener));\n          }\n        } catch (error) {}\n\n        if (found) {\n          event.preventDefault();\n          matchingOpener = opener;\n          return true;\n        }\n\n        return false;\n      });\n\n    let rez = false;\n\n    if (matchingOpener) {\n      options.event = event;\n      options.target = target;\n\n      target.origTarget = origTarget;\n\n      rez = Fancybox.fromOpener(matchingOpener, options);\n\n      // Check if the mouse is being used\n      // Waiting for better browser support for `:focus-visible` -\n      // https://drafts.csswg.org/selectors-4/#the-focus-visible-pseudo\n      const nextInstance = Fancybox.getInstance();\n\n      if (nextInstance && nextInstance.state === \"ready\" && event.detail) {\n        document.body.classList.add(\"is-using-mouse\");\n      }\n    }\n\n    return rez;\n  }\n\n  /**\n   * Starts Fancybox using selector\n   * @param {String} opener - Valid CSS selector string\n   * @param {Object} [options] - Optional custom options\n   */\n  static fromOpener(opener, options = {}) {\n    // Callback function called once for each group element that\n    // 1) converts data attributes to boolean or JSON\n    // 2) removes values that could cause issues\n    const mapCallback = function (el) {\n      const falseValues = [\"false\", \"0\", \"no\", \"null\", \"undefined\"];\n      const trueValues = [\"true\", \"1\", \"yes\"];\n\n      const dataset = Object.assign({}, el.dataset);\n      const options = {};\n\n      for (let [key, value] of Object.entries(dataset)) {\n        if (key === \"fancybox\") {\n          continue;\n        }\n\n        if (key === \"width\" || key === \"height\") {\n          options[`_${key}`] = value;\n        } else if (typeof value === \"string\" || value instanceof String) {\n          if (falseValues.indexOf(value) > -1) {\n            options[key] = false;\n          } else if (trueValues.indexOf(options[key]) > -1) {\n            options[key] = true;\n          } else {\n            try {\n              options[key] = JSON.parse(value);\n            } catch (e) {\n              options[key] = value;\n            }\n          }\n        } else {\n          options[key] = value;\n        }\n      }\n\n      if (el instanceof Element) {\n        options.$trigger = el;\n      }\n\n      return options;\n    };\n\n    let items = [],\n      index = options.startIndex || 0,\n      target = options.target || null;\n\n    // Get options\n    // ===\n    options = extend({}, options, Fancybox.openers.get(opener));\n\n    // Get matching nodes\n    // ===\n    const groupAll = options.groupAll === undefined ? false : options.groupAll;\n\n    const groupAttr = options.groupAttr === undefined ? \"data-fancybox\" : options.groupAttr;\n    const groupValue = groupAttr && target ? target.getAttribute(`${groupAttr}`) : \"\";\n\n    if (!target || groupValue || groupAll) {\n      const $root = options.root || (target ? target.getRootNode() : document.body);\n\n      items = [].slice.call($root.querySelectorAll(opener));\n    }\n\n    if (target && !groupAll) {\n      if (groupValue) {\n        items = items.filter((el) => el.getAttribute(`${groupAttr}`) === groupValue);\n      } else {\n        items = [target];\n      }\n    }\n\n    if (!items.length) {\n      return false;\n    }\n\n    // Exit if current instance is triggered from the same element\n    // ===\n    const currentInstance = Fancybox.getInstance();\n\n    if (currentInstance && items.indexOf(currentInstance.options.$trigger) > -1) {\n      return false;\n    }\n\n    // Start Fancybox\n    // ===\n\n    // Get index of current item in the gallery\n    index = target ? items.indexOf(target) : index;\n\n    // Convert items in a format supported by fancybox\n    items = items.map(mapCallback);\n\n    // * Create new fancybox instance\n    return new Fancybox(\n      items,\n      extend({}, options, {\n        startIndex: index,\n        $trigger: target,\n      })\n    );\n  }\n\n  /**\n   * Attach a click handler function that starts Fancybox to the selected items, as well as to all future matching elements.\n   * @param {String} selector - Selector that should match trigger elements\n   * @param {Object} [options] - Custom options\n   */\n  static bind(selector, options = {}) {\n    function attachClickEvent() {\n      document.body.addEventListener(\"click\", Fancybox.fromEvent, false);\n    }\n\n    if (!canUseDOM) {\n      return;\n    }\n\n    if (!Fancybox.openers.size) {\n      if (/complete|interactive|loaded/.test(document.readyState)) {\n        attachClickEvent();\n      } else {\n        document.addEventListener(\"DOMContentLoaded\", attachClickEvent);\n      }\n    }\n\n    Fancybox.openers.set(selector, options);\n  }\n\n  /**\n   * Remove the click handler that was attached with `bind()`\n   * @param {String} selector - A selector which should match the one originally passed to .bind()\n   */\n  static unbind(selector) {\n    Fancybox.openers.delete(selector);\n\n    if (!Fancybox.openers.size) {\n      Fancybox.destroy();\n    }\n  }\n\n  /**\n   * Immediately destroy all instances (without closing animation) and clean up all bindings..\n   */\n  static destroy() {\n    let fb;\n\n    while ((fb = Fancybox.getInstance())) {\n      fb.destroy();\n    }\n\n    Fancybox.openers = new Map();\n\n    document.body.removeEventListener(\"click\", Fancybox.fromEvent, false);\n  }\n\n  /**\n   * Retrieve instance by identifier or the top most instance, if identifier is not provided\n   * @param {String|Numeric} [id] - Optional instance identifier\n   */\n  static getInstance(id) {\n    if (id) {\n      return instances.get(id);\n    }\n\n    const instance = Array.from(instances.values())\n      .reverse()\n      .find((instance) => {\n        if (!instance.isClosing()) {\n          return instance;\n        }\n\n        return false;\n      });\n\n    return instance || null;\n  }\n\n  /**\n   * Close all or topmost currently active instance.\n   * @param {boolean} [all] - All or only topmost active instance\n   * @param {any} [arguments] - Optional data\n   */\n  static close(all = true, args) {\n    if (all) {\n      for (const instance of instances.values()) {\n        instance.close(args);\n      }\n    } else {\n      const instance = Fancybox.getInstance();\n\n      if (instance) {\n        instance.close(args);\n      }\n    }\n  }\n\n  /**\n   * Slide topmost currently active instance to next page\n   */\n  static next() {\n    const instance = Fancybox.getInstance();\n\n    if (instance) {\n      instance.next();\n    }\n  }\n\n  /**\n   * Slide topmost currently active instance to previous page\n   */\n  static prev() {\n    const instance = Fancybox.getInstance();\n\n    if (instance) {\n      instance.prev();\n    }\n  }\n}\n\n// Expose version\nFancybox.version = \"__VERSION__\";\n\n// Expose defaults\nFancybox.defaults = defaults;\n\n// Expose openers\nFancybox.openers = new Map();\n\n// Add default plugins\nFancybox.Plugins = Plugins;\n\n// Auto init with default options\nFancybox.bind(\"[data-fancybox]\");\n\n// Prepare plugins\nfor (const [key, Plugin] of Object.entries(Fancybox.Plugins || {})) {\n  if (typeof Plugin.create === \"function\") {\n    Plugin.create(Fancybox);\n  }\n}\n\nexport { Fancybox };\n","export default {\r\n  CLOSE: \"Close\",\r\n  NEXT: \"Next\",\r\n  PREV: \"Previous\",\r\n  MODAL: \"You can close this modal content with the ESC key\",\r\n  ERROR: \"Something Went Wrong, Please Try Again Later\",\r\n  IMAGE_ERROR: \"Image Not Found\",\r\n  ELEMENT_NOT_FOUND: \"HTML Element Not Found\",\r\n  AJAX_NOT_FOUND: \"Error Loading AJAX : Not Found\",\r\n  AJAX_FORBIDDEN: \"Error Loading AJAX : Forbidden\",\r\n  IFRAME_ERROR: \"Error Loading Page\",\r\n  TOGGLE_ZOOM: \"Toggle zoom level\",\r\n  TOGGLE_THUMBS: \"Toggle thumbnails\",\r\n  TOGGLE_SLIDESHOW: \"Toggle slideshow\",\r\n  TOGGLE_FULLSCREEN: \"Toggle full-screen mode\",\r\n  DOWNLOAD: \"Download\",\r\n};\r\n","import { Fancybox } from '@fancyapps/ui/src/Fancybox/Fancybox.js';\n\nexport const fancybox = Fancybox.bind('[data-fancybox=\"gallery\"]', {\n  Thumbs: false,\n  Toolbar: false,\n\n  Image: {\n    zoom: false,\n    click: false,\n    wheel: 'slide',\n  },\n});\n"],"names":["$f973f0a89548de5e$export$21666b427502ea6d","mobMenu","document","querySelector","openMenuBtn","closeMenuBtn","aboutUsLinkHeader","abotUsLinkMobMenu","portfolioLinkHeader","portfolioLinkMobMenu","contactsLinkHeader","contactsLinkMobMenu","heroSection","propertiesSection","aboutSection","contactsSection","portfolioSection","footer","$afebf7c8826a1ba2$export$ac262bcf0e49db26","classList","toggle","addEventListener","$28de2609196b7b82$export$743531d17054bdf7","remove","add","$8f6db174158c6093$export$87e8210b13494669","$7d35f8a2f74867de$export$fcdbdf26053c5451","contains","$bfd35158e31ac20e$export$53b83ca8eaab0383","obj","constructor","Object","prototype","toString","call","$2e60a25320e39cdf$export$8b58be045bf06082","args","deep","shift","result","Error","extenders","slice","len","length","i","extender","key","hasOwnProperty","value","Array","isArray","base","$97076b09dd502a27$export$71594e8a50f746f4","window","createElement","$c0ba77432e9b82a2$var$preventScrollSupported","$c0ba77432e9b82a2$export$6a59c51278cd7bb1","$c0ba77432e9b82a2$export$5a51bc2ba3a0d25","node","focus","preventScroll","setActive","scrollTop","pageXOffset","body","scrollLeft","pageYOffset","scrollTo","top","left","behavior","e","$0f3c6e405f60aa30$export$ef88aa0d34c34520","option","fallback","rest","String","path","this","options","split","reduce","prev","curr","undefined","localize","str","params","replace","match","subkey","rez","toLowerCase","substring","index","join","on","name","callback","entries","forEach","item","listeners","events","indexOf","push","once","listener","details","off","_","splice","trigger","listener1","attachPlugins","plugins","newPlugins","Plugin","defaults","key1","plugin","attach","assign","detachPlugins","detach","type","$35c98288d6c334d4$export$2077e0241d6afd3c","precision","parseFloat","Math","round","Number","EPSILON","$11392641aadb1a2a$export$2bb74740c4e19def","Element","__Panzoom","overflowY","getComputedStyle","overflowX","vertical","abs","scrollHeight","clientHeight","horizontal","scrollWidth","clientWidth","$11392641aadb1a2a$export$988b38dbf6859d61","parentNode","$a41650b7895a0bb6$export$9caf76241ca21a11","ResizeObserver","observe","el","observables","some","observable","newObservable","size","height","width","unobserve","filter","disconnect","check","changedEntries","currentHeight","currentWidth","map","requestAnimationFrame","boundCheck","bind","$746ca33a09d68912$var$Pointer","nativePointer","id","self","Touch","identifier","pageX","pageY","clientX","clientY","$746ca33a09d68912$export$79376507b09a66f","a","b","sqrt","$746ca33a09d68912$export$b820caf342892892","$746ca33a09d68912$export$602faa26dc074936","stop","_element","removeEventListener","_pointerStart","passive","_touchStart","_move","_touchEnd","_pointerEnd","_triggerPointerStart","pointer","event","_startCallback","currentPointers","startPointers","start","move","end","buttons","button","p","touch","from","changedTouches","previousPointers","changedPointers","$746ca33a09d68912$var$isTouchEvent","t","trackedChangedPointers","findIndex","_moveCallback","_triggerPointerEnd","_endCallback","$027cf5305e190dba$export$5a4c7d2802d310f9","element","x","y","nodes","childNodes","range","createRange","nodeType","Node","TEXT_NODE","selectNodeContents","rect","getBoundingClientRect","right","bottom","$af9fb750ab54033a$export$36c2abee46ce2f83","elem","max","naturalHeight","baseVal","offsetHeight","$af9fb750ab54033a$export$26b8a639408dbbb6","srcWidth","srcHeight","maxWidth","maxHeight","ratio","min","$c0e2b244f1c707be$var$defaults","zoom","pinchToZoom","panOnlyZoomed","lockAxis","friction","decelFriction","zoomFriction","bounceForce","baseScale","minScale","maxScale","step","textSelection","click","wheel","wheelFactor","wheelLimit","draggableClass","draggingClass","$c0e2b244f1c707be$export$b704d075ddd20210","initLayout","$container","HTMLElement","$content","$viewport","append","appendChild","resetValues","updateRate","test","navigator","userAgent","container","viewport","content","origWidth","origHeight","scale","transform","resetDragPosition","onLoad","updateMetrics","panTo","onClick","defaultPrevented","activeElement","closest","getSelection","target","hasAttribute","stopPropagation","getClientRects","state","dragPosition","midPoint","dragStart","preventDefault","zoomWithClick","onWheel","zoomWithWheel","changedDelta","delta","deltaY","deltaX","wheelDelta","detail","newScale","zoomTo","toggleZoom","attachEvents","initObserver","pointerTracker","velocity","composedPath","nodeName","time","Date","now","prevMidpoint","newMidpoint","panX","panY","prevDistance","newDistance","scaleDiff","dragOffset","axisToLock","angle","atan2","PI","stopImmediatePropagation","startPoint","xPos","yPos","getZoomDelta","setDragResistance","startAnimation","_dragOffset","recalculateTransform","last","resizeObserver","updateTimer","setTimeout","isAnimating","endAnimation","silently","contentIsImage","HTMLImageElement","contentIsZoomable","shouldResizeParent","naturalWidth","offsetWidth","style","contentRect","viewportRect","containerRect","viewportWidth","viewportHeight","viewportStyles","paddingLeft","paddingRight","paddingTop","paddingBottom","fitWidth","fitHeight","isZoomable","zoomIn","zoomOut","props","currentScale","percentXInCurrentBox","percentYInCurrentBox","ignoreBounds","boundX","boundY","getBounds","to","rAF","cancelAnimationFrame","animate","setEdgeForce","setDragForce","setTransform","pastLeft","pastRight","pastTop","pastBottom","force","restX","restY","bound","distance","final","handleCursor","detachEvents","destroy","clearTimeout","super","methodName","Plugins","version","$d7319af613f18d0a$export$de363e709c412c8a","func","limit","lastCall","getTime","$2f665a12a0f531a0$export$b8a61e5c71402559","carousel","createButton","$btn","setAttribute","toUpperCase","classNames","innerHTML","build","$next","$prev","onRefresh","pageCount","pages","elemDimWidth","wrapDimWidth","isInteger","cleanup","removeAttribute","page","prevTpl","nextTpl","main","next","$6c9bf2576103359c$export$2ae15352e0a80063","addAsTargetFor","nav","addAsNavFor","initialSlide","initialPage","onNavReady","onNavCreateSlide","onNavClick","onTargetChange","panzoom","clickedNavSlide","selectedNavIndex","parseInt","dataset","selectedSyncPage","findPageForSlide","slideTo","markSelectedSlide","slide","selectedIndex","targetIndex","indexes","selectedNavPage","slides","$el","slide1","sync","Sync","$10ab92cec0d5a75a$export$c203ca0aafe4939a","buildList","$list","removeList","removeChild","rebuildDots","listExists","pagesCount","dotCount","children","lastChild","$dot","code","nextSibling","previousSibling","setActiveDot","$activeDot","onChange","change","refresh","$aa0fda34e3ae17cd$var$defaults","preload","slidesPerPage","center","infinite","fill","dragFree","prefix","track","slideSelected","l10n","NEXT","PREV","GOTO","$aa0fda34e3ae17cd$export$144901db2ea8e967","pageIndex","prevPage","prevPageIndex","initSlides","$track","manageSlideVisiblity","initPanzoom","querySelectorAll","isDom","lastSlideWidth","contentWidth","slideWidth","getSlideMetrics","currentPage","shouldCenter","shouldFill","sum","page2","page1","updatePanzoom","firstSlide","isTestEl","visibility","customClass","prepend","currentStyle","marginLeft","marginRight","find","page3","setPage","Panzoom","wrapInner","resizeParent","centerOnStart","afterUpdate","updatePage","beforeTransform","onBeforeTransform","touchEnd","onTouchEnd","currentX","getPropertyValue","leftBoundary","rightBoundary","hasDiff","insideCurrentInterval","insidePrevInterval","insideNextInterval","createSlideEl","removeSlideEl","updatedX","nextIndex","nextPos","markSelectedSlides","curentIndex","lazySrc1","srcset","lazySrcset","lazySrc","src","backgroundImage","div","html","allElelements","goal","refIndex","insertBefore","refSlide","selectedClass","attr","manageInfiniteTrack","isFlipped","nextPageIndex","getPageFromPosition","slideToClosest","interval","floor","slide2","toClosest","nextPosition","$53dcd4e13abe2049$var$defaults","minSlideCount","minScreenHeight","autoStart","Carousel","tpl","$53dcd4e13abe2049$export$73e055b807a6709","onPrepare","getSlides","fancybox","onClosing","onKeydown","$carousel","Dots","Navigation","items","thumb","hide","show","display","prepare","closing","keydown","$74f87f5b5f8a278c$var$buildURLQuery","url","URL","URLSearchParams","search","set","matches","$74f87f5b5f8a278c$var$defaults","video","autoplay","youtube","autohide","fs","rel","hd","wmode","enablejsapi","html5","vimeo","show_title","show_byline","show_portrait","fullscreen","html5video","format","$74f87f5b5f8a278c$export$13f9d3c4397c4713","onInit","processType","videoId","encodeURIComponent","vendor","charAt","_width","_height","onReady","setContent","getSlide","playVideo","onCreateSlide","loadInlineContent","tmp","getElementById","$placeHolder","cloneNode","attrId","getAttribute","setError","loadAjaxContent","xhr","XMLHttpRequest","showLoading","onreadystatechange","readyState","DONE","hideLoading","status","responseText","data","ajax","open","setRequestHeader","send","loadIframeContent","$iframe","className","resizeIframe","onerror","onload","isFirstLoad","isReady","revealContent","setAspectRatio","maxRatio","width_","height_","autoSize","$parent","parentStyle","compStyles","paddingX","paddingY","contentWindow","$html","getElementsByTagName","$body","overflow","flex","error","newStyle","poster","onSelectSlide","$video","promise","play","then","catch","muted","err","poller","command","method","postMessage","JSON","stringify","onUnselectSlide","pause","onRemoveSlide","abort","$closeButton","onMessage","parse","origin","getElementsByClassName","source","ex","init","ready","$f74b7916fa7bc0d6$export$3e431a229df88919","clickTimer","$image","canZoom","imageFit","onImageStatusChange","alt","draggable","sizes","shouldWrap","$wrap","complete","initSlidePanzoom","done","startIndex","getZoomInfo","thumbRect","$thumb","thumbWidth","thumbHeight","contentHeight","shiftedTop","shiftedLeft","opacity","visualViewport","visibleTopLeft","elementFromPoint","visibleBottomRight","Panzoom1","Panzoom2","$caption","animatePosition","zoomOutClass","zoomInClass","clickAction","touchIsEnabled","close","process","action","dblclickAction","canZoomInClass","canZoomOutClass","zoomOpacity","ignoreCoveredThumbnail","doubleClick","fit","wrap","$368ceaaa8552dda6$export$ab85ecd77ce6a5cd","timer","firstRun","currentSlide","currentHash","hash","newHash","slug","$trigger","origHash","history","title","location","pathname","hasCreatedHistory","hasSilentClose","replaceState","static","Fancybox","getInstance","Hash","getParsedURL","selectedElem","dispatchEvent","CustomEvent","bubbles","cancelable","groupElems","instance","startFromUrl","proceed","onHashChange","substr","pop","initCarousel","$5c3de6cebd770467$export$159cd03be7087f39","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","activate","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","deactivate","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","$cba53c876457adba$export$9e844f8a53211d5","isActive","active","setTimer","delay","jumpTo","$progress","transitionDuration","clearTimer","handleVisibilityChange","$8d9279010f90a5a6$var$defaults","autoEnable","counter","position","class","tabindex","label","Slideshow","thumbs","Thumbs","hasImage","closeButton","update","slideshow","onFsChange","prop","$svg","all_groups","all_items","includes","fullscreenEnabled","fullScreen","group","idx","cnt","downloadSrc","$el1","$el2","$el3","$el4","onDone","$6e3d0a6414b202f7$export$c203ca0aafe4939a","startY","onResize","updateViewport","onTouchstart","onTouchmove","offsetLeft","offsetTop","touches","screenY","innerWidth","documentElement","curY","isAtTop","isAtBottom","pendingUpdate","$8d9279010f90a5a6$export$4c260019440d418f","$14464cd073806874$var$defaults","showClass","hideClass","animated","hideScrollbar","parentEl","mainClass","autoFocus","trapFocus","placeFocusBack","dragToClose","keyboard","Escape","Delete","Backspace","PageUp","PageDown","ArrowUp","ArrowDown","ArrowRight","ArrowLeft","template","spinner","CLOSE","MODAL","ERROR","IMAGE_ERROR","ELEMENT_NOT_FOUND","AJAX_NOT_FOUND","AJAX_FORBIDDEN","IFRAME_ERROR","TOGGLE_ZOOM","TOGGLE_THUMBS","TOGGLE_SLIDESHOW","TOGGLE_FULLSCREEN","DOWNLOAD","$14464cd073806874$var$instances","Map","$14464cd073806874$var$called","$14464cd073806874$export$cb45b08d97cdc4fd","bindHandlers","onMousedown","onFocus","$root","mainTemplate","insertAdjacentHTML","onscroll","role","tabIndex","$backdrop","setItems","currentSrc","origTarget","caption","infiniteX","infiniteY","createSlide","settle","onSettle","touchMove","onTouchMove","afterTransform","onTransform","isTopmost","eventTarget","blur","distanceY","setProperty","ctrlKey","altKey","shiftKey","isUIElement","isContentEditable","ignoreFocusChange","$currentSlide","allFocusableElems","$firstEl","enabledElems","isNodeVisible","offsetParent","isNodeInsideCurrentSlide","isNodeOutsideCarousel","origTabindex","lastFocus","scrollbarWidth","$style","revealScrollbar","clearContent","_className","opts","$fragment","createContextualFragment","suffix","manageCloseButton","firstChild","animateCSS","$element","handleAnimationEnd","currentTarget","message","$spinner","slideNext","slidePrev","isClosing","delete","nextInstance","metaKey","triggerGroupName","matchingOpener","triggerTarget","fancyboxTrigger","triggerItems","triggerIndex","fancyboxIndex","openers","keys","reverse","opener","found","fromOpener","options1","groupAll","get","groupAttr","groupValue","root","getRootNode","currentInstance","falseValues","trueValues","key2","selector","attachClickEvent","fromEvent","fb","values","all","create","Toolbar","Image"],"version":3,"file":"index.c9948912.js.map"}